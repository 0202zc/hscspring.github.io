<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  
  <meta name="description" content="Yam | AI | NLP | 人工智能 | 哲学 | 自然语言处理 | 机器学习" />
  

  
  
  
  
  
  <title>Sort Based on Multiway Tree | Yam</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Several weeks ago, we met a sort problem in our program of web app. We tried kinds of methods and finally have gotten a nearly 10 times performance improvement. The problem is very interesting and wor">
<meta name="keywords" content="Python,Elixir,Sort,Tree,Multiway Tree">
<meta property="og:type" content="article">
<meta property="og:title" content="Sort Based on Multiway Tree">
<meta property="og:url" content="https://www.yam.gift/2019/11/03/DSA/2019-11-03-Multiway-Tree-Sort/index.html">
<meta property="og:site_name" content="Yam">
<meta property="og:description" content="Several weeks ago, we met a sort problem in our program of web app. We tried kinds of methods and finally have gotten a nearly 10 times performance improvement. The problem is very interesting and wor">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-11-04T04:15:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sort Based on Multiway Tree">
<meta name="twitter:description" content="Several weeks ago, we met a sort problem in our program of web app. We tried kinds of methods and finally have gotten a nearly 10 times performance improvement. The problem is very interesting and wor">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  

  
  <!-- baidu webmaster push -->
<link rel="alternate" href="/atom.xml" title="Yam" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body class="home blog custom-background custom-font-enabled single-author">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="Yam" rel="home">Yam</a>
      </h1>
      
        <h2 class="site-description">
          <a href="/" id="subtitle">Feeling, Coding, Thinking</a>
        </h2>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/series/">Series</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives/">Archives</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/about/">About</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://github.com/hscspring">Projects</a></li>
                
                </ul>
            </div>
    </nav>
</header>
      <div id="main" class="wrapper">
        <div id="primary" class="site-content"><div id="content" role="main"><article id="post-DSA/2019-11-03-Multiway-Tree-Sort" class="post-DSA/2019-11-03-Multiway-Tree-Sort post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title article-title">
      Sort Based on Multiway Tree
    </h1>
  

        
        <!-- <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="https://www.yam.gift/2019/11/03/DSA/2019-11-03-Multiway-Tree-Sort/" data-id="cke6ymt6a002u9sbzhj40mcp8" class="leave-reply bdsharebuttonbox" data-cmd="more">undefined</a>
        </div> --><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
            <!-- Table of Contents -->
              
        <p>Several weeks ago, we met a sort problem in our program of web app. We tried kinds of methods and finally have gotten a nearly 10 times performance improvement. The problem is very interesting and worth recording.</p>
<a id="more"></a>
<h2 id="The-Problem"><a href="#The-Problem" class="headerlink" title="The Problem"></a>The Problem</h2><p>Given a list of items, each item with a directory and a create_time, we need to sort those items by two rules:</p>
<ul>
<li>first rule: a given index_dict, only contains part of the items.</li>
<li>second rule: when the first rule is not exist, use create_time.</li>
</ul>
<p>Here is an example.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The given items</span></span><br><span class="line">items = [</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder1"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-03-01"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder1/folder1-folder1"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-03-02"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder1/folder1-folder1/file1"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-03-10"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder1/folder1-folder1/file2"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-03-02"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder1/folder1-folder1/file3"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-03-04"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder1/folder1-folder1/file4"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-03-03"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder2"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-01-01"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder2/folder2-folder1"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-01-20"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder2/folder2-folder1/file1"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-01-22"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder2/folder2-folder1/file2"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-01-21"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder2/folder2-folder2"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-01-10"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder2/folder2-folder2/file1"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-01-11"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder2/folder2-folder2/file2"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-01-12"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder3"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-02-01"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder3/folder3-folder1"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-02-10"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder3/folder3-folder1/file1"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-02-12"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder3/folder3-folder1/file2"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-02-11"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder3/folder3-folder2"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-02-01"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder3/folder3-folder2/file1"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-02-03"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder3/folder3-folder2/file2"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-02-04"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder3/folder3-folder3"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-02-03"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder3/folder3-folder3/file1"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-02-05"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder3/folder3-folder3/file2"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-02-04"</span> &#125;,</span><br><span class="line">  %&#123; <span class="string">"location"</span> =&gt; <span class="string">"/folder3/folder3-folder4"</span>, <span class="string">"create_time"</span> =&gt; <span class="string">"2019-02-02"</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># The given index dict</span></span><br><span class="line">%&#123;</span><br><span class="line">  <span class="string">"/folder1/folder1-folder1"</span> =&gt; [</span><br><span class="line">      <span class="string">"/folder1/folder1-folder1/file1"</span>,</span><br><span class="line">      <span class="string">"/folder1/folder1-folder1/file2"</span></span><br><span class="line">   ],</span><br><span class="line">  <span class="string">"/folder2/folder2-folder1"</span> =&gt; [</span><br><span class="line">      <span class="string">"/folder2/folder2-folder1/file1"</span>,</span><br><span class="line">      <span class="string">"/folder2/folder2-folder1/file2"</span>,</span><br><span class="line">   ],</span><br><span class="line">  <span class="string">"/folder2/folder2-folder2"</span> =&gt; [</span><br><span class="line">      <span class="string">"/folder2/folder2-folder2/file1"</span>,</span><br><span class="line">      <span class="string">"/folder2/folder2-folder2/file2"</span></span><br><span class="line">   ],</span><br><span class="line">  <span class="string">"/folder3"</span> =&gt; [</span><br><span class="line">      <span class="string">"/folder3/folder3-folder1"</span>,</span><br><span class="line">      <span class="string">"/folder3/folder3-folder2"</span></span><br><span class="line">   ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>PAY attention, the given index dict might have different levels, and the map keys are out of order, the index order we need is actually the values.</p>
<p>What we want is like:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'/'</span>,</span><br><span class="line"> <span class="string">'/folder2'</span>,</span><br><span class="line"> <span class="string">'/folder2/folder2-folder2'</span>,</span><br><span class="line"> <span class="string">'/folder2/folder2-folder2/file1'</span>,</span><br><span class="line"> <span class="string">'/folder2/folder2-folder2/file2'</span>,</span><br><span class="line"> <span class="string">'/folder2/folder2-folder1'</span>,</span><br><span class="line"> <span class="string">'/folder2/folder2-folder1/file1'</span>,</span><br><span class="line"> <span class="string">'/folder2/folder2-folder1/file2'</span>,</span><br><span class="line"> <span class="string">'/folder3'</span>,</span><br><span class="line"> <span class="string">'/folder3/folder3-folder1'</span>,</span><br><span class="line"> <span class="string">'/folder3/folder3-folder1/file2'</span>,</span><br><span class="line"> <span class="string">'/folder3/folder3-folder1/file1'</span>,</span><br><span class="line"> <span class="string">'/folder3/folder3-folder2'</span>,</span><br><span class="line"> <span class="string">'/folder3/folder3-folder2/file1'</span>,</span><br><span class="line"> <span class="string">'/folder3/folder3-folder2/file2'</span>,</span><br><span class="line"> <span class="string">'/folder3/folder3-folder4'</span>,</span><br><span class="line"> <span class="string">'/folder3/folder3-folder3'</span>,</span><br><span class="line"> <span class="string">'/folder3/folder3-folder3/file2'</span>,</span><br><span class="line"> <span class="string">'/folder3/folder3-folder3/file1'</span>,</span><br><span class="line"> <span class="string">'/folder1'</span>,</span><br><span class="line"> <span class="string">'/folder1/folder1-folder1'</span>,</span><br><span class="line"> <span class="string">'/folder1/folder1-folder1/file1'</span>,</span><br><span class="line"> <span class="string">'/folder1/folder1-folder1/file2'</span>,</span><br><span class="line"> <span class="string">'/folder1/folder1-folder1/file4'</span>,</span><br><span class="line"> <span class="string">'/folder1/folder1-folder1/file3'</span>]</span><br></pre></td></tr></table></figure>
<p>Let me explain:</p>
<ul>
<li>“/folder1”, “/folder2” and “/folder3” are not in the index_dict, so they are sorted by create_time: “/folder2” &gt; “/folder3” &gt; “/folder1”</li>
<li><p>then, Let’s loot at the subfolders of folder2. “/folder2/folder2-folder1” and “/folder2/folder2-folder2” are also not in the index_dict (values), so they are sorted by create_time: “/folder2/folder2-folder2” &gt; “/folder2/folder2-folder1”</p>
</li>
<li><p>then, their subdirectories (here are files), although “/folder2/folder2-folder1/file2” &gt; “/folder2/folder2-folder1/file1” by create_time, in the index_dict, “file1” &gt; “file2”, so the result is ‘/folder2/folder2-folder1/file1’ &gt; ‘/folder2/folder2-folder1/file2’.</p>
</li>
<li><p>Another example, let’s look at folder3, they have sub folders in the index_dict, so sub folders need to be sorted like that: ‘/folder3/folder3-folder1’ &gt; ‘/folder3/folder3-folder2’, then ‘/folder3/folder3-folder4’ &gt; ‘/folder3/folder3-folder3’, by their create_time.</p>
</li>
</ul>
<p>We need to remind you several points again:</p>
<ul>
<li>the directory locations might be multi-levels</li>
<li>the index keys might be any parent directory location, and they are out of order (dict)</li>
<li>the each index values are not one-to-one with the items (may be more or less)</li>
<li>sub folder or sub files must be created after their parent</li>
</ul>
<h2 id="First-Naive-Solution"><a href="#First-Naive-Solution" class="headerlink" title="First Naive Solution"></a>First Naive Solution</h2><p>It was my first time to use Elixir, so I quickly got an easy solution: sort by levels. Here is a small example:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">items = [<span class="string">"/c/3"</span>, <span class="string">"/a/3"</span>, <span class="string">"/b/2"</span>, <span class="string">"/a/1"</span>, <span class="string">"c/1"</span>, <span class="string">"/a/2"</span>, <span class="string">"/b/1"</span>]</span><br><span class="line">standard = [<span class="string">"/b"</span>, <span class="string">"/a"</span>, <span class="string">"/c"</span>]</span><br><span class="line">Enum.sort_by(items, &amp;Enum.find_index(standard, <span class="keyword">fn</span> x-&gt; x == get_parent_loc(&amp;<span class="number">1</span>) <span class="keyword">end</span>))</span><br></pre></td></tr></table></figure>
<p>First of all, we sort all the items by their create_time. Then, at each level, we first check if there is an index in the index dict. If is, that’s just the standard for the sub directories. If is not, we  do nothing.</p>
<p>So the solution may like the following (we only list the key code).</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">defmodule</span> <span class="title">Sorter</span></span> <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">build_item_level</span></span>(item_list) <span class="keyword">do</span></span><br><span class="line">    item_list </span><br><span class="line">    |&gt; Enum.sort_by(&amp;Map.get(&amp;<span class="number">1</span>, <span class="string">"create_time"</span>))</span><br><span class="line">    |&gt; Enum.map(<span class="keyword">fn</span> x -&gt; Map.get(x, <span class="string">"location"</span>) <span class="keyword">end</span>)</span><br><span class="line">    |&gt; build_location_level()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">build_index_level</span></span>(index_dict) <span class="keyword">do</span></span><br><span class="line">    index_dict</span><br><span class="line">    |&gt; Enum.reduce([], <span class="keyword">fn</span> &#123;<span class="number">_</span>, children&#125;, index_list -&gt;</span><br><span class="line">      [children | index_list]</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">    |&gt; Enum.reverse()</span><br><span class="line">    |&gt; List.flatten()</span><br><span class="line">    |&gt; build_location_level()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">combine_item_index_level</span></span>(item_level, index_level) <span class="keyword">do</span></span><br><span class="line">    Enum.reduce(item_level, %&#123;&#125;, <span class="keyword">fn</span> &#123;level, items&#125;, combined_level -&gt;</span><br><span class="line">    index = Map.get(index_level, level, [])</span><br><span class="line">    not_in_index = Enum.filter(items, <span class="keyword">fn</span> x -&gt;</span><br><span class="line">      Enum.member?(index, x) == <span class="keyword">false</span></span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">    combined = index ++ not_in_index</span><br><span class="line">    Map.put(combined_level, level, combined)</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sort_level_items</span></span>(combined_level) <span class="keyword">do</span></span><br><span class="line">    combined_level</span><br><span class="line">    |&gt; Enum.reduce(%&#123;&#125;, <span class="keyword">fn</span> &#123;level, items&#125;, sorted_items -&gt;</span><br><span class="line">    standard = Map.get(sorted_items, level-<span class="number">1</span>, [])</span><br><span class="line">    sorted = Enum.sort_by(items, &amp;Enum.find_index(standard, <span class="keyword">fn</span> x -&gt;</span><br><span class="line">      x == get_parent_location(&amp;<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">end</span>))</span><br><span class="line">    Map.put(sorted_items, level , sorted)</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">combine_sorted_items</span></span>(sorted_items) <span class="keyword">do</span></span><br><span class="line">    locs_dict = %&#123;<span class="string">"/"</span> =&gt; <span class="string">"00000"</span>&#125;</span><br><span class="line">    sorted_items</span><br><span class="line">    |&gt; Enum.reduce([], <span class="keyword">fn</span> &#123;<span class="number">_</span>, items&#125;, level_list -&gt;</span><br><span class="line">      [items | level_list]</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">    |&gt; Enum.reverse()</span><br><span class="line">    |&gt; add_tag_to_location(locs_dict)</span><br><span class="line">    |&gt; Enum.sort_by(<span class="keyword">fn</span> &#123;<span class="number">_</span>, tag&#125; -&gt; tag <span class="keyword">end</span>)</span><br><span class="line">    |&gt; Enum.map(<span class="keyword">fn</span> &#123;loc, <span class="number">_</span>&#125; -&gt; loc <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sort</span></span>(item_list, index_dict) <span class="keyword">do</span></span><br><span class="line">    index_level = build_index_level(index_dict)</span><br><span class="line">    item_list</span><br><span class="line">    |&gt; build_item_level()</span><br><span class="line">    |&gt; combine_item_index_level(index_level)</span><br><span class="line">    |&gt; sort_level_items()</span><br><span class="line">    |&gt; combine_sorted_items() </span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>That seems a little complex, but easy to understand:</p>
<ul>
<li>First, we build levels from both items and indexes, the result is a map (dict) with location (directory) level as key and location as value.</li>
<li>Then, we combine each level locations, make sure that index level locations are ahead of item level locations.</li>
<li>After that, we just sort the combined level locations by their parent location from the top level to the last level, just like what we’ve mentioned in the above simple example.</li>
<li>At last, we need to adjust the locations, make sure the children locations are following their parent location instead of grouped by levels.</li>
</ul>
<p>For the whole code, please go <a href="https://github.com/hscspring/The-DataStructure-and-Algorithms/blob/master/Tree/MultiwayTree/sort_by_level.ex" target="_blank" rel="noopener">here</a>.</p>
<h2 id="A-Normal-One"><a href="#A-Normal-One" class="headerlink" title="A Normal One"></a>A Normal One</h2><p>The problem is obviously a tree problem, so we tried a tree solution with the help of <a href="https://elixirforum.com/" target="_blank" rel="noopener">Elixir Forum</a>. Thanks to those enthusiastic guys, we found a way to build the tree, and we sorted the items in Depth-First traversal. The solution main code is here.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">defmodule</span> <span class="title">Sorter</span></span> <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">build_tree</span></span>(paths) <span class="keyword">do</span></span><br><span class="line">    paths</span><br><span class="line">    |&gt; Enum.map(&amp;path_to_tree/<span class="number">1</span>)</span><br><span class="line">    |&gt; Enum.reduce(%&#123;&#125;, &amp;deep_merge/<span class="number">2</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">path_to_tree</span></span>(path) <span class="keyword">do</span></span><br><span class="line">    pdict = path</span><br><span class="line">    |&gt; String.split(<span class="string">"/"</span>)</span><br><span class="line">    |&gt; Enum.drop(<span class="number">1</span>)</span><br><span class="line">    |&gt; Enum.reduce([], <span class="keyword">fn</span> x, paths -&gt;</span><br><span class="line">      parent = Enum.at(paths, <span class="number">0</span>) || <span class="string">" "</span> <span class="comment"># actually is ""</span></span><br><span class="line">      [parent &lt;&gt; <span class="string">"/"</span> &lt;&gt; x  | paths]</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">    |&gt; Enum.reduce(%&#123;&#125;, <span class="keyword">fn</span> segment, inner_tree -&gt;</span><br><span class="line">      %&#123;segment =&gt; inner_tree&#125;</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">    %&#123;<span class="string">"/"</span> =&gt; pdict&#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">deep_merge</span></span>(map1, map2) <span class="keyword">do</span></span><br><span class="line">    Map.merge(map1, map2, <span class="keyword">fn</span> <span class="number">_</span>, val1 = %&#123;&#125;, val2 = %&#123;&#125; -&gt;</span><br><span class="line">      deep_merge(val1, val2)</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">dft_with_sort</span></span>([], res, _time_sorted_locs, _indexes), <span class="symbol">do:</span> res</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">dft_with_sort</span></span>(stack, res, time_sorted_locs, indexes) <span class="keyword">do</span></span><br><span class="line">    &#123;curr, remain&#125; = List.pop_at(stack, -<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    &#123;key, values&#125; = List.first(Map.to_list(curr))</span><br><span class="line"></span><br><span class="line">    sorter = </span><br><span class="line">    [Map.get(indexes, key, []) | time_sorted_locs] </span><br><span class="line">    |&gt; List.flatten()</span><br><span class="line"></span><br><span class="line">    new = values</span><br><span class="line">    |&gt; Map.to_list()</span><br><span class="line">    |&gt; Enum.sort_by(&amp;&#123;Enum.find_index(sorter, <span class="keyword">fn</span> x -&gt; </span><br><span class="line">      x ==  List.first(Tuple.to_list(&amp;<span class="number">1</span>)) </span><br><span class="line">    <span class="keyword">end</span>)&#125;)</span><br><span class="line">    |&gt; Enum.map(<span class="keyword">fn</span> &#123;key, value&#125; -&gt; %&#123;key =&gt; value&#125; <span class="keyword">end</span>)</span><br><span class="line">    |&gt; Enum.reverse()</span><br><span class="line"></span><br><span class="line">    res = [key | res]</span><br><span class="line"></span><br><span class="line">    [remain | new] </span><br><span class="line">    |&gt; List.flatten() </span><br><span class="line">    |&gt; dft_with_sort(res, time_sorted_locs, indexes)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sort</span></span>(item_list, index_dict) <span class="keyword">do</span></span><br><span class="line">    sorted_locs = item_list</span><br><span class="line">    |&gt; Enum.sort_by(&amp;Map.get(&amp;<span class="number">1</span>, <span class="string">"create_time"</span>))</span><br><span class="line">    |&gt; Enum.map(<span class="keyword">fn</span> x -&gt; Map.get(x, <span class="string">"location"</span>) <span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line">    tree = build_tree(sorted_locs)</span><br><span class="line">    dft_with_sort([tree], [], sorted_locs, index_dict) |&gt; Enum.reverse()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>This code is much harder than the former one. Here we will explain the key functions.</p>
<p><code>path_to_tree</code> is to make a string path to a tree, for example:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = <span class="string">"/a/b/c/d"</span></span><br><span class="line">path_to_tree(path) == %&#123;<span class="string">"/"</span> =&gt; %&#123;<span class="string">"/a"</span> =&gt; %&#123;<span class="string">"/a/b"</span> =&gt; %&#123;<span class="string">"/a/b/c"</span> =&gt; %&#123;<span class="string">"/a/b/c/d"</span> =&gt; %&#123;&#125;&#125;&#125;&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>
<p><code>deep_merge</code> is to merge two maps, for example:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">map1 = %&#123;<span class="string">"/"</span> =&gt; %&#123;<span class="string">"/a"</span> =&gt; %&#123;<span class="string">"/a/b"</span> =&gt; %&#123;<span class="string">"/a/b/c"</span> =&gt; %&#123;<span class="string">"/a/b/c/d"</span> =&gt; %&#123;&#125;&#125;&#125;&#125;&#125;&#125;</span><br><span class="line">map2 = %&#123;<span class="string">"/"</span> =&gt; %&#123;<span class="string">"/1"</span> =&gt; %&#123;<span class="string">"/1/2"</span> =&gt; %&#123;&#125;&#125;&#125;&#125;</span><br><span class="line">deep_merge(map1, map2) == %&#123;</span><br><span class="line">  <span class="string">"/"</span> =&gt; %&#123;</span><br><span class="line">    <span class="string">"/1"</span> =&gt; %&#123;<span class="string">"/1/2"</span> =&gt; %&#123;&#125;&#125;,</span><br><span class="line">    <span class="string">"/a"</span> =&gt; %&#123;<span class="string">"/a/b"</span> =&gt; %&#123;<span class="string">"/a/b/c"</span> =&gt; %&#123;<span class="string">"/a/b/c/d"</span> =&gt; %&#123;&#125;&#125;&#125;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then is the most import function <code>dft_with_sort</code>, we need to sort our items when traversing depth-first.</p>
<p>We need a stack to store tree nodes, at the very first, there is only one node: the root node. With the popped node, we get a current subtree and a list of remained subtrees. The key of the current subtree is then added to the result list. This is our first item. Then the values need to be sorted by our given index. So we build a sorter, which is just the standard with index items ahead of create_time sorted items.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">values</span><br><span class="line">|&gt; Map.to_list()</span><br><span class="line">|&gt; Enum.sort_by(&amp;&#123;Enum.find_index(sorter, <span class="keyword">fn</span> x -&gt; </span><br><span class="line">  x ==  List.first(Tuple.to_list(&amp;<span class="number">1</span>)) </span><br><span class="line">  <span class="keyword">end</span>)&#125;)</span><br><span class="line">|&gt; Enum.map(<span class="keyword">fn</span> &#123;key, value&#125; -&gt; %&#123;key =&gt; value&#125; <span class="keyword">end</span>)</span><br><span class="line">|&gt; Enum.reverse()</span><br></pre></td></tr></table></figure>
<p><code>Map.to_list()</code> changes the key=&gt;value to a tuple (key, value), for example: </p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">map = %&#123;</span><br><span class="line">  <span class="string">"/folder2/folder2-folder1"</span> =&gt; %&#123;</span><br><span class="line">    <span class="string">"/folder2/folder2-folder1/file1"</span> =&gt; %&#123;&#125;,</span><br><span class="line">    <span class="string">"/folder2/folder2-folder1/file2"</span> =&gt; %&#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"/folder2/folder2-folder2"</span> =&gt; %&#123;</span><br><span class="line">    <span class="string">"/folder2/folder2-folder2/file1"</span> =&gt; %&#123;&#125;,</span><br><span class="line">    <span class="string">"/folder2/folder2-folder2/file2"</span> =&gt; %&#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Map.to_list(map) = [</span><br><span class="line">  &#123;<span class="string">"/folder2/folder2-folder1"</span>,</span><br><span class="line">   %&#123;</span><br><span class="line">     <span class="string">"/folder2/folder2-folder1/file1"</span> =&gt; %&#123;&#125;,</span><br><span class="line">     <span class="string">"/folder2/folder2-folder1/file2"</span> =&gt; %&#123;&#125;</span><br><span class="line">   &#125;&#125;,</span><br><span class="line">  &#123;<span class="string">"/folder2/folder2-folder2"</span>,</span><br><span class="line">   %&#123;</span><br><span class="line">     <span class="string">"/folder2/folder2-folder2/file1"</span> =&gt; %&#123;&#125;,</span><br><span class="line">     <span class="string">"/folder2/folder2-folder2/file2"</span> =&gt; %&#123;&#125;</span><br><span class="line">   &#125;&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><code>List.first(Tuple.to_list(&amp;1))</code> gets the key (location) and values then sort by sorter (standard). Finally we change the tuple back to dict and reverse the order. </p>
<p>Why we need to reverse the order here? Because we will pop from the last one next time. <code>[remain | new]</code> is the new stack, we are traversing depth-first.</p>
<p>Another key point is <code>dft_with_sort([], res, _time_sorted_locs, _indexes)</code>, this is used to return our final result when stack is empty.</p>
<p>For the whole code, please go <a href="https://github.com/hscspring/The-DataStructure-and-Algorithms/blob/master/Tree/MultiwayTree/sort_by_tree.ex" target="_blank" rel="noopener">here</a>.</p>
<h2 id="The-Ultimate-Weapon"><a href="#The-Ultimate-Weapon" class="headerlink" title="The Ultimate Weapon"></a>The Ultimate Weapon</h2><p>When we used the former solutions to our production, we were not satisfied with the performance. Because this module is used very frequently, so we need a much quicker one. With some more research, we found it — add a parent for each location, and let the tree contain the needed order. Here is our reference: <a href="https://stackoverflow.com/questions/42577866/create-a-hierarchical-data-structure-from-a-flat-list-with-parent-id" target="_blank" rel="noopener">elixir - Create a hierarchical data structure from a flat list with parent_id - Stack Overflow</a>.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">defmodule</span> <span class="title">Sorter</span></span> <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">build_tree</span></span>(list, index_dict) <span class="keyword">do</span></span><br><span class="line">    tree = list</span><br><span class="line">    |&gt; Enum.reduce(%&#123;&#125;, <span class="keyword">fn</span> foo, map -&gt;</span><br><span class="line">      foo = %&#123;foo | <span class="symbol">children:</span> Map.get(map, foo.location, [])&#125;</span><br><span class="line"></span><br><span class="line">      Map.update(map, foo.parent, [foo], <span class="keyword">fn</span> foos -&gt;</span><br><span class="line">        children = [foo | foos]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> Map.get(index_dict, foo.parent) <span class="keyword">do</span></span><br><span class="line">          <span class="keyword">nil</span> -&gt;</span><br><span class="line">            children</span><br><span class="line"></span><br><span class="line">          index_list -&gt;</span><br><span class="line">            children</span><br><span class="line">            |&gt; Enum.sort_by(&amp;(Enum.find_index(index_list, <span class="keyword">fn</span> item -&gt;</span><br><span class="line">              item == &amp;<span class="number">1</span>.location</span><br><span class="line">            <span class="keyword">end</span>)))</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span>)</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">    |&gt; Map.get(<span class="keyword">nil</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">dft</span></span>([], res), <span class="symbol">do:</span> res</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">dft</span></span>(stack, res) <span class="keyword">do</span></span><br><span class="line">    &#123;curr, remain&#125; = List.pop_at(stack, -<span class="number">1</span>)</span><br><span class="line">    res = [curr.location | res]</span><br><span class="line">    [remain | Enum.reverse(curr.children)] </span><br><span class="line">    |&gt; List.flatten()</span><br><span class="line">    |&gt; dft(res)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sort</span></span>(item_list, index_dict) <span class="keyword">do</span></span><br><span class="line">    item_list</span><br><span class="line">    |&gt; Enum.sort_by(&amp; &amp;<span class="number">1</span>.create_time)</span><br><span class="line">    |&gt; add_parent()</span><br><span class="line">    |&gt; build_tree(index_dict)</span><br><span class="line">    |&gt; dft([])</span><br><span class="line">    |&gt; Enum.reverse()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">add_parent</span></span>(item_list) <span class="keyword">do</span></span><br><span class="line">    init = %&#123;<span class="symbol">location:</span> <span class="string">"/"</span>, <span class="symbol">parent:</span> <span class="keyword">nil</span>, <span class="symbol">children:</span> []&#125;</span><br><span class="line">    item_list</span><br><span class="line">    |&gt; Enum.reduce([init], <span class="keyword">fn</span> item, new_list -&gt;</span><br><span class="line">      parent = get_parent(item.location)</span><br><span class="line">      new_item = %&#123;<span class="symbol">location:</span> item.location, <span class="symbol">parent:</span> parent, <span class="symbol">children:</span> []&#125;</span><br><span class="line">      [new_item | new_list]</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>Pay attention, here we change our item structure to the following to get more convenient processing. </p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%&#123; <span class="symbol">location:</span> <span class="string">"/folder1"</span>, <span class="symbol">create_time:</span> <span class="string">"2019-03-01"</span> &#125;</span><br></pre></td></tr></table></figure>
<p>Look at this smart thought, we have used less code, but more clearer and faster. The <code>dft</code> function is just like what we’ve seen before, but we do not need to sort. The core function here is the <code>build_tree</code> function. It does two main things: build a tree and sort when building. We must be very familiar with the sort part, it’s almost the same as above, but much easier and clearer. Now let’s focus on the build tree part. </p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">defmodule</span> <span class="title">Tree</span></span> <span class="keyword">do</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">build_tree</span></span>(list) <span class="keyword">do</span></span><br><span class="line">    list</span><br><span class="line">    |&gt; Enum.reduce(%&#123;&#125;, <span class="keyword">fn</span> foo, map -&gt;</span><br><span class="line">      foo = %&#123;foo | <span class="symbol">children:</span> Map.get(map, foo.location, [])&#125;</span><br><span class="line">      Map.update(map, foo.parent, [foo], <span class="keyword">fn</span> foos -&gt;</span><br><span class="line">        [foo | foos]</span><br><span class="line">      <span class="keyword">end</span>)</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">    |&gt; Map.get(<span class="keyword">nil</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>What does this do? Let’s show you a simple example.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">list = [</span><br><span class="line">  %&#123; <span class="symbol">location:</span> <span class="string">"/"</span>, <span class="symbol">parent:</span> <span class="keyword">nil</span>, <span class="symbol">children:</span> [] &#125;,</span><br><span class="line">  %&#123; <span class="symbol">location:</span> <span class="string">"/folder1"</span>, <span class="symbol">parent:</span> <span class="string">"/"</span>, <span class="symbol">children:</span> [] &#125;,</span><br><span class="line">  %&#123; <span class="symbol">location:</span> <span class="string">"/folder1/folder1-folder1"</span>, <span class="symbol">parent:</span> <span class="string">"/folder1"</span>, <span class="symbol">children:</span> [] &#125;,</span><br><span class="line">  %&#123; <span class="symbol">location:</span> <span class="string">"/folder2"</span>, <span class="symbol">parent:</span> <span class="string">"/"</span>, <span class="symbol">children:</span> [] &#125;,</span><br><span class="line">  %&#123; <span class="symbol">location:</span> <span class="string">"/folder2/folder2-folder1"</span>, <span class="symbol">parent:</span> <span class="string">"/folder2"</span>, <span class="symbol">children:</span> [] &#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment"># tree</span></span><br><span class="line">Sorter.build_tree(list) |&gt; IO.inspect()</span><br><span class="line">[%&#123;<span class="symbol">children:</span> [], <span class="symbol">location:</span> <span class="string">"/"</span>, <span class="symbol">parent:</span> <span class="keyword">nil</span>&#125;]</span><br></pre></td></tr></table></figure>
<p>What happened here? Maybe we should remove the <code>Map.get(nil)</code> to see more.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">%&#123;</span><br><span class="line">  <span class="keyword">nil</span> =&gt; [%&#123;<span class="symbol">children:</span> [], <span class="symbol">location:</span> <span class="string">"/"</span>, <span class="symbol">parent:</span> <span class="keyword">nil</span>&#125;],</span><br><span class="line">  <span class="string">"/"</span> =&gt; [</span><br><span class="line">    %&#123;<span class="symbol">children:</span> [], <span class="symbol">location:</span> <span class="string">"/folder2"</span>, <span class="symbol">parent:</span> <span class="string">"/"</span>&#125;,</span><br><span class="line">    %&#123;<span class="symbol">children:</span> [], <span class="symbol">location:</span> <span class="string">"/folder1"</span>, <span class="symbol">parent:</span> <span class="string">"/"</span>&#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"/folder1"</span> =&gt; [</span><br><span class="line">    %&#123;<span class="symbol">children:</span> [], <span class="symbol">location:</span> <span class="string">"/folder1/folder1-folder1"</span>, <span class="symbol">parent:</span> <span class="string">"/folder1"</span>&#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"/folder2"</span> =&gt; [</span><br><span class="line">    %&#123;<span class="symbol">children:</span> [], <span class="symbol">location:</span> <span class="string">"/folder2/folder2-folder1"</span>, <span class="symbol">parent:</span> <span class="string">"/folder2"</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now it’s clear, let’s explain some code in the function.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo = %&#123;foo | <span class="symbol">children:</span> Map.get(map, foo.location, [])&#125;</span><br></pre></td></tr></table></figure>
<p>This is used to update a key (here is the children key) of a map (here is foo). For a simple example:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iex&gt; map = %&#123;<span class="symbol">one:</span> <span class="number">1</span>, <span class="symbol">two:</span> <span class="number">2</span>&#125;</span><br><span class="line">iex&gt; %&#123;map | <span class="symbol">one:</span> <span class="string">"one"</span>&#125;</span><br><span class="line">%&#123;<span class="symbol">one:</span> <span class="string">"one"</span>, <span class="symbol">two:</span> <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>
<p>Then the map update:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Map.update(map, key, initial, fun)</span></span><br><span class="line">Map.update(map, foo.parent, [foo], <span class="keyword">fn</span> foos -&gt; [foo | foos] <span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>
<p>The meaning is to update the value of the <code>foo.parent</code> key from <code>foos</code> to <code>[foo | foos]</code>. For a simple instance:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iex &gt;Map.update(%&#123;<span class="symbol">a:</span> <span class="number">1</span>&#125;, <span class="symbol">:a</span>, <span class="number">13</span>, <span class="keyword">fn</span> x -&gt; x * <span class="number">2</span> <span class="keyword">end</span>)</span><br><span class="line">%&#123;<span class="symbol">a:</span> <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>
<p>Now we know exactly what the function do. It first updates children, then update this update to its parent. So we should use bottom-up approach to get the full tree. We just need to reverse the given list.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Sorter.build_tree(list |&gt; Enum.reverse())</span><br><span class="line">tree = [</span><br><span class="line">    %&#123;</span><br><span class="line">      <span class="symbol">children:</span> [</span><br><span class="line">        %&#123;</span><br><span class="line">          <span class="symbol">children:</span> [</span><br><span class="line">            %&#123;</span><br><span class="line">              <span class="symbol">children:</span> [],</span><br><span class="line">              <span class="symbol">location:</span> <span class="string">"/folder1/folder1-folder1"</span>,</span><br><span class="line">              <span class="symbol">parent:</span> <span class="string">"/folder1"</span></span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          <span class="symbol">location:</span> <span class="string">"/folder1"</span>,</span><br><span class="line">          <span class="symbol">parent:</span> <span class="string">"/"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        %&#123;</span><br><span class="line">          <span class="symbol">children:</span> [</span><br><span class="line">            %&#123;</span><br><span class="line">              <span class="symbol">children:</span> [],</span><br><span class="line">              <span class="symbol">location:</span> <span class="string">"/folder2/folder2-folder1"</span>,</span><br><span class="line">              <span class="symbol">parent:</span> <span class="string">"/folder2"</span></span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          <span class="symbol">location:</span> <span class="string">"/folder2"</span>,</span><br><span class="line">          <span class="symbol">parent:</span> <span class="string">"/"</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="symbol">location:</span> <span class="string">"/"</span>,</span><br><span class="line">      <span class="symbol">parent:</span> <span class="keyword">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>
<p>You could play with the code <a href="https://github.com/hscspring/The-DataStructure-and-Algorithms/blob/master/Tree/MultiwayTree/build.ex" target="_blank" rel="noopener">here</a>. Believe me, it’s very interesting.</p>
<p>Actually, this method can be used in many fields, especially in the tree data structure. Additionally, use id instead of the real value will always process much faster.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>In this article, we have introduced a typical case of multiway tree. We have shown how to build it based on item values and their parents. We have also shown how to sort the tree by some external conditions. In fact, we believe this case could be used in many fields in your routine work.</p>
<p>By the way, what we have mentioned above is just a simplified sample. Actually we did many optimization in the real world. For example, we sorted the items when querying from database; we cached the result in Redis, and so on.</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/11/03/DSA/2019-11-03-Multiway-Tree-Sort/">
    <time datetime="2019-11-03T15:00:00.000Z" class="entry-date">
        2019-11-03
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Elixir/">Elixir</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Multiway-Tree/">Multiway Tree</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sort/">Sort</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tree/">Tree</a></li></ul>

    </footer>
</article>


    
<nav class="nav-single">
    <h3 class="assistive-text">文章导航</h3>
    
        <span class="nav-previous"><a href="/2019/12/02/KG/2019-12-02-NLM/" rel="prev"><span class="meta-nav">←</span> 自然语言记忆模块（NLM）</a></span>
    
    
        <span class="nav-next"><a href="/2019/10/10/Py4F/2019-10-10-Python-for-Freshman-Ch03/" rel="next">Python 小白快速从入门到放弃：使用框架 <span class="meta-nav">→</span></a></span>
    
</nav><!-- .nav-single -->







<div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a><a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a><a href="#" class="bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_evernotecn" data-cmd="evernotecn" title="分享到印象笔记"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{},"image":{"viewList":["fbook","twi","linkedin","qzone","tsina","douban","weixin","evernotecn"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?'];</script>

<section id="comment">
  <!-- 评论代码 -->
  <div id="gitalk-container"></div>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
  <script>
  const gitalk = new Gitalk({
    clientID: '0eb512031083d6e7edfb',
    clientSecret: 'e830808995dd813ca26fed50573760963457da37',
    repo: 'hscspring.github.io',
    owner: 'hscspring',
    admin: ['hscspring'],
    id: md5(location.pathname),
    distractionFreeMode: false
  })
  gitalk.render('gitalk-container')
  </script>
  <!-- 评论代码已完成 -->
</section>

</div></div>
        <div id="secondary" class="widget-area" role="complementary">
  
    
  <aside class="widget">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-content">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Coding/">Coding</a><span class="category-list-count">43</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Feeling/">Feeling</a><span class="category-list-count">58</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Thinking/">Thinking</a><span class="category-list-count">13</span></li></ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Music</h3>
    <div class="widget-content">
      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=541131&auto=0&height=66"></iframe>
      <!-- 评论代码 -->
      <!-- <audio src="http://qnimg.lovevivian.cn/miss.mp3" controls="controls"
             style="width:100%">
        您的浏览器不支持 audio 标签。
      </audio> -->
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-content tagcloud">
      <a href="/tags/AE/" style="font-size: 10px;">AE</a> <a href="/tags/AI/" style="font-size: 19px;">AI</a> <a href="/tags/ALBERT/" style="font-size: 10px;">ALBERT</a> <a href="/tags/AR/" style="font-size: 10px;">AR</a> <a href="/tags/AUC/" style="font-size: 10px;">AUC</a> <a href="/tags/Accuracy/" style="font-size: 10px;">Accuracy</a> <a href="/tags/Activation/" style="font-size: 10px;">Activation</a> <a href="/tags/Algorithm/" style="font-size: 14px;">Algorithm</a> <a href="/tags/Array/" style="font-size: 10px;">Array</a> <a href="/tags/Attention/" style="font-size: 13px;">Attention</a> <a href="/tags/Automatic-Speech-Processing/" style="font-size: 10px;">Automatic Speech Processing</a> <a href="/tags/Backtracking/" style="font-size: 10px;">Backtracking</a> <a href="/tags/Backward/" style="font-size: 10px;">Backward</a> <a href="/tags/Bahdanau-Attention/" style="font-size: 10px;">Bahdanau Attention</a> <a href="/tags/Bart/" style="font-size: 10px;">Bart</a> <a href="/tags/Bayes/" style="font-size: 10px;">Bayes</a> <a href="/tags/Bert/" style="font-size: 14px;">Bert</a> <a href="/tags/Bi-LSTM/" style="font-size: 10px;">Bi-LSTM</a> <a href="/tags/Binary-Search/" style="font-size: 12px;">Binary Search</a> <a href="/tags/Business/" style="font-size: 12px;">Business</a> <a href="/tags/C/" style="font-size: 11px;">C</a> <a href="/tags/CNN/" style="font-size: 10px;">CNN</a> <a href="/tags/CRF/" style="font-size: 10px;">CRF</a> <a href="/tags/Calculus/" style="font-size: 10px;">Calculus</a> <a href="/tags/Catalan/" style="font-size: 10px;">Catalan</a> <a href="/tags/ChatBot/" style="font-size: 10px;">ChatBot</a> <a href="/tags/Chi2/" style="font-size: 10px;">Chi2</a> <a href="/tags/Cognition/" style="font-size: 11px;">Cognition</a> <a href="/tags/Computational-Linguistics/" style="font-size: 10px;">Computational Linguistics</a> <a href="/tags/Computer/" style="font-size: 10px;">Computer</a> <a href="/tags/Computer-Science/" style="font-size: 13px;">Computer Science</a> <a href="/tags/Confusing-Labels/" style="font-size: 10px;">Confusing Labels</a> <a href="/tags/Coordinate-Ascent/" style="font-size: 10px;">Coordinate Ascent</a> <a href="/tags/Ctrl/" style="font-size: 10px;">Ctrl</a> <a href="/tags/DB/" style="font-size: 11px;">DB</a> <a href="/tags/DP/" style="font-size: 10px;">DP</a> <a href="/tags/Data-Clearing/" style="font-size: 10px;">Data Clearing</a> <a href="/tags/Data-Preprocess/" style="font-size: 10px;">Data Preprocess</a> <a href="/tags/Data-Science/" style="font-size: 15px;">Data Science</a> <a href="/tags/Data-Structure/" style="font-size: 16px;">Data Structure</a> <a href="/tags/Database/" style="font-size: 10px;">Database</a> <a href="/tags/DeBERTa/" style="font-size: 10px;">DeBERTa</a> <a href="/tags/Decoder/" style="font-size: 10px;">Decoder</a> <a href="/tags/DeepGraph/" style="font-size: 10px;">DeepGraph</a> <a href="/tags/DeepLearning/" style="font-size: 13px;">DeepLearning</a> <a href="/tags/Dependence/" style="font-size: 10px;">Dependence</a> <a href="/tags/Diary/" style="font-size: 11px;">Diary</a> <a href="/tags/Disentangled-Attention/" style="font-size: 10px;">Disentangled Attention</a> <a href="/tags/DistilBERT/" style="font-size: 10px;">DistilBERT</a> <a href="/tags/Django/" style="font-size: 10px;">Django</a> <a href="/tags/Dynamic-Mask/" style="font-size: 10px;">Dynamic-Mask</a> <a href="/tags/EDA/" style="font-size: 10px;">EDA</a> <a href="/tags/EMD/" style="font-size: 10px;">EMD</a> <a href="/tags/ERNIE/" style="font-size: 10px;">ERNIE</a> <a href="/tags/Economics/" style="font-size: 10px;">Economics</a> <a href="/tags/Elasticsearch/" style="font-size: 10px;">Elasticsearch</a> <a href="/tags/Electra/" style="font-size: 10px;">Electra</a> <a href="/tags/Elixir/" style="font-size: 11px;">Elixir</a> <a href="/tags/Embedding/" style="font-size: 10px;">Embedding</a> <a href="/tags/Encoder/" style="font-size: 10px;">Encoder</a> <a href="/tags/Entropy/" style="font-size: 11px;">Entropy</a> <a href="/tags/Evaluation/" style="font-size: 10px;">Evaluation</a> <a href="/tags/FDW/" style="font-size: 10px;">FDW</a> <a href="/tags/FSM/" style="font-size: 10px;">FSM</a> <a href="/tags/Feature-Engineering/" style="font-size: 10px;">Feature Engineering</a> <a href="/tags/Feature-based/" style="font-size: 10px;">Feature-based</a> <a href="/tags/Few-Shot/" style="font-size: 10px;">Few-Shot</a> <a href="/tags/Fine-tuning/" style="font-size: 10px;">Fine-tuning</a> <a href="/tags/Forward/" style="font-size: 10px;">Forward</a> <a href="/tags/Full-Text-Search/" style="font-size: 10px;">Full-Text-Search</a> <a href="/tags/Function-Syntax/" style="font-size: 10px;">Function Syntax</a> <a href="/tags/GELU/" style="font-size: 10px;">GELU</a> <a href="/tags/GPT-2/" style="font-size: 10px;">GPT-2</a> <a href="/tags/GPU/" style="font-size: 10px;">GPU</a> <a href="/tags/GSG/" style="font-size: 10px;">GSG</a> <a href="/tags/Gan/" style="font-size: 10px;">Gan</a> <a href="/tags/Graph/" style="font-size: 11px;">Graph</a> <a href="/tags/GraphQL/" style="font-size: 11px;">GraphQL</a> <a href="/tags/Grid-Grammar/" style="font-size: 10px;">Grid Grammar</a> <a href="/tags/HMM/" style="font-size: 10px;">HMM</a> <a href="/tags/Hard-SVM/" style="font-size: 10px;">Hard-SVM</a> <a href="/tags/Hinge-Loss/" style="font-size: 10px;">Hinge Loss</a> <a href="/tags/IQR/" style="font-size: 10px;">IQR</a> <a href="/tags/Imbalance-Data/" style="font-size: 10px;">Imbalance Data</a> <a href="/tags/Industry/" style="font-size: 10px;">Industry</a> <a href="/tags/Information-Theory/" style="font-size: 10px;">Information Theory</a> <a href="/tags/Isolation-Forest/" style="font-size: 10px;">Isolation Forest</a> <a href="/tags/Job/" style="font-size: 10px;">Job</a> <a href="/tags/KKT/" style="font-size: 10px;">KKT</a> <a href="/tags/KS/" style="font-size: 10px;">KS</a> <a href="/tags/Kernel/" style="font-size: 10px;">Kernel</a> <a href="/tags/Kernel-Function/" style="font-size: 10px;">Kernel Function</a> <a href="/tags/Kernel-Method/" style="font-size: 10px;">Kernel Method</a> <a href="/tags/Keyword/" style="font-size: 10px;">Keyword</a> <a href="/tags/Knowledge-Graph/" style="font-size: 11px;">Knowledge Graph</a> <a href="/tags/LOF/" style="font-size: 10px;">LOF</a> <a href="/tags/Language-Model/" style="font-size: 10px;">Language Model</a> <a href="/tags/Lexicalism/" style="font-size: 10px;">Lexicalism</a> <a href="/tags/Linear-Algebra/" style="font-size: 10px;">Linear Algebra</a> <a href="/tags/Linear-Sturcture/" style="font-size: 10px;">Linear Sturcture</a> <a href="/tags/Linked-List/" style="font-size: 10px;">Linked List</a> <a href="/tags/LinkedList/" style="font-size: 11px;">LinkedList</a> <a href="/tags/Lucene/" style="font-size: 10px;">Lucene</a> <a href="/tags/Luong-Attention/" style="font-size: 10px;">Luong Attention</a> <a href="/tags/Machine/" style="font-size: 10px;">Machine</a> <a href="/tags/Machine-Learning/" style="font-size: 15px;">Machine Learning</a> <a href="/tags/Machine-Translation/" style="font-size: 10px;">Machine Translation</a> <a href="/tags/Manacher/" style="font-size: 10px;">Manacher</a> <a href="/tags/Managemnt/" style="font-size: 12px;">Managemnt</a> <a href="/tags/Markov/" style="font-size: 10px;">Markov</a> <a href="/tags/Materialized-Views/" style="font-size: 10px;">Materialized Views</a> <a href="/tags/Math/" style="font-size: 11px;">Math</a> <a href="/tags/Matplotlib/" style="font-size: 10px;">Matplotlib</a> <a href="/tags/Median/" style="font-size: 10px;">Median</a> <a href="/tags/Minimum-Edit-Distance/" style="font-size: 10px;">Minimum Edit Distance</a> <a href="/tags/Model-Evaluation/" style="font-size: 10px;">Model Evaluation</a> <a href="/tags/Module/" style="font-size: 10px;">Module</a> <a href="/tags/Multi-Head-Attention/" style="font-size: 10px;">Multi-Head Attention</a> <a href="/tags/Multiway-Tree/" style="font-size: 10px;">Multiway Tree</a> <a href="/tags/NER/" style="font-size: 10px;">NER</a> <a href="/tags/NLG/" style="font-size: 10px;">NLG</a> <a href="/tags/NLM/" style="font-size: 10px;">NLM</a> <a href="/tags/NLP/" style="font-size: 20px;">NLP</a> <a href="/tags/NLU/" style="font-size: 10px;">NLU</a> <a href="/tags/Neo4j/" style="font-size: 10px;">Neo4j</a> <a href="/tags/Ngram/" style="font-size: 10px;">Ngram</a> <a href="/tags/NumPy/" style="font-size: 10px;">NumPy</a> <a href="/tags/Occupation/" style="font-size: 10px;">Occupation</a> <a href="/tags/Orientation/" style="font-size: 10px;">Orientation</a> <a href="/tags/P-R/" style="font-size: 10px;">P-R</a> <a href="/tags/PEGASUS/" style="font-size: 10px;">PEGASUS</a> <a href="/tags/PageRank/" style="font-size: 10px;">PageRank</a> <a href="/tags/Palindromic/" style="font-size: 10px;">Palindromic</a> <a href="/tags/Pandas/" style="font-size: 10px;">Pandas</a> <a href="/tags/Philosophy/" style="font-size: 11px;">Philosophy</a> <a href="/tags/Phrase-Structure-Grammar/" style="font-size: 10px;">Phrase Structure Grammar</a> <a href="/tags/Position-Encoding/" style="font-size: 10px;">Position-Encoding</a> <a href="/tags/Postgres/" style="font-size: 11px;">Postgres</a> <a href="/tags/Pragmatic-Automatic-Processing/" style="font-size: 10px;">Pragmatic Automatic Processing</a> <a href="/tags/Pre-training/" style="font-size: 11px;">Pre-training</a> <a href="/tags/Precision/" style="font-size: 10px;">Precision</a> <a href="/tags/Pretraining/" style="font-size: 11px;">Pretraining</a> <a href="/tags/Probabilistic-Grammar/" style="font-size: 10px;">Probabilistic Grammar</a> <a href="/tags/Probabilistic-Model/" style="font-size: 10px;">Probabilistic Model</a> <a href="/tags/Psychology/" style="font-size: 11px;">Psychology</a> <a href="/tags/PyPI/" style="font-size: 10px;">PyPI</a> <a href="/tags/Python/" style="font-size: 18px;">Python</a> <a href="/tags/Quant/" style="font-size: 10px;">Quant</a> <a href="/tags/Query/" style="font-size: 10px;">Query</a> <a href="/tags/Queue/" style="font-size: 10px;">Queue</a> <a href="/tags/RELU/" style="font-size: 10px;">RELU</a> <a href="/tags/RFE/" style="font-size: 10px;">RFE</a> <a href="/tags/RMSE/" style="font-size: 10px;">RMSE</a> <a href="/tags/ROC/" style="font-size: 10px;">ROC</a> <a href="/tags/Recall/" style="font-size: 10px;">Recall</a> <a href="/tags/Recursion/" style="font-size: 11px;">Recursion</a> <a href="/tags/Reformer/" style="font-size: 10px;">Reformer</a> <a href="/tags/Regex/" style="font-size: 10px;">Regex</a> <a href="/tags/Regular-Expression/" style="font-size: 10px;">Regular Expression</a> <a href="/tags/Reinforcement-Learning/" style="font-size: 10px;">Reinforcement Learning</a> <a href="/tags/Relationship-Extraction/" style="font-size: 10px;">Relationship Extraction</a> <a href="/tags/RoBERTa/" style="font-size: 10px;">RoBERTa</a> <a href="/tags/Rotated-Sorted-Array/" style="font-size: 10px;">Rotated Sorted Array</a> <a href="/tags/SMO/" style="font-size: 10px;">SMO</a> <a href="/tags/SQL/" style="font-size: 11px;">SQL</a> <a href="/tags/SVM/" style="font-size: 11px;">SVM</a> <a href="/tags/Seaborn/" style="font-size: 10px;">Seaborn</a> <a href="/tags/Search/" style="font-size: 11px;">Search</a> <a href="/tags/Self-Attention/" style="font-size: 11px;">Self-Attention</a> <a href="/tags/Semantic-Automatic-Processing/" style="font-size: 10px;">Semantic Automatic Processing</a> <a href="/tags/Sigmoid/" style="font-size: 10px;">Sigmoid</a> <a href="/tags/Simon/" style="font-size: 10px;">Simon</a> <a href="/tags/Simpson-Paradox/" style="font-size: 10px;">Simpson Paradox</a> <a href="/tags/Slide/" style="font-size: 10px;">Slide</a> <a href="/tags/Smoothing/" style="font-size: 10px;">Smoothing</a> <a href="/tags/Soft-SVM/" style="font-size: 10px;">Soft-SVM</a> <a href="/tags/Softmax/" style="font-size: 10px;">Softmax</a> <a href="/tags/Sort/" style="font-size: 11px;">Sort</a> <a href="/tags/Spell-Check/" style="font-size: 10px;">Spell Check</a> <a href="/tags/Stack/" style="font-size: 10px;">Stack</a> <a href="/tags/Statistics/" style="font-size: 10px;">Statistics</a> <a href="/tags/Stirling/" style="font-size: 10px;">Stirling</a> <a href="/tags/String/" style="font-size: 10px;">String</a> <a href="/tags/Style/" style="font-size: 10px;">Style</a> <a href="/tags/Substring/" style="font-size: 10px;">Substring</a> <a href="/tags/Summarization/" style="font-size: 10px;">Summarization</a> <a href="/tags/Swap/" style="font-size: 10px;">Swap</a> <a href="/tags/System/" style="font-size: 11px;">System</a> <a href="/tags/TanH/" style="font-size: 10px;">TanH</a> <a href="/tags/Text-Generation/" style="font-size: 10px;">Text Generation</a> <a href="/tags/TextRank/" style="font-size: 10px;">TextRank</a> <a href="/tags/Thought/" style="font-size: 10px;">Thought</a> <a href="/tags/Transformer/" style="font-size: 17px;">Transformer</a> <a href="/tags/Transformer-XL/" style="font-size: 10px;">Transformer-XL</a> <a href="/tags/Tree/" style="font-size: 10px;">Tree</a> <a href="/tags/Tuning/" style="font-size: 10px;">Tuning</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/Unity-Operation/" style="font-size: 10px;">Unity Operation</a> <a href="/tags/Vagrant/" style="font-size: 10px;">Vagrant</a> <a href="/tags/Valence/" style="font-size: 10px;">Valence</a> <a href="/tags/VirtualBox/" style="font-size: 10px;">VirtualBox</a> <a href="/tags/Visualization/" style="font-size: 10px;">Visualization</a> <a href="/tags/Viterbi/" style="font-size: 10px;">Viterbi</a> <a href="/tags/WOE/" style="font-size: 10px;">WOE</a> <a href="/tags/Work/" style="font-size: 10px;">Work</a> <a href="/tags/XLNet/" style="font-size: 10px;">XLNet</a> <a href="/tags/Z-Score/" style="font-size: 10px;">Z-Score</a> <a href="/tags/ZhouZhihua/" style="font-size: 10px;">ZhouZhihua</a> <a href="/tags/Zipf/" style="font-size: 10px;">Zipf</a> <a href="/tags/binning/" style="font-size: 10px;">binning</a> <a href="/tags/knowledge-Graph/" style="font-size: 10px;">knowledge Graph</a> <a href="/tags/node2vec/" style="font-size: 10px;">node2vec</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-content">
      <ul>
        
          <li>
            <a href="/2020/09/24/ML/2020-09-24-ModelParameters/">建模调参</a>
          </li>
        
          <li>
            <a href="/2020/09/21/ML/2020-09-21-FeatureEngineering/">特征工程</a>
          </li>
        
          <li>
            <a href="/2020/09/18/ML/2020-09-18-EDA/">EDA</a>
          </li>
        
          <li>
            <a href="/2020/09/15/ML/2020-09-15-Metrics/">Metrics</a>
          </li>
        
          <li>
            <a href="/2020/09/13/Paper/2020-09-13-PEGASUS/">PEGASUS 论文笔记</a>
          </li>
        
      </ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-content">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AE/">AE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI/">AI</a><span class="tag-list-count">33</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ALBERT/">ALBERT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AR/">AR</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AUC/">AUC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Accuracy/">Accuracy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Activation/">Activation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Array/">Array</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Attention/">Attention</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Automatic-Speech-Processing/">Automatic Speech Processing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Backtracking/">Backtracking</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Backward/">Backward</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bahdanau-Attention/">Bahdanau Attention</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bart/">Bart</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bayes/">Bayes</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bert/">Bert</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bi-LSTM/">Bi-LSTM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Binary-Search/">Binary Search</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Business/">Business</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CNN/">CNN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CRF/">CRF</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Calculus/">Calculus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Catalan/">Catalan</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ChatBot/">ChatBot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chi2/">Chi2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cognition/">Cognition</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Computational-Linguistics/">Computational Linguistics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Computer/">Computer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Computer-Science/">Computer Science</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Confusing-Labels/">Confusing Labels</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coordinate-Ascent/">Coordinate Ascent</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ctrl/">Ctrl</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB/">DB</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DP/">DP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Clearing/">Data Clearing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Preprocess/">Data Preprocess</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Science/">Data Science</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Structure/">Data Structure</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/">Database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DeBERTa/">DeBERTa</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Decoder/">Decoder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DeepGraph/">DeepGraph</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DeepLearning/">DeepLearning</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dependence/">Dependence</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Diary/">Diary</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Disentangled-Attention/">Disentangled Attention</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DistilBERT/">DistilBERT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Django/">Django</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dynamic-Mask/">Dynamic-Mask</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EDA/">EDA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EMD/">EMD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ERNIE/">ERNIE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Economics/">Economics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearch/">Elasticsearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Electra/">Electra</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elixir/">Elixir</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Embedding/">Embedding</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Encoder/">Encoder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Entropy/">Entropy</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Evaluation/">Evaluation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FDW/">FDW</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FSM/">FSM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Feature-Engineering/">Feature Engineering</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Feature-based/">Feature-based</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Few-Shot/">Few-Shot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fine-tuning/">Fine-tuning</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Forward/">Forward</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Full-Text-Search/">Full-Text-Search</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Function-Syntax/">Function Syntax</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GELU/">GELU</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPT-2/">GPT-2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/">GPU</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GSG/">GSG</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gan/">Gan</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Graph/">Graph</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GraphQL/">GraphQL</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Grid-Grammar/">Grid Grammar</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HMM/">HMM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hard-SVM/">Hard-SVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hinge-Loss/">Hinge Loss</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IQR/">IQR</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Imbalance-Data/">Imbalance Data</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Industry/">Industry</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Information-Theory/">Information Theory</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Isolation-Forest/">Isolation Forest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Job/">Job</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KKT/">KKT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KS/">KS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kernel/">Kernel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kernel-Function/">Kernel Function</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kernel-Method/">Kernel Method</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Keyword/">Keyword</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Knowledge-Graph/">Knowledge Graph</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LOF/">LOF</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Language-Model/">Language Model</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lexicalism/">Lexicalism</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linear-Algebra/">Linear Algebra</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linear-Sturcture/">Linear Sturcture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linked-List/">Linked List</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LinkedList/">LinkedList</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lucene/">Lucene</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Luong-Attention/">Luong Attention</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Machine/">Machine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Machine-Learning/">Machine Learning</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Machine-Translation/">Machine Translation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Manacher/">Manacher</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Managemnt/">Managemnt</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markov/">Markov</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Materialized-Views/">Materialized Views</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Math/">Math</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Matplotlib/">Matplotlib</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Median/">Median</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Minimum-Edit-Distance/">Minimum Edit Distance</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Model-Evaluation/">Model Evaluation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Module/">Module</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Multi-Head-Attention/">Multi-Head Attention</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Multiway-Tree/">Multiway Tree</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NER/">NER</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLG/">NLG</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLM/">NLM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLP/">NLP</a><span class="tag-list-count">47</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLU/">NLU</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Neo4j/">Neo4j</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ngram/">Ngram</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NumPy/">NumPy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Occupation/">Occupation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Orientation/">Orientation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/P-R/">P-R</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PEGASUS/">PEGASUS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PageRank/">PageRank</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Palindromic/">Palindromic</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pandas/">Pandas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Philosophy/">Philosophy</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Phrase-Structure-Grammar/">Phrase Structure Grammar</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Position-Encoding/">Position-Encoding</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Postgres/">Postgres</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pragmatic-Automatic-Processing/">Pragmatic Automatic Processing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pre-training/">Pre-training</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Precision/">Precision</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pretraining/">Pretraining</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Probabilistic-Grammar/">Probabilistic Grammar</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Probabilistic-Model/">Probabilistic Model</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Psychology/">Psychology</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PyPI/">PyPI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Quant/">Quant</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Query/">Query</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Queue/">Queue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RELU/">RELU</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RFE/">RFE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RMSE/">RMSE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ROC/">ROC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Recall/">Recall</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Recursion/">Recursion</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reformer/">Reformer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Regex/">Regex</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Regular-Expression/">Regular Expression</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reinforcement-Learning/">Reinforcement Learning</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Relationship-Extraction/">Relationship Extraction</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RoBERTa/">RoBERTa</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Rotated-Sorted-Array/">Rotated Sorted Array</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SMO/">SMO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/">SQL</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SVM/">SVM</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Seaborn/">Seaborn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Search/">Search</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Self-Attention/">Self-Attention</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Semantic-Automatic-Processing/">Semantic Automatic Processing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sigmoid/">Sigmoid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Simon/">Simon</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Simpson-Paradox/">Simpson Paradox</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Slide/">Slide</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Smoothing/">Smoothing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Soft-SVM/">Soft-SVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Softmax/">Softmax</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sort/">Sort</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spell-Check/">Spell Check</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stack/">Stack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Statistics/">Statistics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stirling/">Stirling</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/String/">String</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Style/">Style</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Substring/">Substring</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Summarization/">Summarization</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swap/">Swap</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/System/">System</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TanH/">TanH</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Text-Generation/">Text Generation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TextRank/">TextRank</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thought/">Thought</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Transformer/">Transformer</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Transformer-XL/">Transformer-XL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tree/">Tree</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tuning/">Tuning</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity-Operation/">Unity Operation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vagrant/">Vagrant</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Valence/">Valence</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VirtualBox/">VirtualBox</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Visualization/">Visualization</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Viterbi/">Viterbi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WOE/">WOE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Work/">Work</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XLNet/">XLNet</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Z-Score/">Z-Score</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ZhouZhihua/">ZhouZhihua</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zipf/">Zipf</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/binning/">binning</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/knowledge-Graph/">knowledge Graph</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node2vec/">node2vec</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/">ssh</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </aside>

  
</div>
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2020 Yam
    All rights reserved.</p>
    <p>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></p>
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <!-- <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span> -->
    <!-- <span id="busuanzi_container_page_pv">本文总阅读量<span id="busuanzi_value_page_pv"></span>次</span> -->
    <!-- <span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人次</span> -->

</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
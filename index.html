<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Yam</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Coding, Quanting, Feeling, Thinking">
<meta property="og:type" content="website">
<meta property="og:title" content="Yam">
<meta property="og:url" content="http://www.yam.gift/index.html">
<meta property="og:site_name" content="Yam">
<meta property="og:description" content="Coding, Quanting, Feeling, Thinking">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Yam">
<meta name="twitter:description" content="Coding, Quanting, Feeling, Thinking">
  
    <link rel="alternate" href="/atom.xml" title="Yam" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Yam</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">From Yam to May</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.yam.gift"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-test" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/04/test/" class="article-date">
  <time datetime="2017-03-04T14:53:21.000Z" itemprop="datePublished">2017-03-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/04/test/">test</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.yam.gift/2017/03/04/test/" data-id="cizvdecy40001p29a5hvw9su9" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-list-dict-series-dataframe-ndarray-transform" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/15/list-dict-series-dataframe-ndarray-transform/" class="article-date">
  <time datetime="2017-02-15T06:54:17.522Z" itemprop="datePublished">2017-02-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/15/list-dict-series-dataframe-ndarray-transform/">List, Dict, Array, Series, DataFrame 相互转换</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><ul>
<li>dict to series</li>
<li>dict to dataframe</li>
<li>list to series</li>
<li>list to dataframe</li>
<li>list to array</li>
<li>array to dataframe</li>
<li>series to array</li>
<li>dataframe to array</li>
<li>dataframe to dict</li>
</ul>
<h2 id="1-输入-Dict"><a href="#1-输入-Dict" class="headerlink" title="1. 输入 Dict"></a>1. 输入 Dict</h2><ul>
<li>dict to series</li>
<li>dict to dataframe</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding:utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div><div class="line"></div><div class="line"><span class="comment"># dict</span></div><div class="line">data = &#123; <span class="string">'state'</span>: [<span class="string">'Ohino'</span>, <span class="string">'Ohino'</span>, <span class="string">'Ohino'</span>, <span class="string">'Nevada'</span>, <span class="string">'Nevada'</span>],</div><div class="line">         <span class="string">'year'</span>: [<span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2001</span>, <span class="number">2002</span>],</div><div class="line">         <span class="string">'pop'</span>: [<span class="number">1.5</span>, <span class="number">1.7</span>, <span class="number">3.6</span>, <span class="number">2.4</span>, <span class="number">2.9</span>]&#125;  <span class="comment"># type(data) 为 dict</span></div><div class="line"></div><div class="line"><span class="comment"># dict to series，若不指定 index，data 的 key 充当 Series 的 index</span></div><div class="line">ser = Series(data)</div><div class="line"></div><div class="line"><span class="comment"># dict to dataframe，若不指定 columns，data 的 key 充当 DataFrame 的 columns</span></div><div class="line">df = DataFrame(data)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data</div></pre></td></tr></table></figure>
<pre><code>{&apos;pop&apos;: [1.5, 1.7, 3.6, 2.4, 2.9],
 &apos;state&apos;: [&apos;Ohino&apos;, &apos;Ohino&apos;, &apos;Ohino&apos;, &apos;Nevada&apos;, &apos;Nevada&apos;],
 &apos;year&apos;: [2000, 2001, 2002, 2001, 2002]}
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dict to series，若不指定 index，data 的 key 充当 Series 的 index</span></div><div class="line">ser = Series(data)</div><div class="line">ser</div></pre></td></tr></table></figure>
<pre><code>pop                  [1.5, 1.7, 3.6, 2.4, 2.9]
state    [Ohino, Ohino, Ohino, Nevada, Nevada]
year            [2000, 2001, 2002, 2001, 2002]
dtype: object
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ser.shape</div></pre></td></tr></table></figure>
<pre><code>(3,)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dict to dataframe，若不指定 columns，data 的 key 充当 DataFrame 的 columns</span></div><div class="line">df = DataFrame(data)</div><div class="line">df</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th>pop</th>
<th>state</th>
<th>year</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1.5</td>
<td>Ohino</td>
<td>2000</td>
</tr>
<tr>
<td>1</td>
<td>1.7</td>
<td>Ohino</td>
<td>2001</td>
</tr>
<tr>
<td>2</td>
<td>3.6</td>
<td>Ohino</td>
<td>2002</td>
</tr>
<tr>
<td>3</td>
<td>2.4</td>
<td>Nevada</td>
<td>2001</td>
</tr>
<tr>
<td>4</td>
<td>2.9</td>
<td>Nevada</td>
<td>2002</td>
</tr>
</tbody>
</table>
<h2 id="2-输入-List"><a href="#2-输入-List" class="headerlink" title="2. 输入 List"></a>2. 输入 List</h2><ul>
<li>list to series</li>
<li>list to dataframe</li>
<li>list to array</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding:utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div><div class="line"></div><div class="line"><span class="comment"># list</span></div><div class="line">data = [[<span class="number">2000</span>, <span class="string">'Ohino'</span>, <span class="number">1.5</span>],</div><div class="line">        [<span class="number">2001</span>, <span class="string">'Ohino'</span>, <span class="number">1.7</span>],</div><div class="line">        [<span class="number">2002</span>, <span class="string">'Ohino'</span>, <span class="number">3.6</span>],</div><div class="line">        [<span class="number">2001</span>, <span class="string">'Nevada'</span>, <span class="number">2.4</span>],</div><div class="line">        [<span class="number">2002</span>, <span class="string">'Nevada'</span>, <span class="number">2.9</span>]]  <span class="comment"># type(data) 为 list</span></div><div class="line"></div><div class="line"><span class="comment"># list to series</span></div><div class="line">ser = Series(data, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>])</div><div class="line"></div><div class="line"><span class="comment"># list to dataframe</span></div><div class="line">df = DataFrame(data, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>], columns = [<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>])</div><div class="line"></div><div class="line"><span class="comment"># list to array</span></div><div class="line">ndarray = np.array(data)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(data)</div></pre></td></tr></table></figure>
<pre><code>list
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data</div></pre></td></tr></table></figure>
<pre><code>[[2000, &apos;Ohino&apos;, 1.5],
 [2001, &apos;Ohino&apos;, 1.7],
 [2002, &apos;Ohino&apos;, 3.6],
 [2001, &apos;Nevada&apos;, 2.4],
 [2002, &apos;Nevada, 2.9&apos;]]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># list to series</span></div><div class="line">ser = Series(data, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>])</div><div class="line">ser</div></pre></td></tr></table></figure>
<pre><code>one       [2000, Ohino, 1.5]
two       [2001, Ohino, 1.7]
three     [2002, Ohino, 3.6]
four     [2001, Nevada, 2.4]
five     [2002, Nevada, 2.9]
dtype: object
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(ser)</div></pre></td></tr></table></figure>
<pre><code>pandas.core.series.Series
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ser.shape</div></pre></td></tr></table></figure>
<pre><code>(5,)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># list to dataframe</span></div><div class="line">df = DataFrame(data, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>], columns = [<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>])</div><div class="line">df</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th>year</th>
<th>state</th>
<th>pop</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>one</strong></td>
<td>2000</td>
<td>Ohino</td>
<td>1.5</td>
</tr>
<tr>
<td><strong>two</strong></td>
<td>2001</td>
<td>Ohino</td>
<td>1.7</td>
</tr>
<tr>
<td><strong>three</strong></td>
<td>2002</td>
<td>Ohino</td>
<td>3.6</td>
</tr>
<tr>
<td><strong>four</strong></td>
<td>2001</td>
<td>Nevada</td>
<td>2.4</td>
</tr>
<tr>
<td><strong>five</strong></td>
<td>2002</td>
<td>Nevada</td>
<td>2.9</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(df)</div></pre></td></tr></table></figure>
<pre><code>pandas.core.frame.DataFrame
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df.shape</div></pre></td></tr></table></figure>
<pre><code>(5, 3)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># list to ndarray</span></div><div class="line">ndarray = np.array(data)</div><div class="line">ndarray</div></pre></td></tr></table></figure>
<pre><code>array([[&apos;2000&apos;, &apos;Ohino&apos;, &apos;1.5&apos;],
       [&apos;2001&apos;, &apos;Ohino&apos;, &apos;1.7&apos;],
       [&apos;2002&apos;, &apos;Ohino&apos;, &apos;3.6&apos;],
       [&apos;2001&apos;, &apos;Nevada&apos;, &apos;2.4&apos;],
       [&apos;2002&apos;, &apos;Nevada&apos;, &apos;2.9&apos;]],
      dtype=&apos;|S21&apos;)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ndarray.shape</div></pre></td></tr></table></figure>
<pre><code>(5, 3)
</code></pre><h2 id="3-输入-Array"><a href="#3-输入-Array" class="headerlink" title="3 输入 Array"></a>3 输入 Array</h2><ul>
<li>array to dataframe</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding:utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div><div class="line"></div><div class="line"><span class="comment"># list</span></div><div class="line">data = [[<span class="number">2000</span>, <span class="string">'Ohino'</span>, <span class="number">1.5</span>],</div><div class="line">        [<span class="number">2001</span>, <span class="string">'Ohino'</span>, <span class="number">1.7</span>],</div><div class="line">        [<span class="number">2002</span>, <span class="string">'Ohino'</span>, <span class="number">3.6</span>],</div><div class="line">        [<span class="number">2001</span>, <span class="string">'Nevada'</span>, <span class="number">2.4</span>],</div><div class="line">        [<span class="number">2002</span>, <span class="string">'Nevada'</span>, <span class="number">2.9</span>]]  <span class="comment"># type(data) 为 list</span></div><div class="line"></div><div class="line"><span class="comment"># list to array</span></div><div class="line">ndarray = np.array(data)</div><div class="line"></div><div class="line"><span class="comment"># array to dataframe</span></div><div class="line">pd = DataFrame(ndarray, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>], columns = [<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>])</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ndarray</div><div class="line"><span class="comment"># 注意：array 中所有数据类型均是一样的</span></div></pre></td></tr></table></figure>
<pre><code>array([[&apos;2000&apos;, &apos;Ohino&apos;, &apos;1.5&apos;],
       [&apos;2001&apos;, &apos;Ohino&apos;, &apos;1.7&apos;],
       [&apos;2002&apos;, &apos;Ohino&apos;, &apos;3.6&apos;],
       [&apos;2001&apos;, &apos;Nevada&apos;, &apos;2.4&apos;],
       [&apos;2002&apos;, &apos;Nevada&apos;, &apos;2.9&apos;]],
      dtype=&apos;|S21&apos;)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pd</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th>year</th>
<th>state</th>
<th>pop</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>one</strong></td>
<td>2000</td>
<td>Ohino</td>
<td>1.5</td>
</tr>
<tr>
<td><strong>two</strong></td>
<td>2001</td>
<td>Ohino</td>
<td>1.7</td>
</tr>
<tr>
<td><strong>three</strong></td>
<td>2002</td>
<td>Ohino</td>
<td>3.6</td>
</tr>
<tr>
<td><strong>four</strong></td>
<td>2001</td>
<td>Nevada</td>
<td>2.4</td>
</tr>
<tr>
<td><strong>five</strong></td>
<td>2002</td>
<td>Nevada</td>
<td>2.9</td>
</tr>
</tbody>
</table>
<h2 id="4-输入-DataFrame"><a href="#4-输入-DataFrame" class="headerlink" title="4. 输入 DataFrame"></a>4. 输入 DataFrame</h2><ul>
<li>series to array</li>
<li>dataframe to array</li>
<li>dataframe to dict</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding:utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div><div class="line"></div><div class="line"><span class="comment"># list</span></div><div class="line">data = [[<span class="number">2000</span>, <span class="string">'Ohino'</span>, <span class="number">1.5</span>],</div><div class="line">        [<span class="number">2001</span>, <span class="string">'Ohino'</span>, <span class="number">1.7</span>],</div><div class="line">        [<span class="number">2002</span>, <span class="string">'Ohino'</span>, <span class="number">3.6</span>],</div><div class="line">        [<span class="number">2001</span>, <span class="string">'Nevada'</span>, <span class="number">2.4</span>],</div><div class="line">        [<span class="number">2002</span>, <span class="string">'Nevada'</span>, <span class="number">2.9</span>]]  <span class="comment"># type(data) 为 list</span></div><div class="line"></div><div class="line"><span class="comment"># list to series</span></div><div class="line">ser = Series(data, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>])</div><div class="line"></div><div class="line"><span class="comment"># list to dataframe</span></div><div class="line">df = DataFrame(data, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>], columns = [<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>])</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># series to array</span></div><div class="line">foo = ser.as_matrix()</div><div class="line">foo0 = Series.as_matrix(ser)</div><div class="line"></div><div class="line"><span class="comment"># dataframe to array, foo2 foo3 foo4 结果相同</span></div><div class="line">foo1 = DataFrame.as_matrix(df)</div><div class="line">foo2 = df.as_matrix()</div><div class="line">foo3 = df.values</div><div class="line">foo4 = np.array(df)</div><div class="line"></div><div class="line">foo5 = df.as_matrix([<span class="string">"pop"</span>])</div><div class="line"></div><div class="line"><span class="comment"># dataframe to dict</span></div><div class="line"><span class="comment"># outtype的参数为‘dict’、‘list’、‘series’和‘records’。</span></div><div class="line"><span class="comment"># dict返回的是dict of dict；list返回的是列表的字典；series返回的是序列的字典；records返回的是字典的列表</span></div><div class="line">df1 = df.to_dict(orient=<span class="string">'dict'</span>)</div><div class="line">df2 = df.to_dict(orient=<span class="string">'list'</span>)</div><div class="line">df3 = df.to_dict(orient=<span class="string">'series'</span>)</div><div class="line">df4 = df.to_dict(orient=<span class="string">'records'</span>)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># series to ndarray</span></div><div class="line">foo = ser.as_matrix()</div><div class="line">foo0 = Series.as_matrix(ser)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo</div></pre></td></tr></table></figure>
<pre><code>array([[2000, &apos;Ohino&apos;, 1.5], [2001, &apos;Ohino&apos;, 1.7], [2002, &apos;Ohino&apos;, 3.6],
       [2001, &apos;Nevada&apos;, 2.4], [2002, &apos;Nevada&apos;, 2.9]], dtype=object)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo0</div></pre></td></tr></table></figure>
<pre><code>array([[2000, &apos;Ohino&apos;, 1.5], [2001, &apos;Ohino&apos;, 1.7], [2002, &apos;Ohino&apos;, 3.6],
       [2001, &apos;Nevada&apos;, 2.4], [2002, &apos;Nevada&apos;, 2.9]], dtype=object)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(foo)</div></pre></td></tr></table></figure>
<pre><code>numpy.ndarray
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo.shape, foo0.shape</div></pre></td></tr></table></figure>
<pre><code>((5,), (5,))
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dataframe to ndarray foo2 foo3 foo4 结果相同</span></div><div class="line">foo1 = DataFrame.as_matrix(df)</div><div class="line">foo2 = df.as_matrix()</div><div class="line">foo3 = df.values</div><div class="line">foo4 = np.array(df)</div><div class="line"></div><div class="line">foo5 = df.as_matrix([<span class="string">"pop"</span>])</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo1</div></pre></td></tr></table></figure>
<pre><code>array([[2000, &apos;Ohino&apos;, 1.5],
       [2001, &apos;Ohino&apos;, 1.7],
       [2002, &apos;Ohino&apos;, 3.6],
       [2001, &apos;Nevada&apos;, 2.4],
       [2002, &apos;Nevada&apos;, 2.9]], dtype=object)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo2</div></pre></td></tr></table></figure>
<pre><code>array([[2000, &apos;Ohino&apos;, 1.5],
       [2001, &apos;Ohino&apos;, 1.7],
       [2002, &apos;Ohino&apos;, 3.6],
       [2001, &apos;Nevada&apos;, 2.4],
       [2002, &apos;Nevada&apos;, 2.9]], dtype=object)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo3</div></pre></td></tr></table></figure>
<pre><code>array([[2000, &apos;Ohino&apos;, 1.5],
       [2001, &apos;Ohino&apos;, 1.7],
       [2002, &apos;Ohino&apos;, 3.6],
       [2001, &apos;Nevada&apos;, 2.4],
       [2002, &apos;Nevada&apos;, 2.9]], dtype=object)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo4</div></pre></td></tr></table></figure>
<pre><code>array([[2000, &apos;Ohino&apos;, 1.5],
       [2001, &apos;Ohino&apos;, 1.7],
       [2002, &apos;Ohino&apos;, 3.6],
       [2001, &apos;Nevada&apos;, 2.4],
       [2002, &apos;Nevada&apos;, 2.9]], dtype=object)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo5</div></pre></td></tr></table></figure>
<pre><code>array([[ 1.5],
       [ 1.7],
       [ 3.6],
       [ 2.4],
       [ 2.9]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo1.shape, foo2.shape, foo3.shape, foo4.shape, foo5.shape</div></pre></td></tr></table></figure>
<pre><code>((5, 3), (5, 3), (5, 3), (5, 3), (5, 1))
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th>year</th>
<th>state</th>
<th>pop</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>one</strong></td>
<td>2000</td>
<td>Ohino</td>
<td>1.5</td>
</tr>
<tr>
<td><strong>two</strong></td>
<td>2001</td>
<td>Ohino</td>
<td>1.7</td>
</tr>
<tr>
<td><strong>three</strong></td>
<td>2002</td>
<td>Ohino</td>
<td>3.6</td>
</tr>
<tr>
<td><strong>four</strong></td>
<td>2001</td>
<td>Nevada</td>
<td>2.4</td>
</tr>
<tr>
<td><strong>five</strong></td>
<td>2002</td>
<td>Nevada</td>
<td>2.9</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dataframe to dict, dict返回的是dict of dict；list返回的是列表的字典；series返回的是序列的字典；records返回的是字典的列表</span></div><div class="line">df1 = df.to_dict(orient=<span class="string">'dict'</span>)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df1</div></pre></td></tr></table></figure>
<pre><code>{&apos;pop&apos;: {&apos;five&apos;: 2.9,
  &apos;four&apos;: 2.4,
  &apos;one&apos;: 1.5,
  &apos;three&apos;: 3.6,
  &apos;two&apos;: 1.7},
 &apos;state&apos;: {&apos;five&apos;: &apos;Nevada&apos;,
  &apos;four&apos;: &apos;Nevada&apos;,
  &apos;one&apos;: &apos;Ohino&apos;,
  &apos;three&apos;: &apos;Ohino&apos;,
  &apos;two&apos;: &apos;Ohino&apos;},
 &apos;year&apos;: {&apos;five&apos;: 2002, &apos;four&apos;: 2001, &apos;one&apos;: 2000, &apos;three&apos;: 2002, &apos;two&apos;: 2001}}
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(df1)</div></pre></td></tr></table></figure>
<pre><code>dict
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dataframe to dict, dict返回的是dict of dict；list返回的是列表的字典；series返回的是序列的字典；records返回的是字典的列表</span></div><div class="line">df2 = df.to_dict(orient=<span class="string">'list'</span>)</div><div class="line">df2</div></pre></td></tr></table></figure>
<pre><code>{&apos;pop&apos;: [1.5, 1.7, 3.6, 2.4, 2.9],
 &apos;state&apos;: [&apos;Ohino&apos;, &apos;Ohino&apos;, &apos;Ohino&apos;, &apos;Nevada&apos;, &apos;Nevada&apos;],
 &apos;year&apos;: [2000, 2001, 2002, 2001, 2002]}
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(df2)</div></pre></td></tr></table></figure>
<pre><code>dict
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dataframe to dict, dict返回的是dict of dict；list返回的是列表的字典；series返回的是序列的字典；records返回的是字典的列表</span></div><div class="line">df3 = df.to_dict(orient=<span class="string">'series'</span>)</div><div class="line">df3</div></pre></td></tr></table></figure>
<pre><code>{&apos;pop&apos;: one      1.5
 two      1.7
 three    3.6
 four     2.4
 five     2.9
 Name: pop, dtype: float64, &apos;state&apos;: one       Ohino
 two       Ohino
 three     Ohino
 four     Nevada
 five     Nevada
 Name: state, dtype: object, &apos;year&apos;: one      2000
 two      2001
 three    2002
 four     2001
 five     2002
 Name: year, dtype: int64}
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(df3)</div></pre></td></tr></table></figure>
<pre><code>dict
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dataframe to dict, dict返回的是dict of dict；list返回的是列表的字典；series返回的是序列的字典；records返回的是字典的列表</span></div><div class="line">df4 = df.to_dict(orient=<span class="string">'records'</span>)</div><div class="line">df4</div></pre></td></tr></table></figure>
<pre><code>[{&apos;pop&apos;: 1.5, &apos;state&apos;: &apos;Ohino&apos;, &apos;year&apos;: 2000},
 {&apos;pop&apos;: 1.7, &apos;state&apos;: &apos;Ohino&apos;, &apos;year&apos;: 2001},
 {&apos;pop&apos;: 3.6, &apos;state&apos;: &apos;Ohino&apos;, &apos;year&apos;: 2002},
 {&apos;pop&apos;: 2.4, &apos;state&apos;: &apos;Nevada&apos;, &apos;year&apos;: 2001},
 {&apos;pop&apos;: 2.9, &apos;state&apos;: &apos;Nevada&apos;, &apos;year&apos;: 2002}]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(df4)</div></pre></td></tr></table></figure>
<pre><code>list
</code></pre><h2 id="4-总结：List-Dict-Array-Series-DataFrame-的区别"><a href="#4-总结：List-Dict-Array-Series-DataFrame-的区别" class="headerlink" title="4. 总结：List, Dict, Array, Series, DataFrame 的区别"></a>4. 总结：List, Dict, Array, Series, DataFrame 的区别</h2><ul>
<li>List 和 Dict 是 Python 的基本数据结构</li>
<li>Series 和 DataFrame 是 Pandas 的基本数据结构</li>
<li>Array 是 Numpy 的数据结构</li>
</ul>
<h3 id="4-1-Pandas-中的数据结构"><a href="#4-1-Pandas-中的数据结构" class="headerlink" title="4.1 Pandas 中的数据结构"></a>4.1 Pandas 中的数据结构</h3><h4 id="4-1-1-Series"><a href="#4-1-1-Series" class="headerlink" title="4.1.1 Series"></a>4.1.1 Series</h4><ul>
<li>Series 是一个一维的类似的数组对象，包含一个数组的数据（任何 NumPy 的数据类型）和一个与数组关联的数据标签，被叫做<strong>索引</strong>。最简单的Series是由一个数组的数据构成。</li>
<li>Series 是一个定长的，有序的字典，因为它把索引和值映射起来了。</li>
<li>Series 与 Numpy 中的一维 array 类似。二者与 Python 基本的数据结构 List 也很相近。其区别是：List 中的元素可以是不同的数据类型，而 Array 和 Series 中则只允许存储相同的数据类型，这样可以更有效的使用内存，提高运算效率。</li>
<li>Time-Series：以时间为索引的 Series。</li>
</ul>
<h4 id="4-1-2-DataFrame"><a href="#4-1-2-DataFrame" class="headerlink" title="4.1.2 DataFrame"></a>4.1.2 DataFrame</h4><ul>
<li>DataFrame：<strong>二维</strong>的表格型数据结构。很多功能与 R 中的 data.frame 类似。可以将 DataFrame 理解为 Series 的容器。</li>
<li>有很多方法来构建一个 DataFrame，但最常用的一个是用一个相等长度列表的字典或 NumPy 数组。</li>
<li>像 Series 一样， DataFrame 的 values 属性返回一个包含在 DataFrame 中的数据的二维 ndarray。</li>
<li>Panel ：三维的数组，可以理解为 DataFrame 的容器。</li>
</ul>
<p><strong>可能的传递到DataFrame的构造器</strong></p>
<table>
<thead>
<tr>
<th>构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>二维ndarray</td>
<td>一个数据矩阵，有可选的行标和列标</td>
</tr>
<tr>
<td>数组，列表或元组的字典</td>
<td>每一个序列成为DataFrame中的一列。所有的序列必须有相同的长度。</td>
</tr>
<tr>
<td>NumPy的结构/记录数组</td>
<td>和“数组字典”一样处理</td>
</tr>
<tr>
<td>Series的字典</td>
<td>每一个值成为一列。如果没有明显的传递索引，将结合每一个Series的索引来形成结果的行索引。</td>
</tr>
<tr>
<td>字典的字典</td>
<td>每一个内部的字典成为一列。和“Series的字典”一样，结合键值来形成行索引。</td>
</tr>
<tr>
<td>字典或Series的列表</td>
<td>每一项成为DataFrame中的一列。结合字典键或Series索引形成DataFrame的列标。</td>
</tr>
<tr>
<td>列表或元组的列表</td>
<td>和“二维ndarray”一样处理</td>
</tr>
<tr>
<td>另一个DataFrame</td>
<td>DataFrame的索引将被使用，除非传递另外一个</td>
</tr>
<tr>
<td>NumPy伪装数组（MaskedArray）</td>
<td>除了蒙蔽值在DataFrame中成为NA/丢失数据之外，其它的和“二维ndarray”一样</td>
</tr>
</tbody>
</table>
<h3 id="4-2-Numpy-操作"><a href="#4-2-Numpy-操作" class="headerlink" title="4.2 Numpy 操作"></a>4.2 Numpy 操作</h3><ul>
<li><p>基本操作</p>
<ul>
<li>np.array 创建数组，调用 astype 总是会创建一个新的数组（原数据的拷贝），即使是新的 dtype 和原来的 dtype 相同。</li>
<li>索引，切片等详见：<a href="http://pda.readthedocs.io/en/latest/chp4.html" target="_blank" rel="external">http://pda.readthedocs.io/en/latest/chp4.html</a></li>
</ul>
</li>
<li><p>通用函数</p>
</li>
<li><p>数据处理</p>
<ul>
<li>np.meshgrid 函数接受两个一维数组并产生两个二维矩阵，其值对于两个数组的所有 (x, y) 对。</li>
<li>函数 numpy.where 是三元表达式 x if condition else y 的矢量化版本。</li>
<li>mean 和 sun 函数可以有一个可选的 axis 参数，它对给定坐标轴进行统计，结果数组将会减少一个维度。</li>
<li>有两个额外的方法， any 和 all ，对布尔数组尤其有用。 any 用来测试一个数组中是否有一个或更多的 True ，而 all 用来测试所有的值是否为 True。</li>
<li>顶层的 np.sort 函数返回一个经过排序后的数组拷贝，而不是就地修改。</li>
<li>Numpy 有一些基本的针对一维 ndarrays 的集合操作。最常使用的一个可能是 np.unique ，它返回一个数组的经过排序的 unique 值。</li>
</ul>
</li>
<li><p>线性代数</p>
<ul>
<li>numpy.linalg 有一个关于矩阵分解和像转置和行列式等的一个标准集合。</li>
</ul>
</li>
</ul>
<h2 id="参考网站"><a href="#参考网站" class="headerlink" title="参考网站"></a>参考网站</h2><ul>
<li><a href="http://pda.readthedocs.io/en/latest/chp5.html" target="_blank" rel="external">Pandas 入门</a></li>
<li>整理自：<a href="http://www.lining0806.com/numpy%E7%9A%84ndarray%E4%B8%8Epandas%E7%9A%84series%E5%92%8Cdataframe%E4%B9%8B%E9%97%B4%E4%BA%92%E8%BD%AC/" target="_blank" rel="external">宁哥的小站</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.yam.gift/2017/02/15/list-dict-series-dataframe-ndarray-transform/" data-id="cizvdecxt0000p29a6csmtf06" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DataClearing/">DataClearing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DataScience/">DataScience</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-NumPy" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/19/NumPy/" class="article-date">
  <time datetime="2016-09-19T13:32:55.000Z" itemprop="datePublished">2016-09-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/19/NumPy/">numpy</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>NumPy 笔记目录</strong></p>
<ul>
<li><a href="#Array Creation">Array Creation</a><ul>
<li><a href="#np.arange">np.arange</a></li>
<li><a href="#np.array">np.array</a></li>
</ul>
</li>
<li><a href="#Basic Operations">Basic Operations</a><ul>
<li><a href="#dot">dot</a></li>
<li><a href="#axis">axis</a></li>
</ul>
</li>
<li><a href="#Indexing, Slicing and Iterating">Indexing, Slicing and Iterating</a><ul>
<li><a href="#One-dimensional">One-dimensional</a></li>
<li><a href="#Multidimensional">Multidimensional</a></li>
<li><a href="#Iterating">Iterating</a></li>
<li><a href="#Indexing with Arrays">Indexing with Arrays</a></li>
<li><a href="#Search max &amp; min">Search max &amp; min</a></li>
<li><a href="#np.ix">np.ix_()</a></li>
</ul>
</li>
<li><a href="#Shape Manipulation">Shape Manipulation</a><ul>
<li><a href="#Changing the shape">Changing the shape</a></li>
<li><a href="#Stacking together">Stacking together</a></li>
<li><a href="#Splitting">Splitting</a></li>
<li><a href="#Copy and Views">Copy and Views</a></li>
</ul>
</li>
</ul>
<h3 id="Array Creation">Array Creation</h3>


<h4 id="np.arange">np.arange</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import numpy as np</div><div class="line">&gt;&gt;&gt; a = np.arange(15).reshapre(3, 5)</div><div class="line">&gt;&gt;&gt; np.arange(10, 30, 5)</div><div class="line">array([10, 15, 20, 25])</div></pre></td></tr></table></figure>
<h4 id="np.array">np.array</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import numpy as np</div><div class="line">&gt;&gt;&gt; a = np.array([(2,3,4), (3,4,5)]) or</div><div class="line">&gt;&gt;&gt; a = np.array([ [2,3,4], [3,4,5] ])</div><div class="line">&gt;&gt;&gt; b = np.array([ [1,2], [3,4] ], dtype=complex)</div><div class="line">&gt;&gt;&gt; np.zeros(5)</div><div class="line">&gt;&gt;&gt; np.zeros((3,4))</div><div class="line">&gt;&gt;&gt; np.ones( (2,3,4), dtype=np.int16 ) # dtype can also be specified</div></pre></td></tr></table></figure>
<h3 id="Basic Operations">Basic Operations</h3>


<h4 id="dot">dot</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; A.dot(B) or</div><div class="line">&gt;&gt;&gt; np.dot(A, B)</div></pre></td></tr></table></figure>
<h4 id="axis">axis</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b = np.arange(12).reshape(3,4)</div><div class="line">array(</div><div class="line">[[ 0,  1,  2,  3],</div><div class="line"> [ 4,  5,  6,  7],</div><div class="line"> [ 8,  9, 10, 11]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b.sum(axis=0)  # sum of each column</div><div class="line">array([12, 15, 18, 21])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b.min(axis=1)  # min of each row</div><div class="line">array([0, 4, 8])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b.cumsum(axis=1)  # cumulative sum along each row</div><div class="line">array(</div><div class="line">[[ 0,  1,  3,  6],</div><div class="line"> [ 4,  9, 15, 22],</div><div class="line"> [ 8, 17, 27, 38]])</div></pre></td></tr></table></figure>
<h3 id="Indexing, Slicing and Iterating">Indexing, Slicing and Iterating</h3>


<h4 id="One-dimensional">One-dimensional</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(10)**3</div><div class="line">array([  0,   1,   8,  27,  64, 125, 216, 343, 512, 729])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[: 6 : 2] = -1000   # equivalent to a[0:6:2] = -1000; from start to position 6, exclusive, set every 2nd element (二次元) to -1000</div><div class="line">array([ -1000, 1, -1000, 27, -1000, 125, 216, 343, 512, 729])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[ : :-1]  # reversed a</div><div class="line">array([  729,   512,   343,   216,   125, -1000,    27, -1000,     1, -1000])</div></pre></td></tr></table></figure>
<h4 id="Multidimensional">Multidimensional</h4>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; def f(x,y):</div><div class="line">...     return 10*x+y</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b = np.fromfunction(f,(5,4),dtype=int)</div><div class="line">&gt;&gt;&gt; b</div><div class="line">array(</div><div class="line">[[ 0,  1,  2,  3],</div><div class="line"> [10, 11, 12, 13],</div><div class="line"> [20, 21, 22, 23],</div><div class="line"> [30, 31, 32, 33],</div><div class="line"> [40, 41, 42, 43]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b[1:3, : ]   # each column in the second and third row of b</div><div class="line">array(</div><div class="line">[[10, 11, 12, 13],</div><div class="line"> [20, 21, 22, 23]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c = np.array( [[[  0,  1,  2],</div><div class="line">...                 [ 10, 12, 13]],</div><div class="line">...                [[100,101,102],</div><div class="line">...                 [110,112,113]]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c.shape</div><div class="line">(2, 2, 3)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c[1,...]     # same as c[1,:,:] or c[1]</div><div class="line">array(</div><div class="line">[[100, 101, 102],</div><div class="line"> [110, 112, 113]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c[...,2]       # same as c[:,:,2]</div><div class="line">array(</div><div class="line">[[  2,  13],</div><div class="line"> [102, 113]])</div></pre></td></tr></table></figure>
<h4 id="Iterating">Iterating</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; for row in b:</div><div class="line">&gt;&gt;&gt;     print(row)</div><div class="line">[0 1 2 3]</div><div class="line">[10 11 12 13]</div><div class="line">[20 21 22 23]</div><div class="line">[30 31 32 33]</div><div class="line">[40 41 42 43]</div><div class="line">&gt;&gt;&gt; for element in b.flat:</div><div class="line">        print(element)  # this will print every element.</div></pre></td></tr></table></figure>
<p><code>key words: flat</code></p>
<h4 id="Indexing with Arrays">Indexing with Arrays</h4>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(12).reshape(3,4)</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[ 0,  1,  2,  3],</div><div class="line"> [ 4,  5,  6,  7],</div><div class="line"> [ 8,  9, 10, 11]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; i = np.array([ [0,1],</div><div class="line">                    [1,2] ] )  # indices for the first dim of a</div><div class="line">&gt;&gt;&gt; j = np.array( [ [2,1],</div><div class="line">                     [3,3] ] ) # indices for the second dim</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[i,j]  # i and j must have equal shape</div><div class="line">array(</div><div class="line">[[ 2,  5],</div><div class="line"> [ 7, 11]])</div><div class="line"> 组合顺序如下：</div><div class="line"> (0, 2), (1, 1)</div><div class="line"> (1, 3), (2, 3)</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[i] # equal to a[i, :]</div><div class="line">array(</div><div class="line">[[[0, 1, 2, 3],</div><div class="line">    [4, 5 ,6, 7]],</div><div class="line"></div><div class="line">   [[4, 5, 6, 7],</div><div class="line">    [8, 9,10,11]]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[i,2]</div><div class="line">array([[ 2,  6],</div><div class="line">         [ 6, 10]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[:,j]   # i.e., a[ : , j]</div><div class="line">array(</div><div class="line">[[[ 2,  1],</div><div class="line">    [ 3,  3]],</div><div class="line">   [[ 6,  5],</div><div class="line">    [ 7,  7]],</div><div class="line">   [[10,  9],</div><div class="line">    [11, 11]]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; l = [i,j]</div><div class="line">&gt;&gt;&gt; a[l]      # equivalent to a[i,j]</div><div class="line">array(</div><div class="line">[[ 2,  5],</div><div class="line">   [ 7, 11]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; s = np.array( [i,j] ) # s.shape = (2, 2, 2)</div><div class="line">&gt;&gt;&gt; a[s]      # not what we want</div><div class="line">Traceback (most recent call last): File &quot;&lt;stdin&gt;&quot;, line 1, in ?</div><div class="line">IndexError: index (3) out of range (0&lt;=index&lt;=2) in dimension 0</div><div class="line">&gt;&gt;&gt; a[tuple(s)]       # same as a[i,j]</div><div class="line">array(</div><div class="line">[[ 2,  5],</div><div class="line">   [ 7, 11]])</div></pre></td></tr></table></figure>
<h4 id="Search max & min">Search max &amp; min</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; time = np.linspace(20, 145, 5)    # time scale</div><div class="line">&gt;&gt;&gt; data = np.sin(np.arange(20)).reshape(5,4)</div><div class="line">&gt;&gt;&gt; time</div><div class="line">array([  20\.  ,   51.25,   82.5 ,  113.75,  145\.  ])</div><div class="line">&gt;&gt;&gt; data</div><div class="line">array(</div><div class="line">[[ 0\.       ,  0.84147098,  0.90929743,  0.14112001],</div><div class="line">   [-0.7568025 , -0.95892427, -0.2794155 ,  0.6569866 ],</div><div class="line">   [ 0.98935825,  0.41211849, -0.54402111, -0.99999021],</div><div class="line">   [-0.53657292,  0.42016704,  0.99060736,  0.65028784],</div><div class="line">   [-0.28790332, -0.96139749, -0.75098725,  0.14987721]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; ind = data.argmax(axis=0)  # index of the maxima for each series</div><div class="line">&gt;&gt;&gt; ind</div><div class="line">array([2, 0, 3, 1]) # 位置</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; time_max = time[ind]    # times corresponding to the maxima</div><div class="line">&gt;&gt;&gt; data_max = data[ind, xrange(data.shape[1])] # =&gt; data[ind[0],0], data[ind[1],1]. 等价于data[ind, range(4)]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; time_max</div><div class="line">array([  82.5 ,   20\.  ,  113.75,   51.25])</div><div class="line">&gt;&gt;&gt; data_max</div><div class="line">array([ 0.98935825,  0.84147098,  0.99060736,  0.6569866 ])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.all(data_max == data.max(axis=0))</div><div class="line">True</div></pre></td></tr></table></figure>
<p><code>key words: data.argmax(axis=0), data.max(axis=0)</code></p>
<h4 id="np.ix">np.ix_()</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.array([2,3,4,5])</div><div class="line">&gt;&gt;&gt; b = np.array([8,5,4])</div><div class="line">&gt;&gt;&gt; c = np.array([5,4,6,8,3])</div><div class="line">&gt;&gt;&gt; ax,bx,cx = np.ix_(a,b,c)</div><div class="line">&gt;&gt;&gt; ax</div><div class="line">array(</div><div class="line">[[[2]],</div><div class="line">   [[3]],</div><div class="line">   [[4]],</div><div class="line">   [[5]]])</div><div class="line">&gt;&gt;&gt; bx</div><div class="line">array(</div><div class="line">[[[8],</div><div class="line">    [5],</div><div class="line">    [4]]])</div><div class="line">&gt;&gt;&gt; cx</div><div class="line">array(</div><div class="line">[[[5, 4, 6, 8, 3]]])</div><div class="line">&gt;&gt;&gt; ax.shape, bx.shape, cx.shape</div><div class="line">((4, 1, 1), (1, 3, 1), (1, 1, 5))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(10).reshape(2,5)</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[0, 1, 2, 3, 4],</div><div class="line"> [5, 6, 7, 8, 9]])</div><div class="line"> &gt;&gt;&gt; ixgrid = np.ix_([0,1], [2,4])</div><div class="line"> &gt;&gt;&gt; ixgrid</div><div class="line"> (array([[0],</div><div class="line">          [1]], array([[2, 4]]))</div><div class="line"> &gt;&gt;&gt; ixgrid[0].shape, ixgrid[1].shape</div><div class="line"> ((2,1), (1,2))</div><div class="line"> &gt;&gt;&gt; a[ixgrid]</div><div class="line"> array([[2, 4],</div><div class="line">         [7, 9]])</div></pre></td></tr></table></figure>
<p><code>key words: np.ix_()</code>，可以发现从 ax 到 cx，分别对应 4，3，5。</p>
<h3 id="Shape Manipulation">Shape Manipulation</h3>


<h4 id="Changing the shape">Changing the shape</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.floor(10*np.random.random((3,4)))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[ 2.,  8.,  0.,  6.],</div><div class="line"> [ 4.,  5.,  1.,  1.],</div><div class="line"> [ 8.,  9.,  3.,  6.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a.ravel() # flatten the array</div><div class="line">array([ 2.,  8.,  0.,  6.,  4.,  5.,  1.,  1.,  8.,  9.,  3.,  6.])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a.resize((2,6))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[ 2.,  8.,  0.,  6.,  4.,  5.],</div><div class="line"> [ 1.,  1.,  8.,  9.,  3.,  6.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a.reshape(3,-1) # equal to a.reshape(3, 4)</div><div class="line">array(</div><div class="line">[[ 2.,  8.,  0.,  6.],</div><div class="line"> [ 4.,  5.,  1.,  1.],</div><div class="line"> [ 8.,  9.,  3.,  6.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(30)</div><div class="line">&gt;&gt;&gt; a.shape = 2,-1,3  # -1 means &quot;whatever is needed&quot;</div><div class="line">&gt;&gt;&gt; a.shape</div><div class="line">(2, 5, 3)</div></pre></td></tr></table></figure>
<p><code>key words: ravel, reshape, resize</code></p>
<h4 id="Stacking together">Stacking together</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.floor(10*np.random.random((2,2)))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[ 8.,  8.],</div><div class="line"> [ 0.,  0.]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b = np.floor(10*np.random.random((2,2)))</div><div class="line">&gt;&gt;&gt; b</div><div class="line">array(</div><div class="line">[[ 1.,  8.],</div><div class="line"> [ 0.,  4.]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.vstack((a,b))  # vertical stack</div><div class="line">array(</div><div class="line">[[ 8.,  8.],</div><div class="line"> [ 0.,  0.],</div><div class="line"> [ 1.,  8.],</div><div class="line"> [ 0.,  4.]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.hstack((a,b))  # horizontal stack</div><div class="line">array(</div><div class="line">[[ 8.,  8.,  1.,  8.],</div><div class="line"> [ 0.,  0.,  0.,  4.]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; from numpy import newaxis</div><div class="line">&gt;&gt;&gt; np.column_stack((a,b))   # With 2D arrays, it&apos;s equal to np.hstack((a, b))</div><div class="line">array(</div><div class="line">[[ 8.,  8.,  1.,  8.],</div><div class="line"> [ 0.,  0.,  0.,  4.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.array([4.,2.])  # a.shape = (2,)</div><div class="line">array([4., 2.])</div><div class="line">&gt;&gt;&gt; b = np.array([3.,8.])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[:, newaxis]  # This allows to have a 2D columns vector  a.shape = (2, 1)</div><div class="line">array(</div><div class="line">[[ 4.],</div><div class="line"> [ 2.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.column_stack((a[:,newaxis],b[:,newaxis]))  # equal to np.vstack(a, b)</div><div class="line">array(</div><div class="line">[[ 4.,  3.],</div><div class="line"> [ 2.,  8.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.vstack((a[:,newaxis],b[:,newaxis])) # The behavior of vstack is different</div><div class="line">array(</div><div class="line">[[ 4.],</div><div class="line"> [ 2.],</div><div class="line"> [ 3.],</div><div class="line"> [ 8.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.vstack((a, b))</div><div class="line">array(</div><div class="line">[[ 4.,  2.],</div><div class="line"> [ 3.,  8.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; x = np.arange(0,10,2)  # x=([0,2,4,6,8])</div><div class="line">&gt;&gt;&gt; y = np.arange(5)   # y=([0,1,2,3,4])</div><div class="line">&gt;&gt;&gt; m = np.vstack([x,y])   # m=([[0,2,4,6,8],</div><div class="line">                                   [0,1,2,3,4]])</div><div class="line">&gt;&gt;&gt; xy = np.hstack([x,y])  # xy =([0,2,4,6,8,0,1,2,3,4])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">In complex cases, _r and _c are useful for creating arrays by stacking numbers along one axis. They allow the use of range literals (”:”) :</div><div class="line">&gt;&gt;&gt; np.r_[1:4,0,4]</div><div class="line">array([1, 2, 3, 0, 4])</div></pre></td></tr></table></figure>
<p><code>key words: hstack, vstack, newaxis</code>，注意 Vector 的连接方法。</p>
<h4 id="Splitting">Splitting</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.floor(10*np.random.random((2,12)))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[ 9.,  5.,  6.,  3.,  6.,  8.,  0.,  7.,  9.,  7.,  2.,  7.],</div><div class="line"> [ 1.,  4.,  9.,  2.,  2.,  1.,  0.,  6.,  2.,  2.,  4.,  0.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.hsplit(a,3)   # Split a into 3</div><div class="line">[array(</div><div class="line">[[ 9.,  5.,  6.,  3.],</div><div class="line"> [ 1.,  4.,  9.,  2.]]),</div><div class="line"> array(</div><div class="line"> [[ 6.,  8.,  0.,  7.],</div><div class="line"> [ 2.,  1.,  0.,  6.]]),</div><div class="line"> array(</div><div class="line"> [[ 9.,  7.,  2.,  7.],</div><div class="line"> [ 2.,  2.,  4.,  0.]])]</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.hsplit(a,(3,4))   # Split a after the third and the fourth column</div><div class="line">[array(</div><div class="line">[[ 9.,  5.,  6.],</div><div class="line"> [ 1.,  4.,  9.]]),</div><div class="line"> array(</div><div class="line"> [[ 3.],</div><div class="line"> [ 2.]]),</div><div class="line"> array(</div><div class="line"> [[ 6.,  8.,  0.,  7.,  9.,  7.,  2.,  7.],</div><div class="line"> [ 2.,  1.,  0.,  6.,  2.,  2.,  4.,  0.]])]</div></pre></td></tr></table></figure>
<p><code>key words: hsplit</code></p>
<h4 id="Copy and Views">Copy and Views</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c = a.view()</div><div class="line">&gt;&gt;&gt; c is a</div><div class="line">False</div><div class="line">&gt;&gt;&gt; c.base is a   # c is a view of the data owned by a</div><div class="line">True</div><div class="line">&gt;&gt;&gt; c.flags.owndata</div><div class="line">False</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; c.shape = 2,6    # a&apos;s shape doesn&apos;t change</div><div class="line">&gt;&gt;&gt; a.shape</div><div class="line">(3, 4)</div><div class="line">&gt;&gt;&gt; c[0,4] = 1234    # a&apos;s data changes</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[   0,    1,    2,    3],</div><div class="line"> [1234,    5,    6,    7],</div><div class="line"> [   8,    9,   10,   11]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; d = a.copy()  # a new array object with new data is created</div><div class="line">&gt;&gt;&gt; d is a</div><div class="line">False</div><div class="line">&gt;&gt;&gt; d.base is a   # d doesn&apos;t share anything with a</div><div class="line">False</div><div class="line">&gt;&gt;&gt; d[0,0] = 9999</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[   0,    1,    2,    3],</div><div class="line"> [1234,    5,    6,    7],</div><div class="line"> [   8,    9,   10,   11]])</div></pre></td></tr></table></figure>
<p><code>key words: view, base, copy</code><br><code>view</code> 复制了 data 但不复制 shape，就是原始数据的 view； <code>copy</code> 完全复制一份。</p>
<p>引自<a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="external">官方手册</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.yam.gift/2016/09/19/NumPy/" data-id="cizvdecyg0004p29aubx74bie" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DataScience/">DataScience</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NumPy/">NumPy</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Ubuntu-VirtualBox-Vagrant-questions" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/04/Ubuntu-VirtualBox-Vagrant-questions/" class="article-date">
  <time datetime="2016-09-04T12:59:08.000Z" itemprop="datePublished">2016-09-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Feeling/">Feeling</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/04/Ubuntu-VirtualBox-Vagrant-questions/">Ubuntu16.04 安装 VirtualBox &amp; Vagrant 管理 VirtualBox 各种问题总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Ubuntu-下安装-VirtualBox"><a href="#Ubuntu-下安装-VirtualBox" class="headerlink" title="Ubuntu 下安装 VirtualBox"></a>Ubuntu 下安装 VirtualBox</h2><ul>
<li><a href="http://blog.csdn.net/flm2003/article/details/8168628" target="_blank" rel="external">Ubuntu下轻松安装virtualbox</a></li>
</ul>
<p>注意：  </p>
<ul>
<li>务必要仔细查看用户手册上对系统和必要环境的依赖。</li>
<li>如果 kernel header 不一致，需要更新 kernel：  <ul>
<li><code>sudo apt-get install linux-headers-generic</code> 或者  </li>
<li><code>sudo apt-get install linux-headers-$(uname -r)</code><br><code>uname -r</code> 等于你的版本内核，比如我的：<code>4.4.0-21-generic</code></li>
</ul>
</li>
<li>如果不能<a href="http://askubuntu.com/questions/762136/cannot-reinstall-virtualbox-on-ubuntu-16-04" target="_blank" rel="external">重装VBox</a>，需要修改BIOS设置：  <ul>
<li>Security 中的 Secure Boot 设置为“Disabled” （一般设置这个就可以了吧）</li>
<li>Startup中的 UEFI/Legacy Boot 选 Both</li>
<li>Priority 选 Legacy First，CSM Support 选 Yes<br>包括类似 Surface Pro，都可以这样操作。<br>另外，由于现在的主板很多都带有 UEFI Secure Boot 功能，可能导致使用USB设备启动不了系统。用此方法也可以搞定。<br>参考至： <a href="http://blog.csdn.net/tanaya/article/details/8846779" target="_blank" rel="external">电脑无法从USB启动可能是 UEFI Secure Boot 在捣鬼！</a></li>
</ul>
</li>
</ul>
<h2 id="使用-Vagrant-管理-VirtualBox"><a href="#使用-Vagrant-管理-VirtualBox" class="headerlink" title="使用 Vagrant 管理 VirtualBox"></a>使用 Vagrant 管理 VirtualBox</h2><ul>
<li><a href="http://wp.fungo.me/linux/vagrant-for-programmer-ch1.html" target="_blank" rel="external">Vagrant：程序员的VirtualBox</a>  </li>
</ul>
<p>注意：  </p>
<ul>
<li>如果在 <code>vagrant up</code> 时碰到<a href="https://github.com/lynnaloo/xtuple-vagrant/issues/13" target="_blank" rel="external">VirtualBox is complaining that the kernel module is not loaded</a>，可能需要这个命令：  <ul>
<li><code>sudo /usr/lib/virtualbox/vboxdrv.sh setup</code><br>注意此命令支持Ubuntu15.0，16.0，其他版本不一定支持。  </li>
<li>或者 <code>sudo /etc/init.d/vboxdrv setup</code><br>参见：<a href="https://gist.github.com/geraldvillorente/977d16624e079ba12741" target="_blank" rel="external">vagrant-virtualbox-failed</a>  </li>
</ul>
</li>
<li>如果输入在 <code>vagrant up</code> 时出现以下错误，可能需要重新安装  vagrant，地址在这里：<a href="http://www.vagrantup.com/downloads.html" target="_blank" rel="external">vagrantup</a>   </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ vagrant package</div><div class="line">No usable default provider could be found for your system.  </div><div class="line"></div><div class="line">$ vagrant package --base vagrant-ubuntu64</div><div class="line">Vagrant has detected that you have a version of VirtualBox installed that is not supported by this version of Vagrant.   </div><div class="line">Please install one of the supported versions listed below to use Vagrant: 4.0, 4.1, 4.2, 4.3, 5.0</div></pre></td></tr></table></figure>
<p>   可参考这两个地方：  </p>
<ul>
<li><a href="http://stackoverflow.com/questions/29450437/unable-to-vagrant-up-how-to-set-providers" target="_blank" rel="external">Unable to vagrant up - how to set “providers”</a></li>
<li><a href="https://github.com/mitchellh/vagrant/issues/7578" target="_blank" rel="external">Make Virtualbox 5.1 final version compatible</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.yam.gift/2016/09/04/Ubuntu-VirtualBox-Vagrant-questions/" data-id="cizvdeczc000jp29a8akdb22r" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vagrant/">Vagrant</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VirtualBox/">VirtualBox</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Simpson-Paradox" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/03/Simpson-Paradox/" class="article-date">
  <time datetime="2016-09-03T06:26:49.000Z" itemprop="datePublished">2016-09-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Thinking/">Thinking</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/03/Simpson-Paradox/">辛普森悖论及其哲学思考</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="什么是辛普森悖论"><a href="#什么是辛普森悖论" class="headerlink" title="什么是辛普森悖论"></a>什么是辛普森悖论</h3><p>某个条件下的两组数据，分别讨论时满足某种性质，但合并起来可能导致相反的结论。这就是辛普森悖论。</p>
<p>假设某公司考核员工有个指标叫迟到出错率=（迟到次数+出错次数）/（出勤次数+工作个数），包括出错率和迟到率2个指标。<br>A员工做了5件<strong>重要</strong>工作，出错1件；<br>B员工做了100件<strong>很简单</strong>的小事情，出错21件。<br>A员工出勤100次，迟到29次，每次<strong>1分钟</strong>；<br>B员工出勤10次，迟到9次，每次<strong>2小时</strong>。<br>则：A员工出错率20%，迟到率29%；B员工出错率21%，迟到率90%，如果分别看出错率和迟到率，A员工明显比B员工优秀。<br>那么实际情况呢：A员工迟到出错率30/105；B员工迟到出错率30/110，B员工评分高于A员工。<br>这就是辛普森悖论的典型案例。</p>
<h3 id="为什么会出现辛普森悖论"><a href="#为什么会出现辛普森悖论" class="headerlink" title="为什么会出现辛普森悖论"></a>为什么会出现辛普森悖论</h3><p>1、用相对比例（百分比）衡量结果。换句话说，用相对坐标去描述绝对坐标的情况。<br>常见的例子就是百度Google经常能搜出来的录取比例，女生占比等，比如这篇<a href="http://www.guokr.com/article/6222/" target="_blank" rel="external">辛普森悖论：诡异的男女比例</a>以及维基百科的<a href="https://zh.wikipedia.org/zh-cn/%E8%BE%9B%E6%99%AE%E6%A3%AE%E6%82%96%E8%AE%BA" target="_blank" rel="external">例子</a>。这种例子直接用绝对数值去看就可破解悖论。<br>2、数据本身是由不同部分构成，而这不同部分的权重可能不同。<br>第1点说的常见的例子，其实就是将不同结构的权重按 1:1 进行分配的结果（即A学院，B学院）。<br>我们的案例其实也是这样的，我们做个极端的推理，假设迟到率权重为0，则A员工迟到出错率20%，B员工21%，A员工评分高于B员工。<br>3、除了构成部分本身权重不同外，不同部分的质量也有区别。<br>其实，到了这里，我们已经慢慢在接近本质了。那就是：质与量的矛盾。我们身处一个“评价系统”中，自然选择和进化论就是评价的结果。<br>除了我们熟知的各种数据指标外，还包括我们每一个决策和行为。前者结果非常直观，后者则表现为“命运”。所有的结果都是“物竞天择，适者生存”。这个话题到此为止。  </p>
<p>所以，其实这是通过量对质进行评价过程中的三个层次：<br>第一层：也是最外面的那层，是用相对比例（百分比）表示而造成的结果扭曲；这一层是“显示”出（导致）的错误。<br>第二层：数据不同构成部分“重要性”（权重）不同而造成的结果扭曲；这一层是未考虑“结构”导致的错误。<br>第三层：每个构成部分数据本身的“重要性”不同而造成的结果扭曲；这一层是未考虑“内容”导致的错误。  </p>
<p>综上，我们可以重新定义一下辛普森悖论：<br>人们在对事物的评价过程中，未考虑每组数据本身的重要性以及不同部分数据的结构的“权重”，并采用相对指标对结果进行描述而造成的对真实结果的扭曲的一类现象。  </p>
<p>再扩展一下，上述定义很重要的两个地方：“人们”和“现象”。<br>就是说，评价是以人的某种需求为中心的，需求不同，观察到的“现象”亦不同。<br>这是否让我们想起了薛定谔的那只猫？<br>另外，是什么让“人”进行“评价”？这个过程究竟是有意识的还是无意识的？  </p>
<h3 id="结果应用"><a href="#结果应用" class="headerlink" title="结果应用"></a>结果应用</h3><p>简单来说，辛普森悖论告诉我们，任何时候不能简单地根据数据结果而轻易得出一些看似确定的结论。真正的结论需要我们对分析目的进行深入思考，对数据本身进行深入细致地探索研究后才有可能得出。</p>
<blockquote>
<p>永远对知识充满敬畏。弱小和无知不是生存的障碍，傲慢才是。</p>
</blockquote>
<h3 id="可视化"><a href="#可视化" class="headerlink" title="可视化"></a>可视化</h3><p><a href="http://vudlab.com/simpsons/" target="_blank" rel="external">Simpson’s Paradox</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.yam.gift/2016/09/03/Simpson-Paradox/" data-id="cizvded0r000sp29ac0p4etx4" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SimpsonParadox/">SimpsonParadox</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Statistics/">Statistics</a></li></ul>

    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categorieën</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Coding/">Coding</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Feeling/">Feeling</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Thinking/">Thinking</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Labels</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataClearing/">DataClearing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataScience/">DataScience</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NumPy/">NumPy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SimpsonParadox/">SimpsonParadox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Statistics/">Statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vagrant/">Vagrant</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VirtualBox/">VirtualBox</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/DataClearing/" style="font-size: 10px;">DataClearing</a> <a href="/tags/DataScience/" style="font-size: 20px;">DataScience</a> <a href="/tags/NumPy/" style="font-size: 10px;">NumPy</a> <a href="/tags/Python/" style="font-size: 20px;">Python</a> <a href="/tags/SimpsonParadox/" style="font-size: 10px;">SimpsonParadox</a> <a href="/tags/Statistics/" style="font-size: 10px;">Statistics</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/Vagrant/" style="font-size: 10px;">Vagrant</a> <a href="/tags/VirtualBox/" style="font-size: 10px;">VirtualBox</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/03/04/test/">test</a>
          </li>
        
          <li>
            <a href="/2017/02/15/list-dict-series-dataframe-ndarray-transform/">List, Dict, Array, Series, DataFrame 相互转换</a>
          </li>
        
          <li>
            <a href="/2016/09/19/NumPy/">numpy</a>
          </li>
        
          <li>
            <a href="/2016/09/04/Ubuntu-VirtualBox-Vagrant-questions/">Ubuntu16.04 安装 VirtualBox &amp; Vagrant 管理 VirtualBox 各种问题总结</a>
          </li>
        
          <li>
            <a href="/2016/09/03/Simpson-Paradox/">辛普森悖论及其哲学思考</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Yam<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
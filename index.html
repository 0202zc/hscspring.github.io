<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <meta name="description" content="Feeling, Coding, Thinking" />
  

  
  
  
  
  
  
  <title>Yam</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Feeling, Coding, Thinking">
<meta property="og:type" content="website">
<meta property="og:title" content="Yam">
<meta property="og:url" content="http://www.yam.gift/index.html">
<meta property="og:site_name" content="Yam">
<meta property="og:description" content="Feeling, Coding, Thinking">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Yam">
<meta name="twitter:description" content="Feeling, Coding, Thinking">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  

  
  <!-- baidu webmaster push -->
  <script src='//push.zhanzhang.baidu.com/push.js'></script>
</head>
<body class="home blog custom-background custom-font-enabled single-author">
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="Yam" rel="home">Yam</a>
      </h1>
      
        <h2 class="site-description">
          <a href="/" id="subtitle">From Yam to May</a>
        </h2>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives">Archives</a></li>
                
                </ul>
            </div>
    </nav>
</header>
      <div id="main" class="wrapper">
        <div id="primary" class="site-content"><div id="content" role="main">
  
    <article id="post-2017-09-07-Language-AI-Emotion" class="post-2017-09-07-Language-AI-Emotion post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/09/07/2017-09-07-Language-AI-Emotion/">语言、AI、情感</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="/2017/09/07/2017-09-07-Language-AI-Emotion/#comments" class="leave-reply">Reply</a>
            
            <a href="javascript:void(0);" data-url="http://www.yam.gift/2017/09/07/2017-09-07-Language-AI-Emotion/" data-id="cjfp99izj000grpcalumbthu1" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h2 id="语言的本质"><a href="#语言的本质" class="headerlink" title="语言的本质"></a>语言的本质</h2><p>抽象来看，语言大致可分为描述客观现象和表达主观感受两个方面。<br>观的语言广泛存在于世间，从人类到动物，到植物、化学元素都有自己的『语言』，它们通过特定的语言向外传达一种『信息』，而这种信息被人类加工后成为『知识』。<br>而人类或其他高等动物之所以特殊是因为他们能表达自己的感受，他们有喜怒哀乐，有七情六欲，他们对万事万物有自己的认识。也许可以称之为『情感』，或许是『意识』。<br>由于语言有多种，个人主观方面又大不相同，所以当人与人沟通时经常会信息不对称，导致沟通障碍。而同样的东西、同一件事物，不同的人看到的也会不尽相同。<br>所以，有时候与其说是语言的魅力，不如说是人类主观的魅力、意识的魅力。譬如『如果你认识以前的我，也许你就会原谅现在的我』，大多数人可能会觉得这句话和有意境，觉得写的很好。为什么？也许从信息的角度来看，它高度抽象描述了大量的客观现象，但我想更多地是因为它勾起了你心中的一点点涟漪，或者引起了你一点点的共鸣。<br>再比如 “他死了，她也死了” 和 “他死了，她伤心而死”。从信息论（效率）角度而言第一句更容易记住，因为它短，但人们更能记住第二句，因为它有 “情感”。所以，我们其实关注的并不是信息本身，而是信息所附加的、能引起我们心灵触动的、能带给我们思考的东西。<br>所以，语言我更倾向于把它当做人类表达自身情感的一种方式。至于记录客观世界，其实完全可以通过其他方式，比如数学公式、物理公式…… 而语言的本质或者核心其实是『情感』，是『意识』的产物。</p>
<h2 id="Hi-AI"><a href="#Hi-AI" class="headerlink" title="Hi, AI"></a>Hi, AI</h2><p>以前提起 AI，有人把它想的特别厉害，好像无所不能；也有人觉得现实中根本不会出现真正的 AI，因为机器无法产生意识。<br>到近些年，这个画风已经逐渐转变，人们谈论更多的是 AI 与人类的关系，比如如何影响我们的工作和生活，比如伦理道德的边界等等。也就是说科技界已经基本公认 AI 能达到并且超越人类智能，所以讨论如何共存的问题。<br>这中间包括现在还有一种争论是 AI 与 IA，分别是人工智能和智能增强。前者认为人类应该创造真正的和人类一样甚至超越人类的人工智能；后者认为人工智能应该作为增强人类能力、拓展人类边界的工具，应该为人类服务。其实，两者也可以不冲突，把 AI 看做新的物种，它可以比人类强亿万倍，但完全没必要拥有所谓的『意识』，或者『情感』。对 AI 来说，他们之间完全可以构成另一个社会，与人类是否延续并无多少关联。<br>当然，就目前而言说这些还为时尚早。现在的 AI 在很多方面确实已经超越了人类，比如计算、存储，但更多方面还无法与人类相提并论，尤其是涉及高级认知领域，比如抽象、推理。我们没有提情感和意识，正是因为我们没有提对 AI 的定位。如果我们倾向于 IA，倾向于创造能够理解和感受人类的 AI，那么情感和意识可能成为最重要的特质。<br>因此，我们要讨论的主要是与能够理解和感受人类的 AI 的沟通问题。具体而言，就是在现有的技术条件下，如何实现与 AI 的情感沟通。</p>
<blockquote>
<p>其实，就对人类而言 IA 更加合适，因为它更加侧重与人交互，借助机器的效率和人类的情感实现人类整体效用最大。而对 AI，我一直觉得是另一种物种的存在，人之所以是人，就因为他是一个 “系统”，人类会犯错，很多时候不理智，也会生病，会死亡。可是人工智能不会，所以无论他再怎么智能，那也不是人，也许，将来会成为超越人类的另一个物种。不难理解为什么那么多牛人抵触人工智能，但抵触有什么用。物竞天择，适者生存。若干年后，未必会有人类…</p>
</blockquote>
<h2 id="情感机器"><a href="#情感机器" class="headerlink" title="情感机器"></a>情感机器</h2><p>自从深度学习突破语音和图像以来，自然语言就成为下一个要攻克的难点。几个月间研究数量急剧增加，几乎每周都有新的成果出现。这里就有一个问题，为什么自然语言处理这么困难？  </p>
<p>要回答这个问题，我们得首先了解一下机器是怎么识别输入的，也就是机器怎么与人沟通。<br>图像是由不同颜色的像素点构成的，而像素点的本质其实是向量，比如目前通用的 RGB 标准，分别代表红色、绿色和蓝色，三种颜色可以组合成为各种各样的颜色和亮度。所以图像在进入计算机后其实是表示成向量或矩阵的形式。这样我们看到的五颜六色的图片，在计算机里只是不同的数字而已。声音的原理类似，音频频谱序列可以表示为矩阵。大家可能已经发现了，图像和声音在本质上其实都可以表示成数字，且这种表示方法能够涵盖几乎所有的图片和声音。而语言文字在这方面就非常困难了，尽管有大神发明了词向量，但由于人类的语言不通用，也就是说我们暂时没办法只用一套词向量描述所有的语言文字；而且词向量来自训练语料，并不像图像和声音一样有通用的编码方式。<br>我们再看一个稍微居中点的例子——乐谱。我想音乐大概是目前世界上唯一通用的『语言』，无论何时何地，我们都能用五线谱表示出所有听到的乐曲。假设地球上只有五线谱这一种语言，那计算机也一样能很好地识别。</p>
<p>对于这个难题，现在全世界的 AI 团队都在钻研，我们从 AI 理解和感受人类的角度探讨一下这个问题。这个问题又可以分为两个角度：机器对人类语言含义的理解；机器对人类动作行为的理解。后者非常类似图像识别问题，比如微表情识别，放大到全身，那就是微动作识别，任何一个微小的举动，都已经可以被机器识别出来。  </p>
<p>所以我们重点说机器理解语义的问题。其实就目前的研究来看，在大规模语料支持下，我们已经能够找到足够好的词向量表示文字，跨语言沟通的问题有端对端模型可以实现很好的「翻译」。简单来说，只要在足够的数据和计算力支持下，目前的机器可以理解人类用任何语言说的话。当然，我们心里清楚，机器的所谓理解是站在机器的角度（0 和 1），他能理解人类的意思，并不代表他就是人类。举个不太恰当的例子，这就好像我们理解细菌的传播方式，但我们并不是细菌一样。他可能还会有七情六欲，你甚至可以理解为他就是假装出来的，他自己就是没感觉，但在他表现出来的那一刻，你又怎么知道他到底是怎么想的？注意到刚刚这句话，有几个词的本质和边界其实是非常不明确的，比如「感觉」、「想」。我们的感觉和想可能也是神经网络中电信号刺激的反应，那机器呢？抽象来看他也是对一系列「外界事物」的刺激和反应。这样看，机器和人的区别在哪儿？是意识吗？不知道，我们不知道机器是不是能够自己意识到这一切。<br>现在我们从另一个方面来看。机器看到「世界」的根本方法是 0 和 1，也就是是和否。那人类呢？事实上，我们在现实世界中面临的许多问题可以看作是分类问题，尤其是客观世界的客观情况，比如物种的分类、事件的分类等等，而分类问题本质上就是 01 问题，是或者否的问题。特别不确定的是对未来的预测问题，多种可能组成了一系列「可能」状态，只能用概率分布来描述。我可能不经意间想到了薛定谔的猫，世间万物不过是不同对象观测下的映像。每个人基于自己当前的认知（先见之明）看到了不一样的世界，对同一事物有了不一样的看法和理解，你以为你看到的是真的？不不不，都没有人知道什么是「真的」。也许真理就在那里，我们只是不停地在逼近它；也许根本就没有真理，一切都是不确定的，随着我们对事物了解的深入，我们对它可能的变化就有了更深层次的理解。在概率的世界中，前者一定程度上可以看成是频率学派，而后者则是贝叶斯学派：对可能性的判断基于你有多大信心愿意相信它可能发生。所以，从这个角度来看，机器要理解人类则必须改变他们「看」世界的方式。  </p>
<p>综合一下，如果机器能够改变他们处理数据的方式，并在大规模语料的支持下去拟合现实世界，我认为他是可以「理解」人类的，当然这个「理解」可能和人与人之间的「理解」并不相同。但这没关系，他不在乎，我们可以假装不在乎。除此之外，还有一种可能是破解意识，然后破解语言密码。  </p>
<p>我并不排斥有一天情感机器会像今天的电脑、手机一样普及，我甚至觉得人工智能一定会成为新的物种与人类共存。到那时，我们需要考虑的可能不是接不接受的问题，而是怎么接受的问题。  </p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/09/07/2017-09-07-Language-AI-Emotion/">
    <time datetime="2017-09-07T05:00:00.000Z" class="entry-date">
        2017-09-07
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Thinking/">Thinking</a>
  </div>

    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AI/">AI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NLP/">NLP</a></li></ul>

    </footer>
</article>






  
    <article id="post-2017-08-31-diary" class="post-2017-08-31-diary post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/08/31/2017-08-31-diary/">随笔：人生，当有所为有所不为</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="/2017/08/31/2017-08-31-diary/#comments" class="leave-reply">Reply</a>
            
            <a href="javascript:void(0);" data-url="http://www.yam.gift/2017/08/31/2017-08-31-diary/" data-id="cjfp99ize0009rpcadc5cxnrb" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>是夜，阴沉天空，淅淅沥沥的小雨，落到了地上，没入了尘埃。<br>空旷的房间，通明的白织灯下，桌上一罐哈啤，一罐纯净水，耳边响着最爱的史诗乐。<br>回想近日之事，一时竟感慨万千，内心色彩斑斓。</p>
<p>人的一生会遇到许许多多的事，会交到许许多多的朋友，你永远无法预测明天会发生什么，下一秒将会认识谁。但是，总有些事、总有些人，会让你的人生泛起涟漪、波澜。<br>有些事，能让你认清一个人；有些人，能让你知道一件事。</p>
<p>我们生活在这个世界，物欲横流、欲壑难填。<br>每个人都想任性地活，想要想尽一切办法满足自己不断膨胀的私欲。<br>我们以为这是自由，这是活出自己，这是人生的精彩。<br>但却忘记了什么是责任，什么是担当，什么是本分。<br>忘记了克己修身，忘记了每日三省，忘记了拷问良心。也许从未有过。</p>
<p>任性过后，还剩下什么？还能剩下什么？<br>人生在世，当有所为有所不为，大丈夫立于天地间更应如此。<br>忍让不是天生懦弱，关心不是精力过剩，<br>然而我们总是看不到这些或者习惯了如此，一次次用所谓的个性去刺向那呵护着自己的外壳。<br>人性本如此。</p>
<p>感受周边人群，与日俱增的寂寞和空虚，让人不得不想方设法去寻找释放的窗口。<br>同样寂寞空虚的人遇到了一起，生产出更多的寂寞空虚，以及一些私欲，泛滥成灾。<br>然后，终日活在这样的世界，通过感官上的各种刺激才知道自己还，活着。</p>
<p>谈使命，说使命太虚；谈梦想，说梦想太空。<br>浑浑噩噩度过一天一天，一年一年，接着是一生。</p>
<p>做人，该当知轻重，明对错。<br>然后，去做一个有品性、有道德的人。<br>这样的你也会是一个三观正、人品赞的人。<br>扪心自问，你是吗？</p>
<p>后记：发现自己慢慢喜欢上在这种环境下用键盘缓缓抒发自己内心的情感，就好像一篇娓娓道来的故事，好像一副徐徐展开的画卷，好像一首缓缓奏起的乐章。随着文章终了，内心的情感渐渐平复，由内而外不再充满戾气，不再焦躁不安，不再五味陈杂。</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/08/31/2017-08-31-diary/">
    <time datetime="2017-08-31T14:00:00.000Z" class="entry-date">
        2017-08-31
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Thinking/">Thinking</a>
  </div>

    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Diary/">Diary</a></li></ul>

    </footer>
</article>






  
    <article id="post-2017-04-09-NLPKnowledgeTree" class="post-2017-04-09-NLPKnowledgeTree post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/04/09/2017-04-09-NLPKnowledgeTree/">自然语言处理（NLP）知识地图</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="/2017/04/09/2017-04-09-NLPKnowledgeTree/#comments" class="leave-reply">Reply</a>
            
            <a href="javascript:void(0);" data-url="http://www.yam.gift/2017/04/09/2017-04-09-NLPKnowledgeTree/" data-id="cjfp99izi000erpcal83nkzgv" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h1><p> </p><p><div class="lev1 toc-item"><a href="#什么是-NLP" data-toc-modified-id="什么是-NLP-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>什么是 NLP</a></div><div class="lev1 toc-item"><a href="#NLP-有什么用？" data-toc-modified-id="NLP-有什么用？-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>NLP 有什么用？</a></div><div class="lev1 toc-item"><a href="#NLP-要学什么" data-toc-modified-id="NLP-要学什么-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>NLP 要学什么</a></div><div class="lev1 toc-item"><a href="#深度学习与-NLP" data-toc-modified-id="深度学习与-NLP-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>深度学习与 NLP</a></div><div class="lev1 toc-item"><a href="#扩展阅读" data-toc-modified-id="扩展阅读-5"><span class="toc-item-num">5&nbsp;&nbsp;</span>扩展阅读</a></div><div class="lev1 toc-item"><a href="#参考资料" data-toc-modified-id="参考资料-6"><span class="toc-item-num">6&nbsp;&nbsp;</span>参考资料</a></div></p>
<h1 id="什么是-NLP"><a href="#什么是-NLP" class="headerlink" title="什么是 NLP"></a>什么是 NLP</h1><p>计算机领域中自然语言处理（Natural Language Processing: NLP）的目的，就是让计算机能够理解和生成人类语言。  </p>
<ul>
<li>自然语言处理是一门交叉学科，包括计算机科学，人工智能和语言学</li>
<li>目标：让计算机去处理或“理解”自然语言, 完成一些有用的任务例如问答系统，机器翻译</li>
<li>完全理解或者表示语言的意义（甚至去定义它）都是一个虚幻的目标</li>
<li>完美的理解语言是一个“<a href="https://en.wikipedia.org/wiki/AI-complete" target="_blank" rel="external">AI-complete</a>”的问题</li>
</ul>
<h1 id="NLP-有什么用？"><a href="#NLP-有什么用？" class="headerlink" title="NLP 有什么用？"></a>NLP 有什么用？</h1><ul>
<li>拼写检查</li>
<li>同义词查找&amp;替换</li>
</ul>
<ul>
<li>文本分类与情感分析<ul>
<li>例如对教科书的文本进行分级，对长文本进行正负情绪判断</li>
<li>市场营销或者金融交易领域的情感分析</li>
</ul>
</li>
</ul>
<ul>
<li>信息检索与问答系统</li>
</ul>
<ul>
<li>关键词、信息提取<ul>
<li>从网页中提取有用的信息例如产品价格，日期，地址，人名或公司名等</li>
</ul>
</li>
<li>自动文摘</li>
<li>自动写作</li>
</ul>
<ul>
<li>机器翻译</li>
<li>语音翻译</li>
</ul>
<ul>
<li>语音识别</li>
<li>人机对话</li>
</ul>
<ul>
<li>……</li>
</ul>
<h1 id="NLP-要学什么"><a href="#NLP-要学什么" class="headerlink" title="NLP 要学什么"></a>NLP 要学什么</h1><ul>
<li><a href="https://zh.wikipedia.org/zh-hans/%E8%AF%AD%E8%A8%80%E5%AD%A6" target="_blank" rel="external">语言学</a><ul>
<li>语言学是研究所有人类语文发展有关的一门学术科目（通常只有根据语言，非文字）。</li>
<li>语言学研究句法和词语等语言的描述，也研究语言的发展史。</li>
</ul>
</li>
<li><a href="https://zh.wikipedia.org/zh-hans/%E8%AF%AD%E9%9F%B3%E5%AD%A6" target="_blank" rel="external">语音学</a><ul>
<li>发音语音学</li>
<li>声学语音学</li>
<li>听觉语音学</li>
</ul>
</li>
<li>概率论<ul>
<li>贝叶斯</li>
<li>马尔科夫</li>
</ul>
</li>
<li>信息论<ul>
<li>香农、熵</li>
</ul>
</li>
<li>机器学习</li>
<li>形式语言与自动机<ul>
<li>形式语言包括：短语结构语言、上下文有关语言、上下文无关语言、正则语言等</li>
<li>自动机包括：图灵机、有穷自动机、下推自动机、线性有界自动机</li>
</ul>
</li>
<li>语言知识库</li>
<li>语言模型<ul>
<li>n 元语法</li>
<li>数据平滑</li>
</ul>
</li>
<li>自动分词、命名实体识别、词性标注<ul>
<li>自动分词就是让计算机自动区分出汉字组成的词语</li>
<li>命名实体识别就是分词之后能够根据各种短语形式判断出哪个词表示的是一个物体或组织或人名或……</li>
<li>词性标注就是在给定句子中判定每个词的语法范畴，识别出“名动形、数量代、副介连助叹拟声”</li>
</ul>
</li>
<li>句法分析<ul>
<li>确定句子的句法结构或句子中词汇之间的依存关系</li>
<li>句法结构分析</li>
<li>依存关系分析：词与词之间的依存关系</li>
</ul>
</li>
<li>语义分析<ul>
<li>词义消歧</li>
<li>语义角色标注</li>
</ul>
</li>
<li>篇章分析<ul>
<li>理解篇章</li>
<li>分析篇章结构</li>
</ul>
</li>
</ul>
<h1 id="深度学习与-NLP"><a href="#深度学习与-NLP" class="headerlink" title="深度学习与 NLP"></a>深度学习与 NLP</h1><ul>
<li>神经网络语言模型</li>
<li>卷积神经网络 CNN</li>
<li>词向量<ul>
<li>localist representation 与 distributed representation</li>
<li>word embedding</li>
</ul>
</li>
<li>word2vec<ul>
<li>基于霍夫曼树的 Hierarchical Softmax 技术</li>
<li>基于 Negative Sampling 的模型</li>
</ul>
</li>
<li>递归神经网络 RNN<ul>
<li>LSTM</li>
</ul>
</li>
</ul>
<h1 id="扩展阅读"><a href="#扩展阅读" class="headerlink" title="扩展阅读"></a>扩展阅读</h1><ul>
<li><a href="https://arxiv.org/pdf/1404.7828.pdf" target="_blank" rel="external">Deep Learning in Neural Networks: An Overview</a></li>
<li><a href="http://www.52nlp.cn/%E6%96%AF%E5%9D%A6%E7%A6%8F%E5%A4%A7%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B8%8E%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AC%AC%E4%B8%80%E8%AE%B2%E5%BC%95%E8%A8%80" target="_blank" rel="external">斯坦福大学深度学习与自然语言处理</a><ul>
<li><a href="http://cs224d.stanford.edu/index.html" target="_blank" rel="external">Stanford University CS224d: Deep Learning for Natural Language Processing</a></li>
</ul>
</li>
<li><a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/ICASSP_DeepTextLearning_v07.pdf" target="_blank" rel="external">PowerPoint Presentation - ICASSP_DeepTextLearning</a></li>
</ul>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li><a href="https://book.douban.com/subject/25746399/" target="_blank" rel="external">统计自然语言处理（第2版）</a></li>
<li><a href="https://github.com/warmheartli/ChatBotCourse" target="_blank" rel="external">warmheartli/ChatBotCourse</a></li>
</ul>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/04/09/2017-04-09-NLPKnowledgeTree/">
    <time datetime="2017-04-09T10:00:00.000Z" class="entry-date">
        2017-04-09
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DeepLearning/">DeepLearning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NLP/">NLP</a></li></ul>

    </footer>
</article>






  
    <article id="post-2017-03-05-Pandas" class="post-2017-03-05-Pandas post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/03/05/2017-03-05-Pandas/">Pandas 入门</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="/2017/03/05/2017-03-05-Pandas/#comments" class="leave-reply">Reply</a>
            
            <a href="javascript:void(0);" data-url="http://www.yam.gift/2017/03/05/2017-03-05-Pandas/" data-id="cjfp99izd0007rpcaxolpdvzk" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h1><p> </p><p><div class="lev1 toc-item"><a href="#Pandas-数据结构入门" data-toc-modified-id="Pandas-数据结构入门-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>Pandas 数据结构入门</a></div><div class="lev2 toc-item"><a href="#Series" data-toc-modified-id="Series-11"><span class="toc-item-num">1.1&nbsp;&nbsp;</span>Series</a></div><div class="lev2 toc-item"><a href="#DataFrame" data-toc-modified-id="DataFrame-12"><span class="toc-item-num">1.2&nbsp;&nbsp;</span>DataFrame</a></div><div class="lev2 toc-item"><a href="#索引对象" data-toc-modified-id="索引对象-13"><span class="toc-item-num">1.3&nbsp;&nbsp;</span>索引对象</a></div><div class="lev1 toc-item"><a href="#重新索引：reindex" data-toc-modified-id="重新索引：reindex-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>重新索引：reindex</a></div><div class="lev1 toc-item"><a href="#从一个坐标轴删除条目" data-toc-modified-id="从一个坐标轴删除条目-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>从一个坐标轴删除条目</a></div><div class="lev2 toc-item"><a href="#索引，挑选和过滤" data-toc-modified-id="索引，挑选和过滤-31"><span class="toc-item-num">3.1&nbsp;&nbsp;</span>索引，挑选和过滤</a></div><div class="lev3 toc-item"><a href="#使用标签选取数据" data-toc-modified-id="使用标签选取数据-311"><span class="toc-item-num">3.1.1&nbsp;&nbsp;</span>使用标签选取数据</a></div><div class="lev3 toc-item"><a href="#使用位置选取数据" data-toc-modified-id="使用位置选取数据-312"><span class="toc-item-num">3.1.2&nbsp;&nbsp;</span>使用位置选取数据</a></div><div class="lev2 toc-item"><a href="#算术运算" data-toc-modified-id="算术运算-32"><span class="toc-item-num">3.2&nbsp;&nbsp;</span>算术运算</a></div><div class="lev3 toc-item"><a href="#广播" data-toc-modified-id="广播-321"><span class="toc-item-num">3.2.1&nbsp;&nbsp;</span>广播</a></div><div class="lev1 toc-item"><a href="#文件操作" data-toc-modified-id="文件操作-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>文件操作</a></div><div class="lev1 toc-item"><a href="#基本运算" data-toc-modified-id="基本运算-5"><span class="toc-item-num">5&nbsp;&nbsp;</span>基本运算</a></div><div class="lev1 toc-item"><a href="#常用操作" data-toc-modified-id="常用操作-6"><span class="toc-item-num">6&nbsp;&nbsp;</span>常用操作</a></div><div class="lev2 toc-item"><a href="#排序" data-toc-modified-id="排序-61"><span class="toc-item-num">6.1&nbsp;&nbsp;</span>排序</a></div><div class="lev2 toc-item"><a href="#重命名列" data-toc-modified-id="重命名列-62"><span class="toc-item-num">6.2&nbsp;&nbsp;</span>重命名列</a></div><div class="lev2 toc-item"><a href="#设置索引" data-toc-modified-id="设置索引-63"><span class="toc-item-num">6.3&nbsp;&nbsp;</span>设置索引</a></div><div class="lev2 toc-item"><a href="#重设索引" data-toc-modified-id="重设索引-64"><span class="toc-item-num">6.4&nbsp;&nbsp;</span>重设索引</a></div><div class="lev2 toc-item"><a href="#查看最大最小值" data-toc-modified-id="查看最大最小值-65"><span class="toc-item-num">6.5&nbsp;&nbsp;</span>查看最大最小值</a></div><div class="lev2 toc-item"><a href="#改变数据类型" data-toc-modified-id="改变数据类型-66"><span class="toc-item-num">6.6&nbsp;&nbsp;</span>改变数据类型</a></div><div class="lev2 toc-item"><a href="#计算-Series-每个值的频率" data-toc-modified-id="计算-Series-每个值的频率-67"><span class="toc-item-num">6.7&nbsp;&nbsp;</span>计算 Series 每个值的频率</a></div><div class="lev1 toc-item"><a href="#DataFrame-的合并" data-toc-modified-id="DataFrame-的合并-7"><span class="toc-item-num">7&nbsp;&nbsp;</span>DataFrame 的合并</a></div><div class="lev2 toc-item"><a href="#Concat" data-toc-modified-id="Concat-71"><span class="toc-item-num">7.1&nbsp;&nbsp;</span>Concat</a></div><div class="lev2 toc-item"><a href="#Merge" data-toc-modified-id="Merge-72"><span class="toc-item-num">7.2&nbsp;&nbsp;</span>Merge</a></div><div class="lev2 toc-item"><a href="#Groupby" data-toc-modified-id="Groupby-73"><span class="toc-item-num">7.3&nbsp;&nbsp;</span>Groupby</a></div><div class="lev1 toc-item"><a href="#透视表" data-toc-modified-id="透视表-8"><span class="toc-item-num">8&nbsp;&nbsp;</span>透视表</a></div><div class="lev2 toc-item"><a href="#pivot_table" data-toc-modified-id="pivot_table-81"><span class="toc-item-num">8.1&nbsp;&nbsp;</span>pivot_table</a></div><div class="lev2 toc-item"><a href="#crosstab" data-toc-modified-id="crosstab-82"><span class="toc-item-num">8.2&nbsp;&nbsp;</span>crosstab</a></div><div class="lev1 toc-item"><a href="#时间序列分析" data-toc-modified-id="时间序列分析-9"><span class="toc-item-num">9&nbsp;&nbsp;</span>时间序列分析</a></div><div class="lev1 toc-item"><a href="#参考网站" data-toc-modified-id="参考网站-10"><span class="toc-item-num">10&nbsp;&nbsp;</span>参考网站</a></div></p>
<p>Pandas 建造在 NumPy 之上，它使得以 NumPy 为中心的应用很容易使用。</p>
<p>由于 Hexo 对 Pandas 输出的表格支持不好，详细内容可点击：<a href="https://github.com/hscspring/DataScience/blob/master/DataClearing/Pandas.ipynb" target="_blank" rel="external">https://github.com/hscspring/DataScience/blob/master/DataClearing/Pandas.ipynb</a></p>
<h2 id="参考网站"><a href="#参考网站" class="headerlink" title="参考网站"></a>参考网站</h2><ul>
<li><a href="http://cloga.info/python/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/2013/09/17/pandasintro" target="_blank" rel="external">Cloga 的互联网笔记 </a>大神～</li>
<li><a href="http://pda.readthedocs.io/en/latest/chp5.html" target="_blank" rel="external">Python For Data Analysis 0.1</a></li>
</ul>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/03/05/2017-03-05-Pandas/">
    <time datetime="2017-03-05T10:00:00.000Z" class="entry-date">
        2017-03-05
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DataScience/">DataScience</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Pandas/">Pandas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
</article>






  
    <article id="post-2017-03-05-Python-encode-decode" class="post-2017-03-05-Python-encode-decode post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/03/05/2017-03-05-Python-encode-decode/">Python 编码笔记整理</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="/2017/03/05/2017-03-05-Python-encode-decode/#comments" class="leave-reply">Reply</a>
            
            <a href="javascript:void(0);" data-url="http://www.yam.gift/2017/03/05/2017-03-05-Python-encode-decode/" data-id="cjfp99izf000brpca7db5wj96" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h1><p> </p><p><div class="lev1 toc-item"><a href="#Python-中文编码" data-toc-modified-id="Python-中文编码-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>Python 中文编码</a></div><div class="lev2 toc-item"><a href="#字符串和编码" data-toc-modified-id="字符串和编码-11"><span class="toc-item-num">1.1&nbsp;&nbsp;</span>字符串和编码</a></div><div class="lev2 toc-item"><a href="#存储和执行时的状态" data-toc-modified-id="存储和执行时的状态-12"><span class="toc-item-num">1.2&nbsp;&nbsp;</span>存储和执行时的状态</a></div><div class="lev2 toc-item"><a href="#Python-字符串" data-toc-modified-id="Python-字符串-13"><span class="toc-item-num">1.3&nbsp;&nbsp;</span>Python 字符串</a></div><div class="lev3 toc-item"><a href="#encode" data-toc-modified-id="encode-131"><span class="toc-item-num">1.3.1&nbsp;&nbsp;</span><code>encode</code></a></div><div class="lev3 toc-item"><a href="#decode" data-toc-modified-id="decode-132"><span class="toc-item-num">1.3.2&nbsp;&nbsp;</span><code>decode</code></a></div><div class="lev3 toc-item"><a href="#str" data-toc-modified-id="str-133"><span class="toc-item-num">1.3.3&nbsp;&nbsp;</span><code>str</code></a></div><div class="lev3 toc-item"><a href="#type" data-toc-modified-id="type-134"><span class="toc-item-num">1.3.4&nbsp;&nbsp;</span><code>type</code></a></div><div class="lev1 toc-item"><a href="#实际程序中的编码" data-toc-modified-id="实际程序中的编码-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>实际程序中的编码</a></div><div class="lev2 toc-item"><a href="#Python-源代码中的说明" data-toc-modified-id="Python-源代码中的说明-21"><span class="toc-item-num">2.1&nbsp;&nbsp;</span>Python 源代码中的说明</a></div><div class="lev2 toc-item"><a href="#要循环处理字符串的时候需要解码" data-toc-modified-id="要循环处理字符串的时候需要解码-22"><span class="toc-item-num">2.2&nbsp;&nbsp;</span>要循环处理字符串的时候需要解码</a></div><div class="lev2 toc-item"><a href="#字符匹配的时候需要解码" data-toc-modified-id="字符匹配的时候需要解码-23"><span class="toc-item-num">2.3&nbsp;&nbsp;</span>字符匹配的时候需要解码</a></div><div class="lev2 toc-item"><a href="#结巴分词" data-toc-modified-id="结巴分词-24"><span class="toc-item-num">2.4&nbsp;&nbsp;</span>结巴分词</a></div><div class="lev3 toc-item"><a href="#jieba-分词后词语变为-unicode-编码" data-toc-modified-id="jieba-分词后词语变为-unicode-编码-241"><span class="toc-item-num">2.4.1&nbsp;&nbsp;</span>jieba 分词后词语变为 unicode 编码</a></div><div class="lev3 toc-item"><a href="#去掉标点符号" data-toc-modified-id="去掉标点符号-242"><span class="toc-item-num">2.4.2&nbsp;&nbsp;</span>去掉标点符号</a></div><div class="lev1 toc-item"><a href="#读存文档时的编码" data-toc-modified-id="读存文档时的编码-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>读存文档时的编码</a></div><div class="lev2 toc-item"><a href="#读取文档注意事项" data-toc-modified-id="读取文档注意事项-31"><span class="toc-item-num">3.1&nbsp;&nbsp;</span>读取文档注意事项</a></div><div class="lev2 toc-item"><a href="#txt-文档" data-toc-modified-id="txt-文档-32"><span class="toc-item-num">3.2&nbsp;&nbsp;</span>txt 文档</a></div><div class="lev2 toc-item"><a href="#codecs" data-toc-modified-id="codecs-33"><span class="toc-item-num">3.3&nbsp;&nbsp;</span><code>codecs</code></a></div><div class="lev2 toc-item"><a href="#JSON" data-toc-modified-id="JSON-34"><span class="toc-item-num">3.4&nbsp;&nbsp;</span><code>JSON</code></a></div><div class="lev2 toc-item"><a href="#直接存储-Unicode" data-toc-modified-id="直接存储-Unicode-35"><span class="toc-item-num">3.5&nbsp;&nbsp;</span>直接存储 Unicode</a></div><div class="lev2 toc-item"><a href="#直接存储-String" data-toc-modified-id="直接存储-String-36"><span class="toc-item-num">3.6&nbsp;&nbsp;</span>直接存储 String</a></div><div class="lev1 toc-item"><a href="#参考资料" data-toc-modified-id="参考资料-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>参考资料</a></div></p>
<h1 id="Python-中文编码"><a href="#Python-中文编码" class="headerlink" title="Python 中文编码"></a>Python 中文编码</h1><p>Python 中文编码是新人常见的一个问题，其实这是一个涉及到 Python 字符串、编码、IO 读写等方面的问题。</p>
<h2 id="字符串和编码"><a href="#字符串和编码" class="headerlink" title="字符串和编码"></a>字符串和编码</h2><p>计算机只能处理数字，文本需要转为数字。最早的计算机采用 8 个 bit（比特，计算机最小数据单位） 作为一个 byte（字节，存储和传输容量的一种基本计量单位）。所以一个字节表示的最大整数是 255（二进制：11111111 = 十进制 255：2^7 + 2^6 +…+ 2^1 +2^0），更大整数需要更多字节。</p>
<p>最早只有 127 个字母（英文的大小写字母和数字，一些符号等）被编码到计算机，这个编码表就是 <code>ASCII</code>，没有中文。<br>中文至少需要两个字节，并且不能和已有的 <code>ASCII</code> 冲突，于是有了中国制定的 <code>GB2312</code> 编码，用来把中文编进去。  </p>
<p>全世界很多语言，就会有很多编码，因此 <code>Unicode</code> 就出现了，从字面意思也可以看出这是一套“整合”的编码。不过由于中文等语言编码长度很长，就会导致只使用英文的文本多占用很多存储空间，在存储和传输上十分不方便。于是，出现了把 Unicode 转化为“可变长编码”的 <code>UTF-8</code> 编码。</p>
<p><code>UTF-8</code> 编码把一个 Unicode 字符根据不同的数字大小编码成 1-6 个字节：  </p>
<ul>
<li>英文字母 1 个字节</li>
<li>汉字通常 3 个字节<br>这样，无论传输什么文本，<code>UTF-8</code> 都能节省空间。总结下就是，<code>ASCII</code> 实际可以看成是 <code>UTF-8</code> 的一部分，所以之前的软件现在也能使用，这个也可以看作是一种向下兼容。</li>
</ul>
<h2 id="存储和执行时的状态"><a href="#存储和执行时的状态" class="headerlink" title="存储和执行时的状态"></a>存储和执行时的状态</h2><p>在计算机内存中，统一使用 Unicode 编码；当需要保存到硬盘，或者在网络上传输时，就转为 UTF-8 编码  </p>
<p>记事本编辑时，从文件读取的 UTF-8 字符被转为 Unicode 字符到内存里；编辑完成保存时，把 Unicode 转换为 UTF-8 保存  </p>
<p>浏览网页时，服务器会把生成的 Unicode 转换为 UTF-8 再传输导浏览器，所以很多网页是用 UTF-8 编码的</p>
<h2 id="Python-字符串"><a href="#Python-字符串" class="headerlink" title="Python 字符串"></a>Python 字符串</h2><p>Python 诞生早于 Unicode 标准发布，所以最早只支持 ASCII 编码（不支持中文），后来增加了对 Unicode 的编码，就是看到的 <code>u&#39;...&#39;</code>，就表示是用 Unicode 编码的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> <span class="string">u'中文'</span></div></pre></td></tr></table></figure>
<pre><code>中文
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">u'中'</span></div></pre></td></tr></table></figure>
<pre><code>u&apos;\u4e2d&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">u'A'</span></div></pre></td></tr></table></figure>
<pre><code>u&apos;A&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">u'\u0041'</span></div></pre></td></tr></table></figure>
<pre><code>u&apos;A&apos;
</code></pre><p><code>u&#39;中&#39;</code> 和 <code>u&#39;\u4e2d&#39;</code> 一致，<code>\u</code> 后面是十六进制的 Unicode 码。  </p>
<p>对英文来说，字符串 <code>&#39;xxx&#39;</code> 可以看作是 ASCII 编码，也可以看作是 UTF-8 编码，但是 <code>u&#39;xxx&#39;</code> 一定是 Unicode 编码  </p>
<p>Unicode 转换为 UTF-8 用 encode，相反则用 decode：  </p>
<h3 id="encode"><a href="#encode" class="headerlink" title="encode"></a><code>encode</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">u'ABC'</span>.encode(<span class="string">'utf-8'</span>) <span class="comment"># 没变化，但占用的存储空间不同，UTF-8 占用的少</span></div></pre></td></tr></table></figure>
<pre><code>&apos;ABC&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">u'中文'</span>.encode(<span class="string">'utf-8'</span>) <span class="comment"># 1 个 Unicode 的汉字转为 3 个字节</span></div></pre></td></tr></table></figure>
<pre><code>&apos;\xe4\xb8\xad\xe6\x96\x87&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">len(<span class="string">u'ABC'</span>), len(<span class="string">'ABC'</span>) <span class="comment"># 长度一样</span></div></pre></td></tr></table></figure>
<pre><code>(3, 3)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">len(<span class="string">u'中文'</span>), len(<span class="string">u'中文'</span>.encode(<span class="string">'utf-8'</span>))</div></pre></td></tr></table></figure>
<pre><code>(2, 6)
</code></pre><h3 id="decode"><a href="#decode" class="headerlink" title="decode"></a><code>decode</code></h3><p><code>decode</code> 可以把 UTF-8 表示的字符串转换为 Unicode 字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">'abc'</span>.decode(<span class="string">'utf-8'</span>)</div></pre></td></tr></table></figure>
<pre><code>u&apos;abc&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">'\xe4\xb8\xad\xe6\x96\x87'</span>.decode(<span class="string">'utf-8'</span>)</div></pre></td></tr></table></figure>
<pre><code>u&apos;\u4e2d\u6587&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> <span class="string">'\xe4\xb8\xad\xe6\x96\x87'</span>.decode(<span class="string">'utf-8'</span>)</div></pre></td></tr></table></figure>
<pre><code>中文
</code></pre><h3 id="str"><a href="#str" class="headerlink" title="str"></a><code>str</code></h3><p>用 str 也可以把 unicode 重新编码 utf-8</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding: utf-8 -*- </span></div><div class="line"></div><div class="line">str(<span class="string">'中文'</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;\xe4\xb8\xad\xe6\x96\x87&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">str(<span class="string">'\xe4\xb8\xad\xe6\x96\x87'</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;\xe4\xb8\xad\xe6\x96\x87&apos;
</code></pre><h3 id="type"><a href="#type" class="headerlink" title="type"></a><code>type</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(<span class="string">u'中文'</span>)</div></pre></td></tr></table></figure>
<pre><code>unicode
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(<span class="string">'中文'</span>) <span class="comment"># 中文字符串是 UTF-8 编码</span></div></pre></td></tr></table></figure>
<pre><code>str
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">'中文'</span></div></pre></td></tr></table></figure>
<pre><code>&apos;\xe4\xb8\xad\xe6\x96\x87&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(<span class="string">'\xe4\xb8\xad\xe6\x96\x87'</span>.decode(<span class="string">'utf-8'</span>)) <span class="comment"># UTF-8 码转为 Unicode</span></div></pre></td></tr></table></figure>
<pre><code>unicode
</code></pre><h1 id="实际程序中的编码"><a href="#实际程序中的编码" class="headerlink" title="实际程序中的编码"></a>实际程序中的编码</h1><h2 id="Python-源代码中的说明"><a href="#Python-源代码中的说明" class="headerlink" title="Python 源代码中的说明"></a>Python 源代码中的说明</h2><p>在保存源代码时要声明程序的编码类型为 utf-8，这样当 Python 解释器去读取源代码时就会明白：</p>
<ul>
<li><code>!/usr/bin/env python2.7</code>  </li>
<li><code>-*- coding: utf-8 -*-</code>  </li>
</ul>
<p>第一行告诉 Linux/OS X 这是一个 Python 可执行程序<br>第二行告诉 Python 解释器，按照 UTF-8 读取源代码，否则源代码中的中文可能会乱码</p>
<h2 id="要循环处理字符串的时候需要解码"><a href="#要循环处理字符串的时候需要解码" class="headerlink" title="要循环处理字符串的时候需要解码"></a>要循环处理字符串的时候需要解码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding: utf-8 -*- </span></div><div class="line"></div><div class="line">token = <span class="string">"，.!?？：:"</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> t <span class="keyword">in</span> token:</div><div class="line">    <span class="keyword">print</span> t</div></pre></td></tr></table></figure>
<pre><code>�
�
�
.
!
?
�
�
�
�
�
�
:
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 解码</span></div><div class="line"><span class="keyword">for</span> t <span class="keyword">in</span> token.decode(<span class="string">'utf-8'</span>):</div><div class="line">    <span class="keyword">print</span> t</div></pre></td></tr></table></figure>
<pre><code>，
.
!
?
？
：
:
</code></pre><p>把字符串 decode 为 utf-8 后，就可以被遍历<strong>循环</strong>了。</p>
<h2 id="字符匹配的时候需要解码"><a href="#字符匹配的时候需要解码" class="headerlink" title="字符匹配的时候需要解码"></a>字符匹配的时候需要解码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding: utf-8 -*- </span></div><div class="line"></div><div class="line">token = <span class="string">"，。！？：；"</span>.decode(<span class="string">'utf8'</span>)</div><div class="line">string_list = [<span class="string">'我'</span>, <span class="string">'是'</span>, <span class="string">'中国'</span>, <span class="string">'人'</span> ,<span class="string">'，'</span>, <span class="string">'我'</span>, <span class="string">'爱'</span>, <span class="string">'她'</span>, <span class="string">'。'</span>]</div><div class="line"></div><div class="line"><span class="keyword">for</span> t <span class="keyword">in</span> token:</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> s1 <span class="keyword">in</span> string_list:</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> t == s1: <span class="comment"># 逗号和句号无法匹配的，因为编码不同</span></div><div class="line">            <span class="keyword">print</span> t</div></pre></td></tr></table></figure>
<pre><code>/home/evil_rabbit/anaconda2/lib/python2.7/site-packages/ipykernel/__main__.py:10: UnicodeWarning: Unicode equal comparison failed to convert both arguments to Unicode - interpreting them as being unequal
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> t <span class="keyword">in</span> token:</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> s1 <span class="keyword">in</span> string_list:</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> t == s1.decode(<span class="string">'utf-8'</span>): <span class="comment"># 编码相同，可以匹配；UTF-8 转为 Unicode</span></div><div class="line">            <span class="keyword">print</span> t</div></pre></td></tr></table></figure>
<pre><code>，
。
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">'我'</span></div></pre></td></tr></table></figure>
<pre><code>&apos;\xe6\x88\x91&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> t <span class="keyword">in</span> token:</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> s1 <span class="keyword">in</span> string_list:</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> t.encode(<span class="string">'utf-8'</span>) == s1: <span class="comment"># 编码相同，可以匹配</span></div><div class="line">            <span class="keyword">print</span> t</div></pre></td></tr></table></figure>
<pre><code>，
。
</code></pre><h2 id="结巴分词"><a href="#结巴分词" class="headerlink" title="结巴分词"></a>结巴分词</h2><h3 id="jieba-分词后词语变为-unicode-编码"><a href="#jieba-分词后词语变为-unicode-编码" class="headerlink" title="jieba 分词后词语变为 unicode 编码"></a>jieba 分词后词语变为 unicode 编码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding: utf-8 -*- </span></div><div class="line"></div><div class="line"><span class="keyword">import</span> jieba</div><div class="line"></div><div class="line">string = <span class="string">"我是中国人，我喜欢编程、音乐、运动、看书。"</span></div><div class="line"></div><div class="line">string_list = []</div><div class="line"></div><div class="line">seg = jieba.cut(string)</div><div class="line"></div><div class="line"><span class="keyword">for</span> word <span class="keyword">in</span> seg:</div><div class="line">    string_list.append(word)</div><div class="line"></div><div class="line"><span class="keyword">print</span> string_list</div></pre></td></tr></table></figure>
<pre><code>[u&apos;\u6211&apos;, u&apos;\u662f&apos;, u&apos;\u4e2d\u56fd&apos;, u&apos;\u4eba&apos;, u&apos;\uff0c&apos;, u&apos;\u6211&apos;, u&apos;\u559c\u6b22&apos;, u&apos;\u7f16\u7a0b&apos;, u&apos;\u3001&apos;, u&apos;\u97f3\u4e50&apos;, u&apos;\u3001&apos;, u&apos;\u8fd0\u52a8&apos;, u&apos;\u3001&apos;, u&apos;\u770b\u4e66&apos;, u&apos;\u3002&apos;]
</code></pre><h3 id="去掉标点符号"><a href="#去掉标点符号" class="headerlink" title="去掉标点符号"></a>去掉标点符号</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding: utf-8 -*- </span></div><div class="line"></div><div class="line"><span class="keyword">import</span> jieba</div><div class="line"></div><div class="line">string = <span class="string">"我是中国人，我喜欢编程、音乐、运动、看书。"</span></div><div class="line"></div><div class="line">string_list = []</div><div class="line"></div><div class="line">seg = jieba.cut(string)</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> seg:</div><div class="line">    string_list.append(i)</div><div class="line"></div><div class="line">token = <span class="string">"，。！？：；、"</span>.decode(<span class="string">'utf-8'</span>)</div><div class="line"></div><div class="line">filter_seg = [fil <span class="keyword">for</span> fil <span class="keyword">in</span> string_list <span class="keyword">if</span> fil <span class="keyword">not</span> <span class="keyword">in</span> token]</div><div class="line"></div><div class="line"><span class="keyword">for</span> word <span class="keyword">in</span> filter_seg:</div><div class="line">    </div><div class="line">    <span class="keyword">print</span> word</div></pre></td></tr></table></figure>
<pre><code>我
是
中国
人
我
喜欢
编程
音乐
运动
看书
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding: utf-8 -*- </span></div><div class="line"></div><div class="line"><span class="keyword">import</span> jieba</div><div class="line"></div><div class="line">string = <span class="string">"我是中国人，我喜欢编程、音乐、运动、看书。"</span></div><div class="line"></div><div class="line">string_list = []</div><div class="line"></div><div class="line">seg = jieba.cut(string)</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> seg:</div><div class="line">    string_list.append(i)</div><div class="line"></div><div class="line">token = <span class="string">"，。！？：；、"</span>.decode(<span class="string">'utf-8'</span>)</div><div class="line"></div><div class="line"><span class="keyword">for</span> word <span class="keyword">in</span> string_list:</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> token:</div><div class="line">        <span class="keyword">print</span> word</div></pre></td></tr></table></figure>
<pre><code>我
是
中国
人
我
喜欢
编程
音乐
运动
看书
</code></pre><h1 id="读存文档时的编码"><a href="#读存文档时的编码" class="headerlink" title="读存文档时的编码"></a>读存文档时的编码</h1><h2 id="读取文档注意事项"><a href="#读取文档注意事项" class="headerlink" title="读取文档注意事项"></a>读取文档注意事项</h2><p>为了避免每次都要 close 文件，建议使用 with</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span> open(<span class="string">'/./xx.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</div><div class="line">    f.read()</div></pre></td></tr></table></figure>
<p><code>read()</code> 会一次性读取全部内容，如果文件太大，可以用 <code>read(size)</code> 读取 size 个字节的内容。<br>或者调用 <code>readline()</code> 按行读取；调用 <code>readlines()</code> 一次读取所有内容并按行返回 list</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</div><div class="line">    line.strip() <span class="comment"># 去掉末尾的 '\n'</span></div></pre></td></tr></table></figure>
<h2 id="txt-文档"><a href="#txt-文档" class="headerlink" title="txt 文档"></a>txt 文档</h2><ul>
<li>txt 文档存储时要另存为 utf-8 编码。txt 文档默认编码为 ascii</li>
<li><p>列表内容存储回 txt 文档时，要把 Python 里的 unicode 编码为 utf-8。只有编码为 utf-8，才能正常在 txt 文档中显示出来  </p>
<ul>
<li><code>encode(&#39;utf-8&#39;)</code></li>
<li>str()</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding: utf-8 -*- </span></div><div class="line"></div><div class="line"><span class="keyword">import</span> jieba</div><div class="line"></div><div class="line">string = <span class="string">"我是中国人，我喜欢编程、音乐、运动、看书。"</span></div><div class="line"></div><div class="line">string_list = []</div><div class="line"></div><div class="line">seg = jieba.cut(string)</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> seg:</div><div class="line">    string_list.append(i)</div><div class="line"></div><div class="line">token = <span class="string">"，。！？：；、"</span>.decode(<span class="string">'utf-8'</span>) <span class="comment"># 对 UTF-8 的字符串解为 Unicode</span></div><div class="line"></div><div class="line">filter_seg = [fil <span class="keyword">for</span> fil <span class="keyword">in</span> string_list <span class="keyword">if</span> fil <span class="keyword">not</span> <span class="keyword">in</span> token]</div><div class="line"></div><div class="line">f = open(<span class="string">'output.txt'</span>, <span class="string">'w'</span>)</div><div class="line"></div><div class="line"><span class="keyword">for</span> word <span class="keyword">in</span> filter_seg:</div><div class="line">    f.write(word.encode(<span class="string">'utf-8'</span>) + <span class="string">' '</span>)</div><div class="line">    <span class="comment">#f.write(str(word)+' ') # 不成功，采用 encode</span></div><div class="line">f.close()</div></pre></td></tr></table></figure>
<p>如果读取非 ASCII 编码的文本文件，可以用二进制模式打开，再解码；或者给 <code>open</code> 函数传入 <code>encoing</code> 参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># GBK 编码的文件</span></div><div class="line">f = open(<span class="string">'./xx.txt'</span>, <span class="string">'rb'</span>) <span class="comment"># 二进制读取</span></div><div class="line">u = f.read().decode(<span class="string">'gbk'</span>)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">f = open(<span class="string">'/./xx.txt'</span>, <span class="string">'r'</span>, encoding=<span class="string">'gbk'</span>)</div><div class="line">f.read()</div></pre></td></tr></table></figure>
<p>遇到编码不规范的文件，可以给 <code>open</code> 函数一个 <code>errors</code> 的参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">f = open(<span class="string">'/./xx.txt'</span>, <span class="string">'r'</span>, encoding=<span class="string">'gbk'</span>, errors=<span class="string">'ignore'</span>) <span class="comment"># 忽略错误编码</span></div></pre></td></tr></table></figure>
<h2 id="codecs"><a href="#codecs" class="headerlink" title="codecs"></a><code>codecs</code></h2><p>python 的 <code>codecs</code> 模块可以帮助我们在读取文件时自动转换编码，直接读出 Unicode</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># GBK 编码的文件</span></div><div class="line"><span class="keyword">import</span> codecs</div><div class="line"><span class="keyword">with</span> codecs.open(<span class="string">'/./xx.txt'</span>, <span class="string">'r'</span>, <span class="string">'gbk'</span>) <span class="keyword">as</span> f:</div><div class="line">    f.read()</div></pre></td></tr></table></figure>
<h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a><code>JSON</code></h2><p>JSON 是不同语言的标准格式，速度快，而且可以直接在 Web 页面读取，非常方便。<br>因此，我们可以将一些需要调取的 dict 存储为 JSON。<br>另外一个原因，JSON 标准规定编码是 UTF-8，所以 Python 内置的 <code>json</code> 模块让我们很方便地在 Python 的 <code>str</code> 与 JSON 字符串之间转换。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> json</div><div class="line">d = dict(name=<span class="string">'Bob'</span>, age=<span class="number">20</span>, score=<span class="number">88</span>)</div><div class="line">json.dumps(d) <span class="comment"># dumps 返回一个 str，内容就是标准的 JSON</span></div></pre></td></tr></table></figure>
<pre><code>&apos;{&quot;age&quot;: 20, &quot;score&quot;: 88, &quot;name&quot;: &quot;Bob&quot;}&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">json_str = <span class="string">'&#123;"age": 20, "score": 88, "name": "Bob"&#125;'</span></div><div class="line">json.loads(json_str) <span class="comment"># 成功读取</span></div></pre></td></tr></table></figure>
<pre><code>{u&apos;age&apos;: 20, u&apos;name&apos;: u&apos;Bob&apos;, u&apos;score&apos;: 88}
</code></pre><p>实际操作中，可以直接将 <code>json.dumps(d)</code> 写入 txt 文档，读取时 <code>json.loads(f.read())</code> 即可。</p>
<h2 id="直接存储-Unicode"><a href="#直接存储-Unicode" class="headerlink" title="直接存储 Unicode"></a>直接存储 Unicode</h2><p>不将 Unicode 转为实际的文本存储字符集，而是将 Unicode 的内存编码值直接存储，读取文件时再反向转换回来</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 存储</span></div><div class="line"><span class="comment"># 从 Unicode 到 Unicode-escape</span></div><div class="line"><span class="comment"># unicodestr.encode('unicode-escape')</span></div><div class="line"><span class="string">u'中文'</span>.encode(<span class="string">'unicode-escape'</span>)</div></pre></td></tr></table></figure>
<pre><code>&apos;\\u4e2d\\u6587&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 读取</span></div><div class="line"><span class="comment"># 从 Unicode-escape 到 Unicode</span></div><div class="line"><span class="comment"># unicodestr.decode('unicode-escape')</span></div><div class="line"><span class="string">'\\u4e2d\\u6587'</span>.decode(<span class="string">'unicode-escape'</span>)</div></pre></td></tr></table></figure>
<pre><code>u&apos;\u4e2d\u6587&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(<span class="string">u'\u4e2d\u6587'</span>)</div></pre></td></tr></table></figure>
<pre><code>中文
</code></pre><h2 id="直接存储-String"><a href="#直接存储-String" class="headerlink" title="直接存储 String"></a>直接存储 String</h2><p>对于 UTF-8 编码的字符串，在存储时也可以直接存储编码值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 存储</span></div><div class="line"><span class="comment"># 从 UTF-8 到 string-escape</span></div><div class="line"><span class="comment"># utf8str.encode('string-escape')</span></div><div class="line"><span class="string">'中文'</span>.encode(<span class="string">'string-escape'</span>)<span class="comment"># 注意 '中文' 是 UTF-8</span></div></pre></td></tr></table></figure>
<pre><code>&apos;\\xe4\\xb8\\xad\\xe6\\x96\\x87&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 读取</span></div><div class="line"><span class="comment"># 从 string-escape 到 UTF-8</span></div><div class="line"><span class="comment"># utf8str.decode('string-escape')</span></div><div class="line"><span class="string">'\\xe4\\xb8\\xad\\xe6\\x96\\x87'</span>.decode(<span class="string">'string-escape'</span>)<span class="comment"># 注意 string '中文' 是 UTF-8</span></div></pre></td></tr></table></figure>
<pre><code>&apos;\xe4\xb8\xad\xe6\x96\x87&apos;
</code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li><a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000" target="_blank" rel="external">廖雪峰 Python 教程：廖神教程强烈推荐</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_6285b6f60100u15a.html" target="_blank" rel="external">python 的中文编码_乱码问题的解决方法和探寻</a>  </li>
<li><a href="http://blog.csdn.net/liuxincumt/article/details/8183391" target="_blank" rel="external">初探 python 编码</a></li>
<li><a href="http://bbs.csdn.net/topics/390388139" target="_blank" rel="external">Python 中 Unicode 字符串</a></li>
</ul>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/03/05/2017-03-05-Python-encode-decode/">
    <time datetime="2017-03-05T10:00:00.000Z" class="entry-date">
        2017-03-05
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
</article>






  
    <article id="post-2017-02-15-list-dict-series-dataframe-ndarray-transform" class="post-2017-02-15-list-dict-series-dataframe-ndarray-transform post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/02/15/2017-02-15-list-dict-series-dataframe-ndarray-transform/">List, Dict, Array, Series, DataFrame 相互转换</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="/2017/02/15/2017-02-15-list-dict-series-dataframe-ndarray-transform/#comments" class="leave-reply">Reply</a>
            
            <a href="javascript:void(0);" data-url="http://www.yam.gift/2017/02/15/2017-02-15-list-dict-series-dataframe-ndarray-transform/" data-id="cjfp99izb0005rpca9qlt7owy" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><ul>
<li>dict to series</li>
<li>dict to dataframe</li>
<li>list to series</li>
<li>list to dataframe</li>
<li>list to array</li>
<li>array to dataframe</li>
<li>series to array</li>
<li>dataframe to array</li>
<li>dataframe to dict</li>
</ul>
<h2 id="1-输入-Dict"><a href="#1-输入-Dict" class="headerlink" title="1. 输入 Dict"></a>1. 输入 Dict</h2><ul>
<li>dict to series</li>
<li>dict to dataframe</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding:utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div><div class="line"></div><div class="line"><span class="comment"># dict</span></div><div class="line">data = &#123; <span class="string">'state'</span>: [<span class="string">'Ohino'</span>, <span class="string">'Ohino'</span>, <span class="string">'Ohino'</span>, <span class="string">'Nevada'</span>, <span class="string">'Nevada'</span>],</div><div class="line">         <span class="string">'year'</span>: [<span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2001</span>, <span class="number">2002</span>],</div><div class="line">         <span class="string">'pop'</span>: [<span class="number">1.5</span>, <span class="number">1.7</span>, <span class="number">3.6</span>, <span class="number">2.4</span>, <span class="number">2.9</span>]&#125;  <span class="comment"># type(data) 为 dict</span></div><div class="line"></div><div class="line"><span class="comment"># dict to series，若不指定 index，data 的 key 充当 Series 的 index</span></div><div class="line">ser = Series(data)</div><div class="line"></div><div class="line"><span class="comment"># dict to dataframe，若不指定 columns，data 的 key 充当 DataFrame 的 columns</span></div><div class="line">df = DataFrame(data)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data</div></pre></td></tr></table></figure>
<pre><code>{&apos;pop&apos;: [1.5, 1.7, 3.6, 2.4, 2.9],
 &apos;state&apos;: [&apos;Ohino&apos;, &apos;Ohino&apos;, &apos;Ohino&apos;, &apos;Nevada&apos;, &apos;Nevada&apos;],
 &apos;year&apos;: [2000, 2001, 2002, 2001, 2002]}
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dict to series，若不指定 index，data 的 key 充当 Series 的 index</span></div><div class="line">ser = Series(data)</div><div class="line">ser</div></pre></td></tr></table></figure>
<pre><code>pop                  [1.5, 1.7, 3.6, 2.4, 2.9]
state    [Ohino, Ohino, Ohino, Nevada, Nevada]
year            [2000, 2001, 2002, 2001, 2002]
dtype: object
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ser.shape</div></pre></td></tr></table></figure>
<pre><code>(3,)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dict to dataframe，若不指定 columns，data 的 key 充当 DataFrame 的 columns</span></div><div class="line">df = DataFrame(data)</div><div class="line">df</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th>pop</th>
<th>state</th>
<th>year</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1.5</td>
<td>Ohino</td>
<td>2000</td>
</tr>
<tr>
<td>1</td>
<td>1.7</td>
<td>Ohino</td>
<td>2001</td>
</tr>
<tr>
<td>2</td>
<td>3.6</td>
<td>Ohino</td>
<td>2002</td>
</tr>
<tr>
<td>3</td>
<td>2.4</td>
<td>Nevada</td>
<td>2001</td>
</tr>
<tr>
<td>4</td>
<td>2.9</td>
<td>Nevada</td>
<td>2002</td>
</tr>
</tbody>
</table>
<h2 id="2-输入-List"><a href="#2-输入-List" class="headerlink" title="2. 输入 List"></a>2. 输入 List</h2><ul>
<li>list to series</li>
<li>list to dataframe</li>
<li>list to array</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding:utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div><div class="line"></div><div class="line"><span class="comment"># list</span></div><div class="line">data = [[<span class="number">2000</span>, <span class="string">'Ohino'</span>, <span class="number">1.5</span>],</div><div class="line">        [<span class="number">2001</span>, <span class="string">'Ohino'</span>, <span class="number">1.7</span>],</div><div class="line">        [<span class="number">2002</span>, <span class="string">'Ohino'</span>, <span class="number">3.6</span>],</div><div class="line">        [<span class="number">2001</span>, <span class="string">'Nevada'</span>, <span class="number">2.4</span>],</div><div class="line">        [<span class="number">2002</span>, <span class="string">'Nevada'</span>, <span class="number">2.9</span>]]  <span class="comment"># type(data) 为 list</span></div><div class="line"></div><div class="line"><span class="comment"># list to series</span></div><div class="line">ser = Series(data, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>])</div><div class="line"></div><div class="line"><span class="comment"># list to dataframe</span></div><div class="line">df = DataFrame(data, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>], columns = [<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>])</div><div class="line"></div><div class="line"><span class="comment"># list to array</span></div><div class="line">ndarray = np.array(data)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(data)</div></pre></td></tr></table></figure>
<pre><code>list
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data</div></pre></td></tr></table></figure>
<pre><code>[[2000, &apos;Ohino&apos;, 1.5],
 [2001, &apos;Ohino&apos;, 1.7],
 [2002, &apos;Ohino&apos;, 3.6],
 [2001, &apos;Nevada&apos;, 2.4],
 [2002, &apos;Nevada, 2.9&apos;]]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># list to series</span></div><div class="line">ser = Series(data, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>])</div><div class="line">ser</div></pre></td></tr></table></figure>
<pre><code>one       [2000, Ohino, 1.5]
two       [2001, Ohino, 1.7]
three     [2002, Ohino, 3.6]
four     [2001, Nevada, 2.4]
five     [2002, Nevada, 2.9]
dtype: object
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(ser)</div></pre></td></tr></table></figure>
<pre><code>pandas.core.series.Series
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ser.shape</div></pre></td></tr></table></figure>
<pre><code>(5,)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># list to dataframe</span></div><div class="line">df = DataFrame(data, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>], columns = [<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>])</div><div class="line">df</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th>year</th>
<th>state</th>
<th>pop</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>one</strong></td>
<td>2000</td>
<td>Ohino</td>
<td>1.5</td>
</tr>
<tr>
<td><strong>two</strong></td>
<td>2001</td>
<td>Ohino</td>
<td>1.7</td>
</tr>
<tr>
<td><strong>three</strong></td>
<td>2002</td>
<td>Ohino</td>
<td>3.6</td>
</tr>
<tr>
<td><strong>four</strong></td>
<td>2001</td>
<td>Nevada</td>
<td>2.4</td>
</tr>
<tr>
<td><strong>five</strong></td>
<td>2002</td>
<td>Nevada</td>
<td>2.9</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(df)</div></pre></td></tr></table></figure>
<pre><code>pandas.core.frame.DataFrame
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df.shape</div></pre></td></tr></table></figure>
<pre><code>(5, 3)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># list to ndarray</span></div><div class="line">ndarray = np.array(data)</div><div class="line">ndarray</div></pre></td></tr></table></figure>
<pre><code>array([[&apos;2000&apos;, &apos;Ohino&apos;, &apos;1.5&apos;],
       [&apos;2001&apos;, &apos;Ohino&apos;, &apos;1.7&apos;],
       [&apos;2002&apos;, &apos;Ohino&apos;, &apos;3.6&apos;],
       [&apos;2001&apos;, &apos;Nevada&apos;, &apos;2.4&apos;],
       [&apos;2002&apos;, &apos;Nevada&apos;, &apos;2.9&apos;]],
      dtype=&apos;|S21&apos;)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ndarray.shape</div></pre></td></tr></table></figure>
<pre><code>(5, 3)
</code></pre><h2 id="3-输入-Array"><a href="#3-输入-Array" class="headerlink" title="3 输入 Array"></a>3 输入 Array</h2><ul>
<li>array to dataframe</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding:utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div><div class="line"></div><div class="line"><span class="comment"># list</span></div><div class="line">data = [[<span class="number">2000</span>, <span class="string">'Ohino'</span>, <span class="number">1.5</span>],</div><div class="line">        [<span class="number">2001</span>, <span class="string">'Ohino'</span>, <span class="number">1.7</span>],</div><div class="line">        [<span class="number">2002</span>, <span class="string">'Ohino'</span>, <span class="number">3.6</span>],</div><div class="line">        [<span class="number">2001</span>, <span class="string">'Nevada'</span>, <span class="number">2.4</span>],</div><div class="line">        [<span class="number">2002</span>, <span class="string">'Nevada'</span>, <span class="number">2.9</span>]]  <span class="comment"># type(data) 为 list</span></div><div class="line"></div><div class="line"><span class="comment"># list to array</span></div><div class="line">ndarray = np.array(data)</div><div class="line"></div><div class="line"><span class="comment"># array to dataframe</span></div><div class="line">pd = DataFrame(ndarray, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>], columns = [<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>])</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ndarray</div><div class="line"><span class="comment"># 注意：array 中所有数据类型均是一样的</span></div></pre></td></tr></table></figure>
<pre><code>array([[&apos;2000&apos;, &apos;Ohino&apos;, &apos;1.5&apos;],
       [&apos;2001&apos;, &apos;Ohino&apos;, &apos;1.7&apos;],
       [&apos;2002&apos;, &apos;Ohino&apos;, &apos;3.6&apos;],
       [&apos;2001&apos;, &apos;Nevada&apos;, &apos;2.4&apos;],
       [&apos;2002&apos;, &apos;Nevada&apos;, &apos;2.9&apos;]],
      dtype=&apos;|S21&apos;)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pd</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th>year</th>
<th>state</th>
<th>pop</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>one</strong></td>
<td>2000</td>
<td>Ohino</td>
<td>1.5</td>
</tr>
<tr>
<td><strong>two</strong></td>
<td>2001</td>
<td>Ohino</td>
<td>1.7</td>
</tr>
<tr>
<td><strong>three</strong></td>
<td>2002</td>
<td>Ohino</td>
<td>3.6</td>
</tr>
<tr>
<td><strong>four</strong></td>
<td>2001</td>
<td>Nevada</td>
<td>2.4</td>
</tr>
<tr>
<td><strong>five</strong></td>
<td>2002</td>
<td>Nevada</td>
<td>2.9</td>
</tr>
</tbody>
</table>
<h2 id="4-输入-DataFrame"><a href="#4-输入-DataFrame" class="headerlink" title="4. 输入 DataFrame"></a>4. 输入 DataFrame</h2><ul>
<li>series to array</li>
<li>dataframe to array</li>
<li>dataframe to dict</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding:utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div><div class="line"></div><div class="line"><span class="comment"># list</span></div><div class="line">data = [[<span class="number">2000</span>, <span class="string">'Ohino'</span>, <span class="number">1.5</span>],</div><div class="line">        [<span class="number">2001</span>, <span class="string">'Ohino'</span>, <span class="number">1.7</span>],</div><div class="line">        [<span class="number">2002</span>, <span class="string">'Ohino'</span>, <span class="number">3.6</span>],</div><div class="line">        [<span class="number">2001</span>, <span class="string">'Nevada'</span>, <span class="number">2.4</span>],</div><div class="line">        [<span class="number">2002</span>, <span class="string">'Nevada'</span>, <span class="number">2.9</span>]]  <span class="comment"># type(data) 为 list</span></div><div class="line"></div><div class="line"><span class="comment"># list to series</span></div><div class="line">ser = Series(data, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>])</div><div class="line"></div><div class="line"><span class="comment"># list to dataframe</span></div><div class="line">df = DataFrame(data, index = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>], columns = [<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>])</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># series to array</span></div><div class="line">foo = ser.as_matrix()</div><div class="line">foo0 = Series.as_matrix(ser)</div><div class="line"></div><div class="line"><span class="comment"># dataframe to array, foo2 foo3 foo4 结果相同</span></div><div class="line">foo1 = DataFrame.as_matrix(df)</div><div class="line">foo2 = df.as_matrix()</div><div class="line">foo3 = df.values</div><div class="line">foo4 = np.array(df)</div><div class="line"></div><div class="line">foo5 = df.as_matrix([<span class="string">"pop"</span>])</div><div class="line"></div><div class="line"><span class="comment"># dataframe to dict</span></div><div class="line"><span class="comment"># outtype的参数为‘dict’、‘list’、‘series’和‘records’。</span></div><div class="line"><span class="comment"># dict返回的是dict of dict；list返回的是列表的字典；series返回的是序列的字典；records返回的是字典的列表</span></div><div class="line">df1 = df.to_dict(orient=<span class="string">'dict'</span>)</div><div class="line">df2 = df.to_dict(orient=<span class="string">'list'</span>)</div><div class="line">df3 = df.to_dict(orient=<span class="string">'series'</span>)</div><div class="line">df4 = df.to_dict(orient=<span class="string">'records'</span>)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># series to ndarray</span></div><div class="line">foo = ser.as_matrix()</div><div class="line">foo0 = Series.as_matrix(ser)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo</div></pre></td></tr></table></figure>
<pre><code>array([[2000, &apos;Ohino&apos;, 1.5], [2001, &apos;Ohino&apos;, 1.7], [2002, &apos;Ohino&apos;, 3.6],
       [2001, &apos;Nevada&apos;, 2.4], [2002, &apos;Nevada&apos;, 2.9]], dtype=object)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo0</div></pre></td></tr></table></figure>
<pre><code>array([[2000, &apos;Ohino&apos;, 1.5], [2001, &apos;Ohino&apos;, 1.7], [2002, &apos;Ohino&apos;, 3.6],
       [2001, &apos;Nevada&apos;, 2.4], [2002, &apos;Nevada&apos;, 2.9]], dtype=object)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(foo)</div></pre></td></tr></table></figure>
<pre><code>numpy.ndarray
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo.shape, foo0.shape</div></pre></td></tr></table></figure>
<pre><code>((5,), (5,))
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dataframe to ndarray foo2 foo3 foo4 结果相同</span></div><div class="line">foo1 = DataFrame.as_matrix(df)</div><div class="line">foo2 = df.as_matrix()</div><div class="line">foo3 = df.values</div><div class="line">foo4 = np.array(df)</div><div class="line"></div><div class="line">foo5 = df.as_matrix([<span class="string">"pop"</span>])</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo1</div></pre></td></tr></table></figure>
<pre><code>array([[2000, &apos;Ohino&apos;, 1.5],
       [2001, &apos;Ohino&apos;, 1.7],
       [2002, &apos;Ohino&apos;, 3.6],
       [2001, &apos;Nevada&apos;, 2.4],
       [2002, &apos;Nevada&apos;, 2.9]], dtype=object)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo2</div></pre></td></tr></table></figure>
<pre><code>array([[2000, &apos;Ohino&apos;, 1.5],
       [2001, &apos;Ohino&apos;, 1.7],
       [2002, &apos;Ohino&apos;, 3.6],
       [2001, &apos;Nevada&apos;, 2.4],
       [2002, &apos;Nevada&apos;, 2.9]], dtype=object)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo3</div></pre></td></tr></table></figure>
<pre><code>array([[2000, &apos;Ohino&apos;, 1.5],
       [2001, &apos;Ohino&apos;, 1.7],
       [2002, &apos;Ohino&apos;, 3.6],
       [2001, &apos;Nevada&apos;, 2.4],
       [2002, &apos;Nevada&apos;, 2.9]], dtype=object)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo4</div></pre></td></tr></table></figure>
<pre><code>array([[2000, &apos;Ohino&apos;, 1.5],
       [2001, &apos;Ohino&apos;, 1.7],
       [2002, &apos;Ohino&apos;, 3.6],
       [2001, &apos;Nevada&apos;, 2.4],
       [2002, &apos;Nevada&apos;, 2.9]], dtype=object)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo5</div></pre></td></tr></table></figure>
<pre><code>array([[ 1.5],
       [ 1.7],
       [ 3.6],
       [ 2.4],
       [ 2.9]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo1.shape, foo2.shape, foo3.shape, foo4.shape, foo5.shape</div></pre></td></tr></table></figure>
<pre><code>((5, 3), (5, 3), (5, 3), (5, 3), (5, 1))
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th>year</th>
<th>state</th>
<th>pop</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>one</strong></td>
<td>2000</td>
<td>Ohino</td>
<td>1.5</td>
</tr>
<tr>
<td><strong>two</strong></td>
<td>2001</td>
<td>Ohino</td>
<td>1.7</td>
</tr>
<tr>
<td><strong>three</strong></td>
<td>2002</td>
<td>Ohino</td>
<td>3.6</td>
</tr>
<tr>
<td><strong>four</strong></td>
<td>2001</td>
<td>Nevada</td>
<td>2.4</td>
</tr>
<tr>
<td><strong>five</strong></td>
<td>2002</td>
<td>Nevada</td>
<td>2.9</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dataframe to dict, dict返回的是dict of dict；list返回的是列表的字典；series返回的是序列的字典；records返回的是字典的列表</span></div><div class="line">df1 = df.to_dict(orient=<span class="string">'dict'</span>)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df1</div></pre></td></tr></table></figure>
<pre><code>{&apos;pop&apos;: {&apos;five&apos;: 2.9,
  &apos;four&apos;: 2.4,
  &apos;one&apos;: 1.5,
  &apos;three&apos;: 3.6,
  &apos;two&apos;: 1.7},
 &apos;state&apos;: {&apos;five&apos;: &apos;Nevada&apos;,
  &apos;four&apos;: &apos;Nevada&apos;,
  &apos;one&apos;: &apos;Ohino&apos;,
  &apos;three&apos;: &apos;Ohino&apos;,
  &apos;two&apos;: &apos;Ohino&apos;},
 &apos;year&apos;: {&apos;five&apos;: 2002, &apos;four&apos;: 2001, &apos;one&apos;: 2000, &apos;three&apos;: 2002, &apos;two&apos;: 2001}}
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(df1)</div></pre></td></tr></table></figure>
<pre><code>dict
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dataframe to dict, dict返回的是dict of dict；list返回的是列表的字典；series返回的是序列的字典；records返回的是字典的列表</span></div><div class="line">df2 = df.to_dict(orient=<span class="string">'list'</span>)</div><div class="line">df2</div></pre></td></tr></table></figure>
<pre><code>{&apos;pop&apos;: [1.5, 1.7, 3.6, 2.4, 2.9],
 &apos;state&apos;: [&apos;Ohino&apos;, &apos;Ohino&apos;, &apos;Ohino&apos;, &apos;Nevada&apos;, &apos;Nevada&apos;],
 &apos;year&apos;: [2000, 2001, 2002, 2001, 2002]}
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(df2)</div></pre></td></tr></table></figure>
<pre><code>dict
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dataframe to dict, dict返回的是dict of dict；list返回的是列表的字典；series返回的是序列的字典；records返回的是字典的列表</span></div><div class="line">df3 = df.to_dict(orient=<span class="string">'series'</span>)</div><div class="line">df3</div></pre></td></tr></table></figure>
<pre><code>{&apos;pop&apos;: one      1.5
 two      1.7
 three    3.6
 four     2.4
 five     2.9
 Name: pop, dtype: float64, &apos;state&apos;: one       Ohino
 two       Ohino
 three     Ohino
 four     Nevada
 five     Nevada
 Name: state, dtype: object, &apos;year&apos;: one      2000
 two      2001
 three    2002
 four     2001
 five     2002
 Name: year, dtype: int64}
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(df3)</div></pre></td></tr></table></figure>
<pre><code>dict
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># dataframe to dict, dict返回的是dict of dict；list返回的是列表的字典；series返回的是序列的字典；records返回的是字典的列表</span></div><div class="line">df4 = df.to_dict(orient=<span class="string">'records'</span>)</div><div class="line">df4</div></pre></td></tr></table></figure>
<pre><code>[{&apos;pop&apos;: 1.5, &apos;state&apos;: &apos;Ohino&apos;, &apos;year&apos;: 2000},
 {&apos;pop&apos;: 1.7, &apos;state&apos;: &apos;Ohino&apos;, &apos;year&apos;: 2001},
 {&apos;pop&apos;: 3.6, &apos;state&apos;: &apos;Ohino&apos;, &apos;year&apos;: 2002},
 {&apos;pop&apos;: 2.4, &apos;state&apos;: &apos;Nevada&apos;, &apos;year&apos;: 2001},
 {&apos;pop&apos;: 2.9, &apos;state&apos;: &apos;Nevada&apos;, &apos;year&apos;: 2002}]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type(df4)</div></pre></td></tr></table></figure>
<pre><code>list
</code></pre><h2 id="4-总结：List-Dict-Array-Series-DataFrame-的区别"><a href="#4-总结：List-Dict-Array-Series-DataFrame-的区别" class="headerlink" title="4. 总结：List, Dict, Array, Series, DataFrame 的区别"></a>4. 总结：List, Dict, Array, Series, DataFrame 的区别</h2><ul>
<li>List 和 Dict 是 Python 的基本数据结构</li>
<li>Series 和 DataFrame 是 Pandas 的基本数据结构</li>
<li>Array 是 Numpy 的数据结构</li>
</ul>
<h3 id="4-1-Pandas-中的数据结构"><a href="#4-1-Pandas-中的数据结构" class="headerlink" title="4.1 Pandas 中的数据结构"></a>4.1 Pandas 中的数据结构</h3><h4 id="4-1-1-Series"><a href="#4-1-1-Series" class="headerlink" title="4.1.1 Series"></a>4.1.1 Series</h4><ul>
<li>Series 是一个一维的类似的数组对象，包含一个数组的数据（任何 NumPy 的数据类型）和一个与数组关联的数据标签，被叫做<strong>索引</strong>。最简单的Series是由一个数组的数据构成。</li>
<li>Series 是一个定长的，有序的字典，因为它把索引和值映射起来了。</li>
<li>Series 与 Numpy 中的一维 array 类似。二者与 Python 基本的数据结构 List 也很相近。其区别是：List 中的元素可以是不同的数据类型，而 Array 和 Series 中则只允许存储相同的数据类型，这样可以更有效的使用内存，提高运算效率。</li>
<li>Time-Series：以时间为索引的 Series。</li>
</ul>
<h4 id="4-1-2-DataFrame"><a href="#4-1-2-DataFrame" class="headerlink" title="4.1.2 DataFrame"></a>4.1.2 DataFrame</h4><ul>
<li>DataFrame：<strong>二维</strong>的表格型数据结构。很多功能与 R 中的 data.frame 类似。可以将 DataFrame 理解为 Series 的容器。</li>
<li>有很多方法来构建一个 DataFrame，但最常用的一个是用一个相等长度列表的字典或 NumPy 数组。</li>
<li>像 Series 一样， DataFrame 的 values 属性返回一个包含在 DataFrame 中的数据的二维 ndarray。</li>
<li>Panel ：三维的数组，可以理解为 DataFrame 的容器。</li>
</ul>
<p><strong>可能的传递到DataFrame的构造器</strong></p>
<table>
<thead>
<tr>
<th>构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>二维ndarray</td>
<td>一个数据矩阵，有可选的行标和列标</td>
</tr>
<tr>
<td>数组，列表或元组的字典</td>
<td>每一个序列成为DataFrame中的一列。所有的序列必须有相同的长度。</td>
</tr>
<tr>
<td>NumPy的结构/记录数组</td>
<td>和“数组字典”一样处理</td>
</tr>
<tr>
<td>Series的字典</td>
<td>每一个值成为一列。如果没有明显的传递索引，将结合每一个Series的索引来形成结果的行索引。</td>
</tr>
<tr>
<td>字典的字典</td>
<td>每一个内部的字典成为一列。和“Series的字典”一样，结合键值来形成行索引。</td>
</tr>
<tr>
<td>字典或Series的列表</td>
<td>每一项成为DataFrame中的一列。结合字典键或Series索引形成DataFrame的列标。</td>
</tr>
<tr>
<td>列表或元组的列表</td>
<td>和“二维ndarray”一样处理</td>
</tr>
<tr>
<td>另一个DataFrame</td>
<td>DataFrame的索引将被使用，除非传递另外一个</td>
</tr>
<tr>
<td>NumPy伪装数组（MaskedArray）</td>
<td>除了蒙蔽值在DataFrame中成为NA/丢失数据之外，其它的和“二维ndarray”一样</td>
</tr>
</tbody>
</table>
<h3 id="4-2-Numpy-操作"><a href="#4-2-Numpy-操作" class="headerlink" title="4.2 Numpy 操作"></a>4.2 Numpy 操作</h3><ul>
<li><p>基本操作</p>
<ul>
<li>np.array 创建数组，调用 astype 总是会创建一个新的数组（原数据的拷贝），即使是新的 dtype 和原来的 dtype 相同。</li>
<li>索引，切片等详见：<a href="http://pda.readthedocs.io/en/latest/chp4.html" target="_blank" rel="external">http://pda.readthedocs.io/en/latest/chp4.html</a></li>
</ul>
</li>
<li><p>通用函数</p>
</li>
<li><p>数据处理</p>
<ul>
<li>np.meshgrid 函数接受两个一维数组并产生两个二维矩阵，其值对于两个数组的所有 (x, y) 对。</li>
<li>函数 numpy.where 是三元表达式 x if condition else y 的矢量化版本。</li>
<li>mean 和 sun 函数可以有一个可选的 axis 参数，它对给定坐标轴进行统计，结果数组将会减少一个维度。</li>
<li>有两个额外的方法， any 和 all ，对布尔数组尤其有用。 any 用来测试一个数组中是否有一个或更多的 True ，而 all 用来测试所有的值是否为 True。</li>
<li>顶层的 np.sort 函数返回一个经过排序后的数组拷贝，而不是就地修改。</li>
<li>Numpy 有一些基本的针对一维 ndarrays 的集合操作。最常使用的一个可能是 np.unique ，它返回一个数组的经过排序的 unique 值。</li>
</ul>
</li>
<li><p>线性代数</p>
<ul>
<li>numpy.linalg 有一个关于矩阵分解和像转置和行列式等的一个标准集合。</li>
</ul>
</li>
</ul>
<h2 id="参考网站"><a href="#参考网站" class="headerlink" title="参考网站"></a>参考网站</h2><ul>
<li><a href="http://pda.readthedocs.io/en/latest/chp5.html" target="_blank" rel="external">Pandas 入门</a></li>
<li>整理自：<a href="http://www.lining0806.com/numpy%E7%9A%84ndarray%E4%B8%8Epandas%E7%9A%84series%E5%92%8Cdataframe%E4%B9%8B%E9%97%B4%E4%BA%92%E8%BD%AC/" target="_blank" rel="external">宁哥的小站</a></li>
</ul>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/02/15/2017-02-15-list-dict-series-dataframe-ndarray-transform/">
    <time datetime="2017-02-15T10:00:00.000Z" class="entry-date">
        2017-02-15
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DataClearing/">DataClearing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DataScience/">DataScience</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
</article>






  
    <article id="post-2017-03-05-NumPy" class="post-2017-03-05-NumPy post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2016/09/19/2017-03-05-NumPy/">Numpy 入门</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="/2016/09/19/2017-03-05-NumPy/#comments" class="leave-reply">Reply</a>
            
            <a href="javascript:void(0);" data-url="http://www.yam.gift/2016/09/19/2017-03-05-NumPy/" data-id="cjfp99iza0004rpca9nx85mrm" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p><strong>NumPy 笔记目录</strong></p>
<ul>
<li><a href="#Array Creation">Array Creation</a><ul>
<li><a href="#np.arange">np.arange</a></li>
<li><a href="#np.array">np.array</a></li>
</ul>
</li>
<li><a href="#Basic Operations">Basic Operations</a><ul>
<li><a href="#dot">dot</a></li>
<li><a href="#axis">axis</a></li>
</ul>
</li>
<li><a href="#Indexing, Slicing and Iterating">Indexing, Slicing and Iterating</a><ul>
<li><a href="#One-dimensional">One-dimensional</a></li>
<li><a href="#Multidimensional">Multidimensional</a></li>
<li><a href="#Iterating">Iterating</a></li>
<li><a href="#Indexing with Arrays">Indexing with Arrays</a></li>
<li><a href="#Search max &amp; min">Search max &amp; min</a></li>
<li><a href="#np.ix">np.ix_()</a></li>
</ul>
</li>
<li><a href="#Shape Manipulation">Shape Manipulation</a><ul>
<li><a href="#Changing the shape">Changing the shape</a></li>
<li><a href="#Stacking together">Stacking together</a></li>
<li><a href="#Splitting">Splitting</a></li>
<li><a href="#Copy and Views">Copy and Views</a></li>
</ul>
</li>
</ul>
<h3 id="Array Creation">Array Creation</h3>


<h4 id="np.arange">np.arange</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import numpy as np</div><div class="line">&gt;&gt;&gt; a = np.arange(15).reshapre(3, 5)</div><div class="line">&gt;&gt;&gt; np.arange(10, 30, 5)</div><div class="line">array([10, 15, 20, 25])</div></pre></td></tr></table></figure>
<h4 id="np.array">np.array</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import numpy as np</div><div class="line">&gt;&gt;&gt; a = np.array([(2,3,4), (3,4,5)]) or</div><div class="line">&gt;&gt;&gt; a = np.array([ [2,3,4], [3,4,5] ])</div><div class="line">&gt;&gt;&gt; b = np.array([ [1,2], [3,4] ], dtype=complex)</div><div class="line">&gt;&gt;&gt; np.zeros(5)</div><div class="line">&gt;&gt;&gt; np.zeros((3,4))</div><div class="line">&gt;&gt;&gt; np.ones( (2,3,4), dtype=np.int16 ) # dtype can also be specified</div></pre></td></tr></table></figure>
<h3 id="Basic Operations">Basic Operations</h3>


<h4 id="dot">dot</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; A.dot(B) or</div><div class="line">&gt;&gt;&gt; np.dot(A, B)</div></pre></td></tr></table></figure>
<h4 id="axis">axis</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b = np.arange(12).reshape(3,4)</div><div class="line">array(</div><div class="line">[[ 0,  1,  2,  3],</div><div class="line"> [ 4,  5,  6,  7],</div><div class="line"> [ 8,  9, 10, 11]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b.sum(axis=0)  # sum of each column</div><div class="line">array([12, 15, 18, 21])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b.min(axis=1)  # min of each row</div><div class="line">array([0, 4, 8])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b.cumsum(axis=1)  # cumulative sum along each row</div><div class="line">array(</div><div class="line">[[ 0,  1,  3,  6],</div><div class="line"> [ 4,  9, 15, 22],</div><div class="line"> [ 8, 17, 27, 38]])</div></pre></td></tr></table></figure>
<h3 id="Indexing, Slicing and Iterating">Indexing, Slicing and Iterating</h3>


<h4 id="One-dimensional">One-dimensional</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(10)**3</div><div class="line">array([  0,   1,   8,  27,  64, 125, 216, 343, 512, 729])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[: 6 : 2] = -1000   # equivalent to a[0:6:2] = -1000; from start to position 6, exclusive, set every 2nd element (二次元) to -1000</div><div class="line">array([ -1000, 1, -1000, 27, -1000, 125, 216, 343, 512, 729])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[ : :-1]  # reversed a</div><div class="line">array([  729,   512,   343,   216,   125, -1000,    27, -1000,     1, -1000])</div></pre></td></tr></table></figure>
<h4 id="Multidimensional">Multidimensional</h4>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; def f(x,y):</div><div class="line">...     return 10*x+y</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b = np.fromfunction(f,(5,4),dtype=int)</div><div class="line">&gt;&gt;&gt; b</div><div class="line">array(</div><div class="line">[[ 0,  1,  2,  3],</div><div class="line"> [10, 11, 12, 13],</div><div class="line"> [20, 21, 22, 23],</div><div class="line"> [30, 31, 32, 33],</div><div class="line"> [40, 41, 42, 43]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b[1:3, : ]   # each column in the second and third row of b</div><div class="line">array(</div><div class="line">[[10, 11, 12, 13],</div><div class="line"> [20, 21, 22, 23]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c = np.array( [[[  0,  1,  2],</div><div class="line">...                 [ 10, 12, 13]],</div><div class="line">...                [[100,101,102],</div><div class="line">...                 [110,112,113]]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c.shape</div><div class="line">(2, 2, 3)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c[1,...]     # same as c[1,:,:] or c[1]</div><div class="line">array(</div><div class="line">[[100, 101, 102],</div><div class="line"> [110, 112, 113]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c[...,2]       # same as c[:,:,2]</div><div class="line">array(</div><div class="line">[[  2,  13],</div><div class="line"> [102, 113]])</div></pre></td></tr></table></figure>
<h4 id="Iterating">Iterating</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; for row in b:</div><div class="line">&gt;&gt;&gt;     print(row)</div><div class="line">[0 1 2 3]</div><div class="line">[10 11 12 13]</div><div class="line">[20 21 22 23]</div><div class="line">[30 31 32 33]</div><div class="line">[40 41 42 43]</div><div class="line">&gt;&gt;&gt; for element in b.flat:</div><div class="line">        print(element)  # this will print every element.</div></pre></td></tr></table></figure>
<p><code>key words: flat</code></p>
<h4 id="Indexing with Arrays">Indexing with Arrays</h4>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(12).reshape(3,4)</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[ 0,  1,  2,  3],</div><div class="line"> [ 4,  5,  6,  7],</div><div class="line"> [ 8,  9, 10, 11]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; i = np.array([ [0,1],</div><div class="line">                    [1,2] ] )  # indices for the first dim of a</div><div class="line">&gt;&gt;&gt; j = np.array( [ [2,1],</div><div class="line">                     [3,3] ] ) # indices for the second dim</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[i,j]  # i and j must have equal shape</div><div class="line">array(</div><div class="line">[[ 2,  5],</div><div class="line"> [ 7, 11]])</div><div class="line"> 组合顺序如下：</div><div class="line"> (0, 2), (1, 1)</div><div class="line"> (1, 3), (2, 3)</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[i] # equal to a[i, :]</div><div class="line">array(</div><div class="line">[[[0, 1, 2, 3],</div><div class="line">    [4, 5 ,6, 7]],</div><div class="line"></div><div class="line">   [[4, 5, 6, 7],</div><div class="line">    [8, 9,10,11]]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[i,2]</div><div class="line">array([[ 2,  6],</div><div class="line">         [ 6, 10]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[:,j]   # i.e., a[ : , j]</div><div class="line">array(</div><div class="line">[[[ 2,  1],</div><div class="line">    [ 3,  3]],</div><div class="line">   [[ 6,  5],</div><div class="line">    [ 7,  7]],</div><div class="line">   [[10,  9],</div><div class="line">    [11, 11]]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; l = [i,j]</div><div class="line">&gt;&gt;&gt; a[l]      # equivalent to a[i,j]</div><div class="line">array(</div><div class="line">[[ 2,  5],</div><div class="line">   [ 7, 11]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; s = np.array( [i,j] ) # s.shape = (2, 2, 2)</div><div class="line">&gt;&gt;&gt; a[s]      # not what we want</div><div class="line">Traceback (most recent call last): File &quot;&lt;stdin&gt;&quot;, line 1, in ?</div><div class="line">IndexError: index (3) out of range (0&lt;=index&lt;=2) in dimension 0</div><div class="line">&gt;&gt;&gt; a[tuple(s)]       # same as a[i,j]</div><div class="line">array(</div><div class="line">[[ 2,  5],</div><div class="line">   [ 7, 11]])</div></pre></td></tr></table></figure>
<h4 id="Search max & min">Search max &amp; min</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; time = np.linspace(20, 145, 5)    # time scale</div><div class="line">&gt;&gt;&gt; data = np.sin(np.arange(20)).reshape(5,4)</div><div class="line">&gt;&gt;&gt; time</div><div class="line">array([  20\.  ,   51.25,   82.5 ,  113.75,  145\.  ])</div><div class="line">&gt;&gt;&gt; data</div><div class="line">array(</div><div class="line">[[ 0\.       ,  0.84147098,  0.90929743,  0.14112001],</div><div class="line">   [-0.7568025 , -0.95892427, -0.2794155 ,  0.6569866 ],</div><div class="line">   [ 0.98935825,  0.41211849, -0.54402111, -0.99999021],</div><div class="line">   [-0.53657292,  0.42016704,  0.99060736,  0.65028784],</div><div class="line">   [-0.28790332, -0.96139749, -0.75098725,  0.14987721]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; ind = data.argmax(axis=0)  # index of the maxima for each series</div><div class="line">&gt;&gt;&gt; ind</div><div class="line">array([2, 0, 3, 1]) # 位置</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; time_max = time[ind]    # times corresponding to the maxima</div><div class="line">&gt;&gt;&gt; data_max = data[ind, xrange(data.shape[1])] # =&gt; data[ind[0],0], data[ind[1],1]. 等价于data[ind, range(4)]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; time_max</div><div class="line">array([  82.5 ,   20\.  ,  113.75,   51.25])</div><div class="line">&gt;&gt;&gt; data_max</div><div class="line">array([ 0.98935825,  0.84147098,  0.99060736,  0.6569866 ])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.all(data_max == data.max(axis=0))</div><div class="line">True</div></pre></td></tr></table></figure>
<p><code>key words: data.argmax(axis=0), data.max(axis=0)</code></p>
<h4 id="np.ix">np.ix_()</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.array([2,3,4,5])</div><div class="line">&gt;&gt;&gt; b = np.array([8,5,4])</div><div class="line">&gt;&gt;&gt; c = np.array([5,4,6,8,3])</div><div class="line">&gt;&gt;&gt; ax,bx,cx = np.ix_(a,b,c)</div><div class="line">&gt;&gt;&gt; ax</div><div class="line">array(</div><div class="line">[[[2]],</div><div class="line">   [[3]],</div><div class="line">   [[4]],</div><div class="line">   [[5]]])</div><div class="line">&gt;&gt;&gt; bx</div><div class="line">array(</div><div class="line">[[[8],</div><div class="line">    [5],</div><div class="line">    [4]]])</div><div class="line">&gt;&gt;&gt; cx</div><div class="line">array(</div><div class="line">[[[5, 4, 6, 8, 3]]])</div><div class="line">&gt;&gt;&gt; ax.shape, bx.shape, cx.shape</div><div class="line">((4, 1, 1), (1, 3, 1), (1, 1, 5))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(10).reshape(2,5)</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[0, 1, 2, 3, 4],</div><div class="line"> [5, 6, 7, 8, 9]])</div><div class="line"> &gt;&gt;&gt; ixgrid = np.ix_([0,1], [2,4])</div><div class="line"> &gt;&gt;&gt; ixgrid</div><div class="line"> (array([[0],</div><div class="line">          [1]], array([[2, 4]]))</div><div class="line"> &gt;&gt;&gt; ixgrid[0].shape, ixgrid[1].shape</div><div class="line"> ((2,1), (1,2))</div><div class="line"> &gt;&gt;&gt; a[ixgrid]</div><div class="line"> array([[2, 4],</div><div class="line">         [7, 9]])</div></pre></td></tr></table></figure>
<p><code>key words: np.ix_()</code>，可以发现从 ax 到 cx，分别对应 4，3，5。</p>
<h3 id="Shape Manipulation">Shape Manipulation</h3>


<h4 id="Changing the shape">Changing the shape</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.floor(10*np.random.random((3,4)))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[ 2.,  8.,  0.,  6.],</div><div class="line"> [ 4.,  5.,  1.,  1.],</div><div class="line"> [ 8.,  9.,  3.,  6.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a.ravel() # flatten the array</div><div class="line">array([ 2.,  8.,  0.,  6.,  4.,  5.,  1.,  1.,  8.,  9.,  3.,  6.])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a.resize((2,6))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[ 2.,  8.,  0.,  6.,  4.,  5.],</div><div class="line"> [ 1.,  1.,  8.,  9.,  3.,  6.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a.reshape(3,-1) # equal to a.reshape(3, 4)</div><div class="line">array(</div><div class="line">[[ 2.,  8.,  0.,  6.],</div><div class="line"> [ 4.,  5.,  1.,  1.],</div><div class="line"> [ 8.,  9.,  3.,  6.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(30)</div><div class="line">&gt;&gt;&gt; a.shape = 2,-1,3  # -1 means &quot;whatever is needed&quot;</div><div class="line">&gt;&gt;&gt; a.shape</div><div class="line">(2, 5, 3)</div></pre></td></tr></table></figure>
<p><code>key words: ravel, reshape, resize</code></p>
<h4 id="Stacking together">Stacking together</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.floor(10*np.random.random((2,2)))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[ 8.,  8.],</div><div class="line"> [ 0.,  0.]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b = np.floor(10*np.random.random((2,2)))</div><div class="line">&gt;&gt;&gt; b</div><div class="line">array(</div><div class="line">[[ 1.,  8.],</div><div class="line"> [ 0.,  4.]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.vstack((a,b))  # vertical stack</div><div class="line">array(</div><div class="line">[[ 8.,  8.],</div><div class="line"> [ 0.,  0.],</div><div class="line"> [ 1.,  8.],</div><div class="line"> [ 0.,  4.]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.hstack((a,b))  # horizontal stack</div><div class="line">array(</div><div class="line">[[ 8.,  8.,  1.,  8.],</div><div class="line"> [ 0.,  0.,  0.,  4.]])</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; from numpy import newaxis</div><div class="line">&gt;&gt;&gt; np.column_stack((a,b))   # With 2D arrays, it&apos;s equal to np.hstack((a, b))</div><div class="line">array(</div><div class="line">[[ 8.,  8.,  1.,  8.],</div><div class="line"> [ 0.,  0.,  0.,  4.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.array([4.,2.])  # a.shape = (2,)</div><div class="line">array([4., 2.])</div><div class="line">&gt;&gt;&gt; b = np.array([3.,8.])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[:, newaxis]  # This allows to have a 2D columns vector  a.shape = (2, 1)</div><div class="line">array(</div><div class="line">[[ 4.],</div><div class="line"> [ 2.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.column_stack((a[:,newaxis],b[:,newaxis]))  # equal to np.vstack(a, b)</div><div class="line">array(</div><div class="line">[[ 4.,  3.],</div><div class="line"> [ 2.,  8.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.vstack((a[:,newaxis],b[:,newaxis])) # The behavior of vstack is different</div><div class="line">array(</div><div class="line">[[ 4.],</div><div class="line"> [ 2.],</div><div class="line"> [ 3.],</div><div class="line"> [ 8.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.vstack((a, b))</div><div class="line">array(</div><div class="line">[[ 4.,  2.],</div><div class="line"> [ 3.,  8.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; x = np.arange(0,10,2)  # x=([0,2,4,6,8])</div><div class="line">&gt;&gt;&gt; y = np.arange(5)   # y=([0,1,2,3,4])</div><div class="line">&gt;&gt;&gt; m = np.vstack([x,y])   # m=([[0,2,4,6,8],</div><div class="line">                                   [0,1,2,3,4]])</div><div class="line">&gt;&gt;&gt; xy = np.hstack([x,y])  # xy =([0,2,4,6,8,0,1,2,3,4])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">In complex cases, _r and _c are useful for creating arrays by stacking numbers along one axis. They allow the use of range literals (”:”) :</div><div class="line">&gt;&gt;&gt; np.r_[1:4,0,4]</div><div class="line">array([1, 2, 3, 0, 4])</div></pre></td></tr></table></figure>
<p><code>key words: hstack, vstack, newaxis</code>，注意 Vector 的连接方法。</p>
<h4 id="Splitting">Splitting</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.floor(10*np.random.random((2,12)))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[ 9.,  5.,  6.,  3.,  6.,  8.,  0.,  7.,  9.,  7.,  2.,  7.],</div><div class="line"> [ 1.,  4.,  9.,  2.,  2.,  1.,  0.,  6.,  2.,  2.,  4.,  0.]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.hsplit(a,3)   # Split a into 3</div><div class="line">[array(</div><div class="line">[[ 9.,  5.,  6.,  3.],</div><div class="line"> [ 1.,  4.,  9.,  2.]]),</div><div class="line"> array(</div><div class="line"> [[ 6.,  8.,  0.,  7.],</div><div class="line"> [ 2.,  1.,  0.,  6.]]),</div><div class="line"> array(</div><div class="line"> [[ 9.,  7.,  2.,  7.],</div><div class="line"> [ 2.,  2.,  4.,  0.]])]</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.hsplit(a,(3,4))   # Split a after the third and the fourth column</div><div class="line">[array(</div><div class="line">[[ 9.,  5.,  6.],</div><div class="line"> [ 1.,  4.,  9.]]),</div><div class="line"> array(</div><div class="line"> [[ 3.],</div><div class="line"> [ 2.]]),</div><div class="line"> array(</div><div class="line"> [[ 6.,  8.,  0.,  7.,  9.,  7.,  2.,  7.],</div><div class="line"> [ 2.,  1.,  0.,  6.,  2.,  2.,  4.,  0.]])]</div></pre></td></tr></table></figure>
<p><code>key words: hsplit</code></p>
<h4 id="Copy and Views">Copy and Views</h4>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c = a.view()</div><div class="line">&gt;&gt;&gt; c is a</div><div class="line">False</div><div class="line">&gt;&gt;&gt; c.base is a   # c is a view of the data owned by a</div><div class="line">True</div><div class="line">&gt;&gt;&gt; c.flags.owndata</div><div class="line">False</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; c.shape = 2,6    # a&apos;s shape doesn&apos;t change</div><div class="line">&gt;&gt;&gt; a.shape</div><div class="line">(3, 4)</div><div class="line">&gt;&gt;&gt; c[0,4] = 1234    # a&apos;s data changes</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[   0,    1,    2,    3],</div><div class="line"> [1234,    5,    6,    7],</div><div class="line"> [   8,    9,   10,   11]])</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; d = a.copy()  # a new array object with new data is created</div><div class="line">&gt;&gt;&gt; d is a</div><div class="line">False</div><div class="line">&gt;&gt;&gt; d.base is a   # d doesn&apos;t share anything with a</div><div class="line">False</div><div class="line">&gt;&gt;&gt; d[0,0] = 9999</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array(</div><div class="line">[[   0,    1,    2,    3],</div><div class="line"> [1234,    5,    6,    7],</div><div class="line"> [   8,    9,   10,   11]])</div></pre></td></tr></table></figure>
<p><code>key words: view, base, copy</code><br><code>view</code> 复制了 data 但不复制 shape，就是原始数据的 view； <code>copy</code> 完全复制一份。</p>
<p>引自<a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="external">官方手册</a></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2016/09/19/2017-03-05-NumPy/">
    <time datetime="2016-09-19T13:32:55.000Z" class="entry-date">
        2016-09-19
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Coding/">Coding</a>
  </div>

    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DataScience/">DataScience</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NumPy/">NumPy</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
</article>






  
    <article id="post-2016-09-20-Ubuntu-VirtualBox-Vagrant-questions" class="post-2016-09-20-Ubuntu-VirtualBox-Vagrant-questions post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2016/09/04/2016-09-20-Ubuntu-VirtualBox-Vagrant-questions/">Ubuntu16.04 安装 VirtualBox &amp; Vagrant 管理 VirtualBox 各种问题总结</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="/2016/09/04/2016-09-20-Ubuntu-VirtualBox-Vagrant-questions/#comments" class="leave-reply">Reply</a>
            
            <a href="javascript:void(0);" data-url="http://www.yam.gift/2016/09/04/2016-09-20-Ubuntu-VirtualBox-Vagrant-questions/" data-id="cjfp99iz20000rpca12edxwv5" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h2 id="Ubuntu-下安装-VirtualBox"><a href="#Ubuntu-下安装-VirtualBox" class="headerlink" title="Ubuntu 下安装 VirtualBox"></a>Ubuntu 下安装 VirtualBox</h2><ul>
<li><a href="http://blog.csdn.net/flm2003/article/details/8168628" target="_blank" rel="external">Ubuntu下轻松安装virtualbox</a></li>
</ul>
<p>注意：  </p>
<ul>
<li>务必要仔细查看用户手册上对系统和必要环境的依赖。</li>
<li>如果 kernel header 不一致，需要更新 kernel：  <ul>
<li><code>sudo apt-get install linux-headers-generic</code> 或者  </li>
<li><code>sudo apt-get install linux-headers-$(uname -r)</code><br><code>uname -r</code> 等于你的版本内核，比如我的：<code>4.4.0-21-generic</code></li>
</ul>
</li>
<li>如果不能<a href="http://askubuntu.com/questions/762136/cannot-reinstall-virtualbox-on-ubuntu-16-04" target="_blank" rel="external">重装VBox</a>，需要修改BIOS设置：  <ul>
<li>Security 中的 Secure Boot 设置为“Disabled” （一般设置这个就可以了吧）</li>
<li>Startup中的 UEFI/Legacy Boot 选 Both</li>
<li>Priority 选 Legacy First，CSM Support 选 Yes<br>包括类似 Surface Pro，都可以这样操作。<br>另外，由于现在的主板很多都带有 UEFI Secure Boot 功能，可能导致使用USB设备启动不了系统。用此方法也可以搞定。<br>参考至： <a href="http://blog.csdn.net/tanaya/article/details/8846779" target="_blank" rel="external">电脑无法从USB启动可能是 UEFI Secure Boot 在捣鬼！</a></li>
</ul>
</li>
</ul>
<h2 id="使用-Vagrant-管理-VirtualBox"><a href="#使用-Vagrant-管理-VirtualBox" class="headerlink" title="使用 Vagrant 管理 VirtualBox"></a>使用 Vagrant 管理 VirtualBox</h2><ul>
<li><a href="http://wp.fungo.me/linux/vagrant-for-programmer-ch1.html" target="_blank" rel="external">Vagrant：程序员的VirtualBox</a>  </li>
</ul>
<p>注意：  </p>
<ul>
<li>如果在 <code>vagrant up</code> 时碰到<a href="https://github.com/lynnaloo/xtuple-vagrant/issues/13" target="_blank" rel="external">VirtualBox is complaining that the kernel module is not loaded</a>，可能需要这个命令：  <ul>
<li><code>sudo /usr/lib/virtualbox/vboxdrv.sh setup</code><br>注意此命令支持Ubuntu15.0，16.0，其他版本不一定支持。  </li>
<li>或者 <code>sudo /etc/init.d/vboxdrv setup</code><br>参见：<a href="https://gist.github.com/geraldvillorente/977d16624e079ba12741" target="_blank" rel="external">vagrant-virtualbox-failed</a>  </li>
</ul>
</li>
<li>如果输入在 <code>vagrant up</code> 时出现以下错误，可能需要重新安装  vagrant，地址在这里：<a href="http://www.vagrantup.com/downloads.html" target="_blank" rel="external">vagrantup</a>   </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ vagrant package</div><div class="line">No usable default provider could be found for your system.  </div><div class="line"></div><div class="line">$ vagrant package --base vagrant-ubuntu64</div><div class="line">Vagrant has detected that you have a version of VirtualBox installed that is not supported by this version of Vagrant.   </div><div class="line">Please install one of the supported versions listed below to use Vagrant: 4.0, 4.1, 4.2, 4.3, 5.0</div></pre></td></tr></table></figure>
<p>   可参考这两个地方：  </p>
<ul>
<li><a href="http://stackoverflow.com/questions/29450437/unable-to-vagrant-up-how-to-set-providers" target="_blank" rel="external">Unable to vagrant up - how to set “providers”</a></li>
<li><a href="https://github.com/mitchellh/vagrant/issues/7578" target="_blank" rel="external">Make Virtualbox 5.1 final version compatible</a></li>
</ul>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2016/09/04/2016-09-20-Ubuntu-VirtualBox-Vagrant-questions/">
    <time datetime="2016-09-04T12:59:08.000Z" class="entry-date">
        2016-09-04
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Feeling/">Feeling</a>
  </div>

    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vagrant/">Vagrant</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VirtualBox/">VirtualBox</a></li></ul>

    </footer>
</article>






  
    <article id="post-2016-09-21-Simpson-Paradox" class="post-2016-09-21-Simpson-Paradox post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2016/09/03/2016-09-21-Simpson-Paradox/">辛普森悖论及其哲学思考</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="/2016/09/03/2016-09-21-Simpson-Paradox/#comments" class="leave-reply">Reply</a>
            
            <a href="javascript:void(0);" data-url="http://www.yam.gift/2016/09/03/2016-09-21-Simpson-Paradox/" data-id="cjfp99iz60001rpcaqcw496tu" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h3 id="什么是辛普森悖论"><a href="#什么是辛普森悖论" class="headerlink" title="什么是辛普森悖论"></a>什么是辛普森悖论</h3><p>某个条件下的两组数据，分别讨论时满足某种性质，但合并起来可能导致相反的结论。这就是辛普森悖论。</p>
<p>假设某公司考核员工有个指标叫迟到出错率=（迟到次数+出错次数）/（出勤次数+工作个数），包括出错率和迟到率2个指标。<br>A员工做了5件<strong>重要</strong>工作，出错1件；<br>B员工做了100件<strong>很简单</strong>的小事情，出错21件。<br>A员工出勤100次，迟到29次，每次<strong>1分钟</strong>；<br>B员工出勤10次，迟到9次，每次<strong>2小时</strong>。<br>则：A员工出错率20%，迟到率29%；B员工出错率21%，迟到率90%，如果分别看出错率和迟到率，A员工明显比B员工优秀。<br>那么实际情况呢：A员工迟到出错率30/105；B员工迟到出错率30/110，B员工评分高于A员工。<br>这就是辛普森悖论的典型案例。</p>
<h3 id="为什么会出现辛普森悖论"><a href="#为什么会出现辛普森悖论" class="headerlink" title="为什么会出现辛普森悖论"></a>为什么会出现辛普森悖论</h3><p>1、用相对比例（百分比）衡量结果。换句话说，用相对坐标去描述绝对坐标的情况。<br>常见的例子就是百度Google经常能搜出来的录取比例，女生占比等，比如这篇<a href="http://www.guokr.com/article/6222/" target="_blank" rel="external">辛普森悖论：诡异的男女比例</a>以及维基百科的<a href="https://zh.wikipedia.org/zh-cn/%E8%BE%9B%E6%99%AE%E6%A3%AE%E6%82%96%E8%AE%BA" target="_blank" rel="external">例子</a>。这种例子直接用绝对数值去看就可破解悖论。<br>2、数据本身是由不同部分构成，而这不同部分的权重可能不同。<br>第1点说的常见的例子，其实就是将不同结构的权重按 1:1 进行分配的结果（即A学院，B学院）。<br>我们的案例其实也是这样的，我们做个极端的推理，假设迟到率权重为0，则A员工迟到出错率20%，B员工21%，A员工评分高于B员工。<br>3、除了构成部分本身权重不同外，不同部分的质量也有区别。<br>其实，到了这里，我们已经慢慢在接近本质了。那就是：质与量的矛盾。我们身处一个“评价系统”中，自然选择和进化论就是评价的结果。<br>除了我们熟知的各种数据指标外，还包括我们每一个决策和行为。前者结果非常直观，后者则表现为“命运”。所有的结果都是“物竞天择，适者生存”。这个话题到此为止。  </p>
<p>所以，其实这是通过量对质进行评价过程中的三个层次：<br>第一层：也是最外面的那层，是用相对比例（百分比）表示而造成的结果扭曲；这一层是“显示”出（导致）的错误。<br>第二层：数据不同构成部分“重要性”（权重）不同而造成的结果扭曲；这一层是未考虑“结构”导致的错误。<br>第三层：每个构成部分数据本身的“重要性”不同而造成的结果扭曲；这一层是未考虑“内容”导致的错误。  </p>
<p>综上，我们可以重新定义一下辛普森悖论：<br>人们在对事物的评价过程中，未考虑每组数据本身的重要性以及不同部分数据的结构的“权重”，并采用相对指标对结果进行描述而造成的对真实结果的扭曲的一类现象。  </p>
<p>再扩展一下，上述定义很重要的两个地方：“人们”和“现象”。<br>就是说，评价是以人的某种需求为中心的，需求不同，观察到的“现象”亦不同。<br>这是否让我们想起了薛定谔的那只猫？<br>另外，是什么让“人”进行“评价”？这个过程究竟是有意识的还是无意识的？  </p>
<h3 id="结果应用"><a href="#结果应用" class="headerlink" title="结果应用"></a>结果应用</h3><p>简单来说，辛普森悖论告诉我们，任何时候不能简单地根据数据结果而轻易得出一些看似确定的结论。真正的结论需要我们对分析目的进行深入思考，对数据本身进行深入细致地探索研究后才有可能得出。</p>
<blockquote>
<p>永远对知识充满敬畏。弱小和无知不是生存的障碍，傲慢才是。</p>
</blockquote>
<h3 id="可视化"><a href="#可视化" class="headerlink" title="可视化"></a>可视化</h3><p><a href="http://vudlab.com/simpsons/" target="_blank" rel="external">Simpson’s Paradox</a></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2016/09/03/2016-09-21-Simpson-Paradox/">
    <time datetime="2016-09-03T06:26:49.000Z" class="entry-date">
        2016-09-03
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Thinking/">Thinking</a>
  </div>

    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SimpsonParadox/">SimpsonParadox</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Statistics/">Statistics</a></li></ul>

    </footer>
</article>






  
  

</div></div>
        <div id="secondary" class="widget-area" role="complementary">
  
    <aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value="" name="s" id="s" />
        <input type="submit" id="searchsubmit" value="搜索" />
    </div>
</form></aside>
  
    
  <aside class="widget">
    <h3 class="widget-title">Music</h3>
    <div class="widget-content">
      <audio src="http://omaxbcyvb.bkt.clouddn.com/miss.mp3" controls="controls"
             style="width:100%">
        您的浏览器不支持 audio 标签。
      </audio>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-content">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Coding/">Coding</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Feeling/">Feeling</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Thinking/">Thinking</a><span class="category-list-count">3</span></li></ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-content">
      <ul>
        
          <li>
            <a href="/2017/09/07/2017-09-07-Language-AI-Emotion/">语言、AI、情感</a>
          </li>
        
          <li>
            <a href="/2017/08/31/2017-08-31-diary/">随笔：人生，当有所为有所不为</a>
          </li>
        
          <li>
            <a href="/2017/04/09/2017-04-09-NLPKnowledgeTree/">自然语言处理（NLP）知识地图</a>
          </li>
        
          <li>
            <a href="/2017/03/05/2017-03-05-Pandas/">Pandas 入门</a>
          </li>
        
          <li>
            <a href="/2017/03/05/2017-03-05-Python-encode-decode/">Python 编码笔记整理</a>
          </li>
        
      </ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-content">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI/">AI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataClearing/">DataClearing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataScience/">DataScience</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DeepLearning/">DeepLearning</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Diary/">Diary</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLP/">NLP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NumPy/">NumPy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pandas/">Pandas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SimpsonParadox/">SimpsonParadox</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Statistics/">Statistics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vagrant/">Vagrant</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VirtualBox/">VirtualBox</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-content tagcloud">
      <a href="/tags/AI/" style="font-size: 10px;">AI</a> <a href="/tags/DataClearing/" style="font-size: 10px;">DataClearing</a> <a href="/tags/DataScience/" style="font-size: 16.67px;">DataScience</a> <a href="/tags/DeepLearning/" style="font-size: 10px;">DeepLearning</a> <a href="/tags/Diary/" style="font-size: 10px;">Diary</a> <a href="/tags/NLP/" style="font-size: 13.33px;">NLP</a> <a href="/tags/NumPy/" style="font-size: 10px;">NumPy</a> <a href="/tags/Pandas/" style="font-size: 10px;">Pandas</a> <a href="/tags/Python/" style="font-size: 20px;">Python</a> <a href="/tags/SimpsonParadox/" style="font-size: 10px;">SimpsonParadox</a> <a href="/tags/Statistics/" style="font-size: 10px;">Statistics</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/Vagrant/" style="font-size: 10px;">Vagrant</a> <a href="/tags/VirtualBox/" style="font-size: 10px;">VirtualBox</a>
    </div>
  </aside>

  
</div>
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2018 Yam
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</footer>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>

<script src="/js/jquery-2.0.3.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
</body>
</html>